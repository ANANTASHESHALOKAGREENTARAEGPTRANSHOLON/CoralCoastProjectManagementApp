"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[63],{3744:(t,e)=>{e.Z=(t,e)=>{const s=t.__vccOpts||t;for(const[t,o]of e)s[t]=o;return s}},3900:(t,e,s)=>{s.r(e),s.d(e,{default:()=>$t});var o=s(6252);const i={class:"card kanban-group-permissions"},r={class:"card-body"};var a=s(3577);const n=(0,o.Uk)(" Groups"),l={class:"text-instructions"},d={class:"table group-and-user-table"},u=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("td",null,"Group Name")])],-1),c={class:"row submit-row"},p={class:"col-md-12"},h=(0,o._)("hr",null,null,-1),m=(0,o.Uk)(" Users"),g={class:"text-instructions"},_={key:0,class:"alert alert-dark"},b={key:1,class:"user-card-layouts"},f={class:"user-card"},U=["src"],v={class:"user-details"},y=(0,o._)("br",null,null,-1),w=(0,o._)("div",{class:"spacer"},null,-1),L={key:0,class:"remove-user"},k={class:"row submit-row"},D={class:"col-md-12"};var I=s(3058),S=s(5808),Z=s(6542),M=s(9669),G=s.n(M),$=s(9909);const x={class:"modal fade",id:"addGroupModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},E={class:"modal-dialog modal-lg"},A={class:"modal-content"},C={class:"modal-header"},B=(0,o.Uk)(" Add Group Wizard"),W=(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addGroupCloseButton"},[(0,o._)("span",{"aria-hidden":"true"})],-1),N={class:"modal-body"},R={key:0,class:"row"},T={class:"col-md-4"},q=(0,o._)("strong",null,"Add Groups",-1),O={class:"text-instructions"},P={class:"text-instructions"},F={class:"col-md-8"},j={key:1,class:"row"},z=(0,o._)("div",{class:"col-md-6"},[(0,o._)("strong",null,"Sorry - no results"),(0,o._)("p",{class:"text-instructions"},[(0,o.Uk)(" This could be because "),(0,o._)("ul",null,[(0,o._)("li",null,"There are no more groups left to add")])])],-1),H={class:"col-md-6 no-search"},J=["src"],K={class:"modal-footer"},Y=(0,o._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),V=["disabled"];var Q=s(6761),X=s(4250);const tt=s(9669),et={name:"AddGroupWizard",components:{Icon:Z.JO,NSelect:Q.Z},props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},computed:{...(0,X.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[I.Z,S.Z],data:()=>({groupFixList:[],groupModel:[]}),methods:{addGroup:function(){const t=new FormData;this.groupModel.forEach((e=>{t.append("group_list",e)})),tt.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_group/`,t).then((t=>{this.$emit("update_group_list",t.data),document.getElementById("addGroupCloseButton").click(),this.getGroupList()})).catch((t=>{this.showErrorModal(t,this.destination)}))},getGroupList:function(){tt.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/group_list_all/`).then((t=>{this.groupFixList=t.data.map((t=>({value:t.pk,label:t.fields.group_name})))})).catch((t=>{this.showErrorModal(t,this.destination)}))}},mounted(){setTimeout((()=>{this.getGroupList()}),200)}};var st=s(3744);const ot=(0,st.Z)(et,[["render",function(t,e,s,i,r,n){const l=(0,o.up)("Icon"),d=(0,o.up)("n-select");return(0,o.wg)(),(0,o.iD)("div",x,[(0,o._)("div",E,[(0,o._)("div",A,[(0,o._)("div",C,[(0,o._)("h2",null,[(0,o.Wm)(l,{icon:t.icons.groupPresentation},null,8,["icon"]),B]),W]),(0,o._)("div",N,[r.groupFixList.length>0?((0,o.wg)(),(0,o.iD)("div",R,[(0,o._)("div",T,[q,(0,o._)("p",O," Use the following multiple select to select which groups you want to add to this "+(0,a.toDisplayString)(s.destination)+". ",1),(0,o._)("p",P," Please note: A user's group has to be added to the "+(0,a.toDisplayString)(s.destination)+" before the user can be added. ",1)]),(0,o._)("div",F,[(0,o.Wm)(d,{options:r.groupFixList,value:r.groupModel,"onUpdate:value":e[0]||(e[0]=t=>r.groupModel=t),multiple:""},null,8,["options","value"])])])):((0,o.wg)(),(0,o.iD)("div",j,[z,(0,o._)("div",H,[(0,o._)("img",{src:`${t.staticUrl}NearBeach/images/placeholder/questions.svg`,alt:"Sorry - there are no results"},null,8,J)])]))]),(0,o._)("div",K,[Y,(0,o._)("button",{type:"button",class:"btn btn-primary",disabled:0==r.groupModel.length,onClick:e[1]||(e[1]=(...t)=>n.addGroup&&n.addGroup(...t))},"Add Group(s)",8,V)])])])])}]]),it={class:"modal fade",id:"addUserModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},rt={class:"modal-dialog modal-lg"},at={class:"modal-content"},nt={class:"modal-header"},lt=(0,o.Uk)(" Add User Wizard"),dt=(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addUserCloseButton"},[(0,o._)("span",{"aria-hidden":"true"})],-1),ut={class:"modal-body"},ct={key:0,class:"row"},pt={class:"col-md-4"},ht=(0,o._)("strong",null,"Add Users",-1),mt={class:"text-instructions"},gt={class:"text-instructions"},_t={class:"col-md-8"},bt={key:1,class:"row"},ft={class:"col-md-6"},Ut=(0,o._)("strong",null,"Sorry - no results",-1),vt={class:"text-instructions"},yt=(0,o.Uk)(" This could be because "),wt=(0,o._)("li",null,"There are no more users left to add",-1),Lt={class:"col-md-6 no-search"},kt=["src"],Dt={class:"modal-footer"},It=(0,o._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),St=["disabled"],Zt={name:"AddUserWizard",components:{Icon:Z.JO,NSelect:Q.Z},props:{destination:{type:String,default:""},locationId:{type:Number,default:0},refreshUserList:{type:Boolean,default:!1}},mixins:[I.Z,S.Z],computed:{...(0,X.Se)({rootUrl:"getRootUrl",staticURL:"getStaticUrl"})},data:()=>({userFixList:[],userModel:[]}),methods:{addUser:function(){const t=new FormData;this.userModel.forEach((e=>{t.append("user_list",e)})),G().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_user/`,t).then((t=>{this.$emit("update_user_list",t.data),document.getElementById("addUserCloseButton").click(),this.userModel=[],this.getUserList()})).catch((t=>{this.showErrorModal(t,this.destination)}))},getUserList:function(){G().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/user_list_all/`).then((t=>{this.userFixList=t.data.map((t=>({value:t.id,label:`${t.username}: ${t.first_name} ${t.last_name}`})))}))}},watch:{refreshUserList:function(){this.refreshUserList&&this.getUserList(),this.$emit("reset_refresh_user_list")}},mounted(){setTimeout((()=>{this.getUserList()}),200)}},Mt={name:"GroupsAndUsersModule",components:{AddGroupWizard:ot,AddUserWizard:(0,st.Z)(Zt,[["render",function(t,e,s,i,r,n){const l=(0,o.up)("Icon"),d=(0,o.up)("n-select");return(0,o.wg)(),(0,o.iD)("div",it,[(0,o._)("div",rt,[(0,o._)("div",at,[(0,o._)("div",nt,[(0,o._)("h2",null,[(0,o.Wm)(l,{icon:t.icons.userIcon},null,8,["icon"]),lt]),dt]),(0,o._)("div",ut,[r.userFixList.length>0?((0,o.wg)(),(0,o.iD)("div",ct,[(0,o._)("div",pt,[ht,(0,o._)("p",mt," Use the following multiple select to select which users you want to add to this "+(0,a.toDisplayString)(s.destination)+". ",1),(0,o._)("p",gt," Please note: A user's group has to be added to the "+(0,a.toDisplayString)(s.destination)+" before the user can be added. ",1)]),(0,o._)("div",_t,[(0,o.Wm)(d,{options:r.userFixList,value:r.userModel,"onUpdate:value":e[0]||(e[0]=t=>r.userModel=t),multiple:""},null,8,["options","value"])])])):((0,o.wg)(),(0,o.iD)("div",bt,[(0,o._)("div",ft,[Ut,(0,o._)("p",vt,[yt,(0,o._)("ul",null,[wt,(0,o._)("li",null," The user you are after is in a group not current added to this "+(0,a.toDisplayString)(s.destination),1)])])]),(0,o._)("div",Lt,[(0,o._)("img",{src:`${t.staticURL}NearBeach/images/placeholder/questions.svg`,alt:"Sorry - there are no results"},null,8,kt)])]))]),(0,o._)("div",Dt,[It,(0,o._)("button",{type:"button",class:"btn btn-primary",disabled:0===r.userModel.length,onClick:e[1]||(e[1]=(...t)=>n.addUser&&n.addUser(...t))},"Add User(s)",8,St)])])])])}]]),Icon:Z.JO},props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},computed:{...(0,X.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl",userLevel:"getUserLevel"})},mixins:[I.Z,S.Z],data:()=>({groupList:[],refreshUserListBoolean:!1,userList:[]}),methods:{addNewGroup:function(){new $.u_(document.getElementById("addGroupModal")).show()},addNewUser:function(){new $.u_(document.getElementById("addUserModal")).show()},getGroupList:function(){G().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/group_list/`).then((t=>{this.groupList=t.data})).catch((t=>{this.showErrorModal(t,this.destination)}))},getUserList:function(){G().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/user_list/`).then((t=>{this.userList=t.data})).catch((t=>{this.showErrorModal(t,this.destination)}))},removeUser:function(t){this.userList=this.userList.filter((e=>e.username!==t));const e=new FormData;e.set("username",t),G().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/remove_user/`,e).catch((t=>{this.showErrorModal(t,this.destination)}))},resetRefreshUserList:function(){this.refreshUserListBoolean=!1},updateGroupList:function(t){this.groupList=t,this.refreshUserListBoolean=!0},updateUserList:function(t){this.userList=t}},mounted(){setTimeout((()=>{this.getGroupList(),this.getUserList()}),200)}},Gt={name:"KanbanGroupPermissions",components:{GroupsAndUsersModule:(0,st.Z)(Mt,[["render",function(t,e,s,i,r,I){const S=(0,o.up)("Icon"),Z=(0,o.up)("add-group-wizard"),M=(0,o.up)("add-user-wizard");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.kq)(" GROUPS "),(0,o._)("h2",null,[(0,o.Wm)(S,{icon:t.icons.groupPresentation},null,8,["icon"]),n]),(0,o._)("p",l," The following list are all the Groups connected to this "+(0,a.toDisplayString)(s.destination)+". Users will have to be included in these groups to be added to this "+(0,a.toDisplayString)(s.destination),1),(0,o._)("table",d,[u,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.groupList,(t=>((0,o.wg)(),(0,o.iD)("tr",null,[(0,o._)("td",null,(0,a.toDisplayString)(t.fields.group_name),1)])))),256))])]),(0,o.kq)(" ADD GROUP "),(0,o.kq)(" TO DO - limit it to certain users "),(0,o._)("div",c,[(0,o._)("div",p,[t.userLevel>1?((0,o.wg)(),(0,o.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[0]||(e[0]=(...t)=>I.addNewGroup&&I.addNewGroup(...t))},"Add Group to "+(0,a.toDisplayString)(s.destination),1)):(0,o.kq)("v-if",!0)])]),h,(0,o.kq)(" USERS "),(0,o._)("h2",null,[(0,o.Wm)(S,{icon:t.icons.userIcon},null,8,["icon"]),m]),(0,o._)("p",g," The following are a list of users who are connected to this "+(0,a.toDisplayString)(s.destination)+". Please note - users have to be a part of the groups list above. ",1),0==r.userList.length?((0,o.wg)(),(0,o.iD)("div",_," Sorry - there are no current users active. ")):((0,o.wg)(),(0,o.iD)("div",b,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.userList,(e=>((0,o.wg)(),(0,o.iD)("div",f,[(0,o._)("img",{src:`${t.staticUrl}/NearBeach/images/placeholder/people_tax.svg`,alt:"default profile",class:"default-user-profile"},null,8,U),(0,o._)("div",v,[(0,o._)("strong",null,(0,a.toDisplayString)(e.first_name)+" "+(0,a.toDisplayString)(e.last_name),1),y,(0,o.Uk)(" "+(0,a.toDisplayString)(e.username)+" ",1),w,(0,o.Uk)(" "+(0,a.toDisplayString)(e.email),1)]),t.userLevel>=3?((0,o.wg)(),(0,o.iD)("div",L,[(0,o.Wm)(S,{icon:t.icons.trashCan,onClick:t=>I.removeUser(e.username)},null,8,["icon","onClick"])])):(0,o.kq)("v-if",!0)])))),256))])),(0,o.kq)(" TO DO - limit it to certain users "),(0,o._)("div",k,[(0,o._)("div",D,[t.userLevel>1?((0,o.wg)(),(0,o.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[1]||(e[1]=(...t)=>I.addNewUser&&I.addNewUser(...t))},"Add User to "+(0,a.toDisplayString)(s.destination),1)):(0,o.kq)("v-if",!0)])]),(0,o.kq)(" MODALS "),(0,o.kq)(" ADD GROUPS WIZARD "),(0,o.Wm)(Z,{destination:s.destination,"location-id":s.locationId,onUpdate_group_list:e[2]||(e[2]=t=>I.updateGroupList(t))},null,8,["destination","location-id"]),(0,o.kq)(" ADD USER WIZARD "),(0,o.Wm)(M,{destination:s.destination,"location-id":s.locationId,"refresh-user-list":r.refreshUserListBoolean,onUpdate_user_list:e[3]||(e[3]=t=>I.updateUserList(t)),onReset_refresh_user_list:e[4]||(e[4]=t=>I.resetRefreshUserList(t))},null,8,["destination","location-id","refresh-user-list"])])}]])},props:{locationId:{type:Number,default:0}}},$t=(0,st.Z)(Gt,[["render",function(t,e,s,a,n,l){const d=(0,o.up)("groups-and-users-module");return(0,o.wg)(),(0,o.iD)("div",i,[(0,o._)("div",r,[(0,o.kq)(" Group Permissions "),(0,o.Wm)(d,{"location-id":s.locationId,destination:"kanban_board"},null,8,["location-id"])])])}]])},3058:(t,e,s)=>{s.d(e,{Z:()=>i});var o=s(9909);const i={methods:{showErrorModal:function(t,e,s){new o.u_(document.getElementById("loadingModal")).hide(),document.getElementById("errorModalContent").innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new requirement<hr>${t}`,new o.u_(document.getElementById("errorModal")).show()},showValidationErrorModal:function(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new o.u_(document.getElementById("errorModal")).show()}}}},5808:(t,e,s)=>{s.d(e,{Z:()=>Z});var o=s(459),i=s(5555),r=s(9980),a=s(6443),n=s(1327),l=s(3408),d=s(647),u=s(1278),c=s(9672),p=s(5984),h=s(763),m=s(5004),g=s(1321),_=s(5189),b=s(947),f=s(780),U=s(295),v=s(8093),y=s(3843),w=s(2393),L=s(114),k=s(9714),D=s(1323),I=s(2610),S=s(4187);const Z={data:()=>({icons:{arrowUp:o.Z,bugIcon:i.Z,bxBriefcase:r.Z,cardChecklist:a.Z,clipboardIcon:n.Z,documentPdf:l.Z,documentText:d.Z,folderIcon:u.Z,groupPresentation:c.Z,imageIcon:p.Z,infoCircle:h.Z,linkIcon:m.Z,linkIcon2:g.Z,linkOut:_.Z,mailIcon:b.Z,microsoftExcel:f.Z,microsoftPowerpoint:U.Z,microsoftWord:v.Z,noteAdd:y.Z,objectStorage:w.Z,passwordIcon:L.Z,trashCan:k.Z,userIcon:D.Z,usersIcon:I.Z,xCircle:S.Z}})}}}]);