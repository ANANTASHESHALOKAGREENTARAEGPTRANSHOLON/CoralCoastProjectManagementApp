"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[990],{7267:(t,e,o)=>{o.d(e,{Z:()=>f});var i,n=o(6252),s=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],l=function(t){return-1!==s.map((function(t){return t.toLowerCase()})).indexOf(t.toLowerCase())},a=0,d=function(t){var e=Date.now();return t+"_"+Math.floor(1e9*Math.random())+ ++a+String(e)},r=function(t){return void 0===t||""===t?[]:Array.isArray(t)?t:t.split(" ")},c=function(){return{listeners:[],scriptId:d("tiny-script"),scriptLoaded:!1}},u=(i=c(),{load:function(t,e,o){i.scriptLoaded?o():(i.listeners.push(o),t.getElementById(i.scriptId)||function(t,e,o,n){var s=e.createElement("script");s.referrerPolicy="origin",s.type="application/javascript",s.id=t,s.src=o;var l=function(){s.removeEventListener("load",l),i.listeners.forEach((function(t){return t()})),i.scriptLoaded=!0};s.addEventListener("load",l),e.head&&e.head.appendChild(s)}(i.scriptId,t,e))},reinitialize:function(){i=c()}}),m=function(){var t="undefined"!=typeof window?window:o.g;return t&&t.tinymce?t.tinymce:null},p={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(t){return"html"===t||"text"===t}}},h=o(2262),g=function(){return g=Object.assign||function(t){for(var e,o=1,i=arguments.length;o<i;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},g.apply(this,arguments)};const f=(0,n.aZ)({props:p,setup:function(t,e){var o=(0,h.BK)(t),i=o.disabled,s=o.modelValue,a=(0,h.iH)(null),c=null,p=t.id||d("tiny-vue"),f=t.init&&t.init.inline||t.inline,_=!!e.attrs["onUpdate:modelValue"],b=!0,y=t.initialValue?t.initialValue:"",v="",k=function(){var o,i,d,u=(o=b,_?function(){return(null==s?void 0:s.value)?s.value:""}:function(){return o?y:v}),h=g(g({},t.init),{readonly:t.disabled,selector:"#"+p,plugins:(i=t.init&&t.init.plugins,d=t.plugins,r(i).concat(r(d))),toolbar:t.toolbar||t.init&&t.init.toolbar,inline:f,setup:function(o){c=o,o.on("init",(function(i){return function(t,e,o,i,s,a){i.setContent(a()),o.attrs["onUpdate:modelValue"]&&function(t,e,o,i){var s=t.modelEvents?t.modelEvents:null,l=Array.isArray(s)?s.join(" "):s;(0,n.YP)(i,(function(e,i){o&&"string"==typeof e&&e!==i&&e!==o.getContent({format:t.outputFormat})&&o.setContent(e)})),o.on(l||"change input undo redo",(function(){e.emit("update:modelValue",o.getContent({format:t.outputFormat}))}))}(e,o,i,s),function(t,e,o){Object.keys(e).filter(l).forEach((function(i){var n=e[i];"function"==typeof n&&("onInit"===i?n(t,o):o.on(i.substring(2),(function(t){return n(t,o)})))}))}(t,o.attrs,i)}(i,t,e,o,s,u)})),t.init&&"function"==typeof t.init.setup&&t.init.setup(o)}});(function(t){return null!==t&&"textarea"===t.tagName.toLowerCase()})(a.value)&&(a.value.style.visibility=""),m().init(h),b=!1};return(0,n.YP)(i,(function(t){null!==c&&c.setMode(t?"readonly":"design")})),(0,n.bv)((function(){if(null!==m())k();else if(a.value&&a.value.ownerDocument){var e=t.cloudChannel?t.cloudChannel:"5",o=t.apiKey?t.apiKey:"no-api-key",i=null==t.tinymceScriptSrc?"https://cdn.tiny.cloud/1/"+o+"/tinymce/"+e+"/tinymce.min.js":t.tinymceScriptSrc;u.load(a.value.ownerDocument,i,k)}})),(0,n.Jd)((function(){null!==m()&&m().remove(c)})),f||((0,n.dl)((function(){b||k()})),(0,n.se)((function(){var t;_||(v=c.getContent()),null===(t=m())||void 0===t||t.remove(c)}))),function(){return f?(e=n.h,o=p,i=a,e(t.tagName||"div",{id:o,ref:i})):function(t,e,o){return t("textarea",{id:e,visibility:"hidden",ref:o})}(n.h,p,a);var e,o,i}}})},7807:(t,e,o)=>{o.d(e,{Z:()=>h});var i=o(6252),n=o(3577);const s={key:0,class:"module-spacer"},l={class:"alert alert-dark"},a={key:1},d={class:"table"},r=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("td",null,"Note")])],-1),c=["innerHTML"],u=(0,i._)("div",{class:"spacer"},null,-1),m={class:"small-text"},p={name:"ListNotes",props:{destination:{type:String,default:""},noteHistoryResults:{type:Array,default:function(){return[]}}}},h=(0,o(3744).Z)(p,[["render",function(t,e,o,p,h,g){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.kq)(" NOTE HISTORY "),0==o.noteHistoryResults.length?((0,i.wg)(),(0,i.iD)("div",s,[(0,i._)("div",l," Sorry - but there are no notes for this "+(0,n.toDisplayString)(o.destination)+". ",1)])):((0,i.wg)(),(0,i.iD)("div",a,[(0,i._)("table",d,[r,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.noteHistoryResults,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.pk},[(0,i._)("td",null,[(0,i._)("div",{innerHTML:t.fields.object_note.substr(0,400)},null,8,c),u,(0,i._)("p",m,(0,n.toDisplayString)(t.fields.date_created),1)])])))),128))])])]))])}]])},9718:(t,e,o)=>{o.r(e),o.d(e,{default:()=>Ti});var i=o(6252);const n={class:"card"},s={class:"card-body"},l=(0,i._)("ul",{class:"nav nav-tabs",id:"misc_module_tabs",role:"tablist"},[(0,i.kq)(" Organisation Contacts "),(0,i._)("li",{class:"nav-item",role:"presentation"},[(0,i._)("button",{class:"nav-link",id:"organisation-contacts-tab","data-bs-toggle":"tab","data-bs-target":"#organisation-contacts",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Organisation Contacts ")]),(0,i.kq)(" Document Uploads "),(0,i._)("li",{class:"nav-item",role:"presentation"},[(0,i._)("button",{class:"nav-link",id:"document-uploads-tab","data-bs-toggle":"tab","data-bs-target":"#document-uploads",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Document Uploads ")]),(0,i.kq)(" Associated Projects & Tasks "),(0,i._)("li",{class:"nav-item",role:"presentation"},[(0,i._)("button",{class:"nav-link",id:"associated-objects-tab","data-bs-toggle":"tab","data-bs-target":"#associated-objects",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Associated Objects ")]),(0,i.kq)(" Misc Modules "),(0,i._)("li",{class:"nav-item",role:"presentation"},[(0,i._)("button",{class:"nav-link",id:"misc-modules-tab","data-bs-toggle":"tab","data-bs-target":"#misc-modules",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"},"Misc ")]),(0,i.kq)(" Notes Modules "),(0,i._)("li",{class:"nav-item",role:"presentation"},[(0,i._)("button",{class:"nav-link",id:"notes-modules-tab","data-bs-toggle":"tab","data-bs-target":"#notes-modules",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"},"Notes ")])],-1),a=(0,i._)("hr",null,null,-1),d={class:"tab-content",id:"misc_module_content"},r={class:"tab-pane fade",id:"organisation-contacts",role:"tabpanel","aria-labelledby":"profile-tab"},c=(0,i.Uk)(" Contacts"),u=(0,i._)("p",{class:"text-instructions"}," Below are a list of contacts who are connected to this organisation. ",-1),m=(0,i._)("hr",null,null,-1),p={class:"row submit-row"},h={class:"col-md-12"},g={class:"tab-pane fade",id:"document-uploads",role:"tabpanel","aria-labelledby":"profile-tab"},f={class:"tab-pane fade",id:"associated-objects",role:"tabpanel","aria-labelledby":"profile-tab"},_={class:"tab-pane fade",id:"misc-modules",role:"tabpanel","aria-labelledby":"profile-tab"},b={class:"tab-pane fade",id:"notes-modules",role:"tabpanel","aria-labelledby":"profile-tab"};var y=o(9909),v=o(6542),k=o(3577);const D={class:"customer-modules"},w={class:"card-body"},M={class:"single-customer-card"},U=["src"],L={class:"customer-card-name"},I=["href"],N={class:"customer-card-email"};var C=o(5808),F=o(4250);const S={name:"CustomersListModule",components:{Icon:v.JO},props:{customerResults:{type:Array,default:()=>[]}},computed:{...(0,F.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"}),defaultCustomerImage:function(){return`${this.staticUrl}/NearBeach/images/placeholder/people_tax.svg`}},mixins:[C.Z],data:()=>({}),methods:{getCustomerImage:function(t){return""===t.fields.customer_profile_picture?this.defaultCustomerImage:t.fields.customer_profile_picture}}};var x=o(3744);const T=(0,x.Z)(S,[["render",function(t,e,o,n,s,l){const a=(0,i.up)("Icon");return(0,i.wg)(),(0,i.iD)("div",D,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.customerResults,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.pk,class:"card card-customer"},[(0,i._)("div",w,[(0,i._)("div",M,[(0,i._)("img",{src:l.getCustomerImage(e),alt:"default profile picture"},null,8,U),(0,i._)("div",L,[(0,i._)("a",{href:`${t.rootUrl}customer_information/${e.pk}/`},(0,k.toDisplayString)(e.fields.customer_first_name)+" "+(0,k.toDisplayString)(e.fields.customer_last_name),9,I)]),(0,i._)("div",N,[(0,i.Wm)(a,{icon:t.icons.mailIcon},null,8,["icon"]),(0,i.Uk)(" "+(0,k.toDisplayString)(e.fields.customer_email),1)])])])])))),128))])}]]),E={class:"modal fade",id:"addCustomerModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},R={class:"modal-dialog modal-xl"},$={class:"modal-content"},q={class:"modal-header"},A=(0,i.Uk)(" Add Customer Wizard"),O=(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addCustomerCloseButton"},[(0,i._)("span",{"aria-hidden":"true"})],-1),Z={class:"modal-body"},B={class:"modal-footer"},j=(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1);var P=o(9669),W=o.n(P),H=o(9963);const z={class:"row"},V=(0,i._)("div",{class:"col-md-4"},[(0,i._)("strong",null,"New Customer"),(0,i._)("p",{class:"text-instructions"}," Please fill out the following details. "),(0,i._)("strong",null,"Please Note:"),(0,i._)("p",{class:"text-instructions"}," Customers do not go through a duplication process. Please search for the potential customer first before adding them into NearBeach. ")],-1),Y={class:"col-md-8"},K={class:"row"},J={class:"form-group col-sm-3"},G=(0,i.Uk)(" Title: "),X={key:0,class:"error"},Q={class:"form-group col-sm-4"},tt=(0,i.Uk)(" First Name: "),et={key:0,class:"error"},ot={class:"form-group col-sm-5"},it=(0,i.Uk)(" Last Name: "),nt={key:0,class:"error"},st=(0,i._)("br",null,null,-1),lt={class:"form-group col-sm-8"},at=(0,i.Uk)(" Email: "),dt={key:0,class:"error"},rt={key:1,class:"error"},ct=(0,i._)("br",null,null,-1);var ut=o(6761),mt=o(6650),pt=o(2587);o(9669);const ht={name:"NewCustomerForm",setup:()=>({v$:(0,mt.ZP)()}),components:{NSelect:ut.Z},props:["flagValidationCheck","organisationName","titleList"],data:()=>({customerEmailModel:"",customerFirstNameModel:"",customerLastNameModel:"",organisationModel:{},searchTimeout:"",titleFixList:[],titleModel:[]}),validations:{customerEmailModel:{required:pt.C1,email:pt.Do},customerFirstNameModel:{required:pt.C1},customerLastNameModel:{required:pt.C1},organisationModel:{required:pt.C1},titleModel:{required:pt.C1}},methods:{},watch:{customerEmailModel:function(){this.$emit("update_customer_data",{field:"customerEmailModel",value:this.customerEmailModel})},customerFirstNameModel:function(){this.$emit("update_customer_data",{field:"customerFirstNameModel",value:this.customerFirstNameModel})},customerLastNameModel:function(){this.$emit("update_customer_data",{field:"customerLastNameModel",value:this.customerLastNameModel})},flagValidationCheck:function(){this.flagValidationCheck&&this.v$.$touch()},titleModel:function(){this.$emit("update_customer_data",{field:"titleModel",value:this.titleModel})}},mounted(){this.titleFixList=this.titleList.map((t=>({value:t.pk,label:t.fields.title})))}},gt=(0,x.Z)(ht,[["render",function(t,e,o,n,s,l){const a=(0,i.up)("n-select");return(0,i.wg)(),(0,i.iD)("div",z,[V,(0,i._)("div",Y,[(0,i.kq)(" CUSTOMER DETAILS "),(0,i._)("div",K,[(0,i._)("div",J,[(0,i._)("label",null,[G,!n.v$.titleModel.required&&n.v$.titleModel.$dirty?((0,i.wg)(),(0,i.iD)("span",X," Please supply ")):(0,i.kq)("v-if",!0)]),(0,i.Wm)(a,{options:s.titleFixList,label:"title",placeholder:"",value:s.titleModel,"onUpdate:value":e[0]||(e[0]=t=>s.titleModel=t)},null,8,["options","value"])]),(0,i._)("div",Q,[(0,i._)("label",null,[tt,!n.v$.customerFirstNameModel.required&&n.v$.customerFirstNameModel.$dirty?((0,i.wg)(),(0,i.iD)("span",et," Please supply ")):(0,i.kq)("v-if",!0)]),(0,i.wy)((0,i._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=t=>s.customerFirstNameModel=t)},null,512),[[H.vModelText,s.customerFirstNameModel]])]),(0,i._)("div",ot,[(0,i._)("label",null,[it,!n.v$.customerLastNameModel.required&&n.v$.customerLastNameModel.$dirty?((0,i.wg)(),(0,i.iD)("span",nt," Please supply ")):(0,i.kq)("v-if",!0)]),(0,i.wy)((0,i._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=t=>s.customerLastNameModel=t)},null,512),[[H.vModelText,s.customerLastNameModel]])])]),st,(0,i.kq)(" Customer Email "),(0,i._)("div",lt,[(0,i._)("label",null,[at,!n.v$.customerEmailModel.required&&n.v$.customerEmailModel.$dirty?((0,i.wg)(),(0,i.iD)("span",dt," Please supply ")):(0,i.kq)("v-if",!0),!n.v$.customerEmailModel.email&&n.v$.customerEmailModel.$dirty?((0,i.wg)(),(0,i.iD)("span",rt," Please format as Email ")):(0,i.kq)("v-if",!0)]),(0,i.wy)((0,i._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=t=>s.customerEmailModel=t)},null,512),[[H.vModelText,s.customerEmailModel]])]),ct])])}]]),ft={name:"NewCustomerModal",setup:()=>({v$:(0,mt.ZP)()}),components:{Icon:v.JO,NewCustomerForm:gt},props:{organisationId:{type:Number,default:0},titleList:{type:Array,default:()=>[]}},mixins:[C.Z],data:()=>({customerEmailModel:"",customerFirstNameModel:"",customerLastNameModel:"",flagValidationCheck:!1,organisationModel:{},titleModel:[]}),validations:{customerEmailModel:{required:pt.C1,email:pt.Do},customerFirstNameModel:{required:pt.C1},customerLastNameModel:{required:pt.C1},titleModel:{required:pt.C1}},computed:{...(0,F.Se)({rootUrl:"getRootUrl"})},methods:{submitNewCustomer:async function(){if(this.flagValidationCheck=!0,setTimeout((()=>{this.flagValidationCheck=!1}),100),await this.v$.$validate())return document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",void new y.u_(document.getElementById("errorModal")).show();const t=new FormData;t.set("customer_title",this.titleModel),t.set("customer_first_name",this.customerFirstNameModel),t.set("customer_last_name",this.customerLastNameModel),t.set("customer_email",this.customerEmailModel),t.set("organisation",this.organisationId),W().post(`${this.rootUrl}new_customer/save/`,t).then((t=>{window.location.href=t.data})).catch((t=>{}))},updateCustomerData:function(t){this[t.field]=t.value}}},_t=(0,x.Z)(ft,[["render",function(t,e,o,n,s,l){const a=(0,i.up)("Icon"),d=(0,i.up)("new-customer-form");return(0,i.wg)(),(0,i.iD)("div",E,[(0,i._)("div",R,[(0,i._)("div",$,[(0,i._)("div",q,[(0,i._)("h2",null,[(0,i.Wm)(a,{icon:t.icons.userIcon},null,8,["icon"]),A]),O]),(0,i._)("div",Z,[(0,i.Wm)(d,{"title-list":o.titleList,"flag-validation-check":s.flagValidationCheck,onUpdate_customer_data:e[0]||(e[0]=t=>l.updateCustomerData(t))},null,8,["title-list","flag-validation-check"])]),(0,i._)("div",B,[(0,i._)("a",{href:"javascript:void(0)",class:"btn btn-primary",onClick:e[1]||(e[1]=(...t)=>l.submitNewCustomer&&l.submitNewCustomer(...t))},"Add Contact"),j])])])])}]]),bt=(0,i.Uk)(" Note History"),yt={class:"text-instructions"},vt=(0,i._)("hr",null,null,-1),kt={class:"row submit-row"},Dt={class:"col-md-12"};var wt=o(3058),Mt=o(7807);const Ut={class:"modal fade",id:"newNoteModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Lt={class:"modal-dialog modal-lg",role:"document"},It={class:"modal-content"},Nt={class:"modal-header"},Ct=(0,i.Uk)(" New Note"),Ft=(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"newNoteCloseButton"},[(0,i._)("span",{"aria-hidden":"true"})],-1),St={class:"modal-body"},xt=(0,i._)("p",{class:"text-instructions"}," Use the text editor to type out your note. Click on the submit button to submit the note. ",-1),Tt={class:"modal-footer"},Et=["disabled"],Rt=(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),$t={name:"NewHistoryNoteWizard",components:{editor:o(7267).Z,Icon:v.JO},props:["locationId","destination"],mixins:[wt.Z,C.Z],data:()=>({newNoteModel:""}),computed:{...(0,F.Se)({rootUrl:"getRootUrl"})},methods:{submitNote:function(){const t=new FormData;t.set("destination",this.destination),t.set("location_id",this.locationId),t.set("note",this.newNoteModel),W().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_notes/`,t).then((t=>{this.$emit("update_note_history_results",t.data),document.getElementById("newNoteCloseButton").click()})).catch((t=>{this.showErrorModal(t,this.destination)}))}}},qt=(0,x.Z)($t,[["render",function(t,e,o,n,s,l){const a=(0,i.up)("Icon"),d=(0,i.up)("editor");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.kq)(" NEW HISTORY NOTE "),(0,i._)("div",Ut,[(0,i._)("div",Lt,[(0,i._)("div",It,[(0,i._)("div",Nt,[(0,i._)("h2",null,[(0,i.Wm)(a,{icon:t.icons.noteAdd},null,8,["icon"]),Ct]),Ft]),(0,i._)("div",St,[xt,(0,i.Wm)(d,{init:{height:300,menubar:!1,plugins:"lists",toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | bullist numlist outdent indent | removeformat"]},content_css:!1,skin:!1,modelValue:s.newNoteModel,"onUpdate:modelValue":e[0]||(e[0]=t=>s.newNoteModel=t)},null,8,["modelValue"])]),(0,i._)("div",Tt,[(0,i._)("button",{type:"button",class:"btn btn-primary",disabled:""==s.newNoteModel,onClick:e[1]||(e[1]=(...t)=>l.submitNote&&l.submitNote(...t))}," Submit Note ",8,Et),Rt])])])])],2112)}]]),At={name:"NotesModule",components:{Icon:v.JO,ListNotes:Mt.Z,NewHistoryNoteWizard:qt},props:["destination","locationId"],mixins:[wt.Z,C.Z],data:()=>({noteHistoryResults:[]}),computed:{...(0,F.Se)({userLevel:"getUserLevel",rootUrl:"getRootUrl"})},methods:{createNewNote:function(){new y.u_(document.getElementById("newNoteModal")).show()},getNoteHistoryResults:function(){W().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/note_list/`).then((t=>{this.noteHistoryResults=t.data})).catch((t=>{this.showErrorModal(t,this.destination)}))},updateNoteHistoryResults:function(t){this.noteHistoryResults.push(t[0])}},mounted(){setTimeout((()=>{this.getNoteHistoryResults()}),200)}},Ot=(0,x.Z)(At,[["render",function(t,e,o,n,s,l){const a=(0,i.up)("Icon"),d=(0,i.up)("list-notes"),r=(0,i.up)("new-history-note-wizard");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("h2",null,[(0,i.Wm)(a,{icon:t.icons.noteAdd},null,8,["icon"]),bt]),(0,i._)("p",yt," The following are saved notes against this "+(0,k.toDisplayString)(o.destination)+". Add notes by clicking on the button below. ",1),(0,i.Wm)(d,{"note-history-results":s.noteHistoryResults,destination:o.destination},null,8,["note-history-results","destination"]),(0,i.kq)(" ADD NOTE HISTORY "),(0,i.kq)(" TO DO - limit it to certain users "),vt,(0,i._)("div",kt,[(0,i._)("div",Dt,[t.userLevel>1?((0,i.wg)(),(0,i.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[0]||(e[0]=(...t)=>l.createNewNote&&l.createNewNote(...t))},"Add Note to "+(0,k.toDisplayString)(o.destination),1)):(0,i.kq)("v-if",!0)])]),(0,i.kq)(" Modals for Notes section "),(0,i.Wm)(r,{"location-id":o.locationId,destination:o.destination,onUpdate_note_history_results:e[1]||(e[1]=t=>l.updateNoteHistoryResults(t))},null,8,["location-id","destination"])])}]]),Zt=(0,i._)("h2",null,"Assigned Tags",-1),Bt={class:"text-instructions"},jt={class:"tag-list"},Pt=["onClick"],Wt=(0,i._)("hr",null,null,-1),Ht={class:"row submit-row"},zt={class:"col-md-12"},Vt={class:"modal fade",id:"addTagModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Yt={class:"modal-dialog"},Kt={class:"modal-content"},Jt={class:"modal-header"},Gt=(0,i.Uk)(" Add Tags Wizard"),Xt=(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addTagsCloseButton"},[(0,i._)("span",{"aria-hidden":"true"})],-1),Qt={class:"modal-body"},te={class:"row"},ee={class:"col-md-4"},oe=(0,i._)("strong",null,"Add Tag",-1),ie={class:"text-instructions"},ne={class:"col-md-8"},se=(0,i._)("label",null,"All Tag List",-1),le={class:"modal-footer"},ae=(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),de={name:"AddTagWizard",components:{Icon:v.JO,NSelect:ut.Z},props:{assignedTags:{type:Array,default:()=>[]},destination:String,locationId:Number},mixins:[wt.Z,C.Z],data:()=>({allTagList:[],tagModel:[]}),computed:{...(0,F.Se)({rootUrl:"getRootUrl"}),tagList:function(){return this.allTagList.filter((t=>this.assignedTags.findIndex((e=>e.pk==t.value))<0))}},methods:{addTag:function(){const t=new FormData;this.tagModel.forEach((e=>{t.append("tag_id",e)})),W().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_tags/`,t).then((t=>{this.$emit("add_tags",t.data),document.getElementById("addTagsCloseButton").click(),this.tagModel=[]}))},getTagList:function(){W().post(`${this.rootUrl}object_data/tag_list_all/`).then((t=>{this.allTagList=t.data.map((t=>({value:t.pk,label:t.fields.tag_name})))})).catch((t=>{}))}},mounted(){setTimeout((()=>{this.getTagList()}),200)}},re=(0,x.Z)(de,[["render",function(t,e,o,n,s,l){const a=(0,i.up)("Icon"),d=(0,i.up)("n-select");return(0,i.wg)(),(0,i.iD)("div",Vt,[(0,i._)("div",Yt,[(0,i._)("div",Kt,[(0,i._)("div",Jt,[(0,i._)("h2",null,[(0,i.Wm)(a,{icon:t.icons.usersIcon},null,8,["icon"]),Gt]),Xt]),(0,i._)("div",Qt,[(0,i._)("div",te,[(0,i._)("div",ee,[oe,(0,i._)("p",ie," Use the dropdown to select one or many lables to add to the "+(0,k.toDisplayString)(o.destination)+". ",1)]),(0,i._)("div",ne,[se,(0,i.Wm)(d,{label:"tag",multiple:"",options:l.tagList,value:s.tagModel,"onUpdate:value":e[0]||(e[0]=t=>s.tagModel=t)},null,8,["options","value"])])])]),(0,i._)("div",le,[ae,(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=(...t)=>l.addTag&&l.addTag(...t))},"Add Tag")])])])])}]]),ce=o(9669),ue={name:"ListTagsModule",components:{AddTagWizard:re,Icon:v.JO},props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},data:()=>({tagList:[]}),mixins:[C.Z],computed:{...(0,F.Se)({rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{addTags:function(t){this.tagList=t},createNewTag:function(){new y.u_(document.getElementById("addTagModal")).show()},getAssignedTags:function(){ce.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/tag_list/`).then((t=>{this.tagList=t.data})).catch((t=>{}))},removeTag:function(t){const e=new FormData;e.set("tag",t),e.set("object_enum",this.destination),e.set("object_id",this.locationId),ce.post(`${this.rootUrl}object_data/delete_tag/`,e).then((e=>{this.tagList=this.tagList.filter((e=>e.pk!==t))})).catch((t=>{}))}},mounted(){setTimeout((()=>{this.getAssignedTags()}),200)}},me={name:"MiscModule",components:{ListTagsModule:(0,x.Z)(ue,[["render",function(t,e,o,n,s,l){const a=(0,i.up)("Icon"),d=(0,i.up)("add-tag-wizard");return(0,i.wg)(),(0,i.iD)("div",null,[Zt,(0,i._)("p",Bt," Here are all tags associated with this "+(0,k.toDisplayString)(o.destination)+'. You can add more tags by clicking on the "Add Tag" button. ',1),(0,i._)("div",jt,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.tagList,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.pk,class:"single-tag",style:(0,k.normalizeStyle)(`background-color: ${e.fields.tag_colour};`)},[(0,i.Uk)((0,k.toDisplayString)(e.fields.tag_name)+" ",1),t.userLevel>1?((0,i.wg)(),(0,i.iD)("span",{key:0,onClick:t=>l.removeTag(e.pk)},[(0,i.Wm)(a,{icon:t.icons.xCircle},null,8,["icon"])],8,Pt)):(0,i.kq)("v-if",!0)],4)))),128))]),(0,i.kq)(" ADD TAG BUTTON "),Wt,(0,i._)("div",Ht,[(0,i._)("div",zt,[t.userLevel>1?((0,i.wg)(),(0,i.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[0]||(e[0]=(...t)=>l.createNewTag&&l.createNewTag(...t))},"Add Tag to "+(0,k.toDisplayString)(o.destination),1)):(0,i.kq)("v-if",!0)])]),(0,i.kq)(" ADD TAG MODULE "),(0,i.Wm)(d,{destination:o.destination,"location-id":o.locationId,"assigned-tags":s.tagList,onAdd_tags:e[1]||(e[1]=t=>l.addTags(t))},null,8,["destination","location-id","assigned-tags"])])}]])},props:["destination","locationId"],mixins:[wt.Z,C.Z],computed:{...(0,F.Se)({rootUrl:"getRootUrl",userLevel:"getUserLevel"})},data:()=>({noteHistoryResults:[]}),methods:{createNewNote:function(){new y.u_(document.getElementById("newNoteModal")).show()},getNoteHistoryResults:function(){W().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/note_list/`).then((t=>{this.noteHistoryResults=t.data})).catch((t=>{this.showErrorModal(t,this.destination)}))},updateNoteHistoryResults:function(t){this.noteHistoryResults.push(t[0])}},mounted(){setTimeout((()=>{this.getNoteHistoryResults()}),200)}},pe=(0,x.Z)(me,[["render",function(t,e,o,n,s,l){const a=(0,i.up)("list-tags-module");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(a,{destination:o.destination,"location-id":o.locationId},null,8,["destination","location-id"])])}]]),he=(0,i.Uk)(" Associated Objects"),ge={key:0},fe={key:1,class:"row"},_e=(0,i._)("div",{class:"col-md-4"},[(0,i._)("strong",null,"Project"),(0,i._)("p",{class:"text-instructions"}," The following are current OPEN projects associated with the organisation. ")],-1),be={class:"col-md-8"},ye={class:"table"},ve=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("td",null,"Project Information"),(0,i._)("td",null,"Status")])],-1),ke=["href"],De=(0,i._)("div",{class:"spacer"},null,-1),we={class:"small-text"},Me={key:2},Ue={key:3,class:"row"},Le=(0,i._)("div",{class:"col-md-4"},[(0,i._)("strong",null,"Requirement"),(0,i._)("p",{class:"text-instructions"}," The following are current OPEN requirements associated with the organisation. ")],-1),Ie={class:"col-md-8"},Ne={class:"table"},Ce=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("td",null,"Requirement Information")])],-1),Fe=["href"],Se=(0,i._)("div",{class:"spacer"},null,-1),xe={class:"small-text"},Te={key:4},Ee={key:5,class:"row"},Re=(0,i._)("div",{class:"col-md-4"},[(0,i._)("strong",null,"Task"),(0,i._)("p",{class:"text-instructions"}," The following are current OPEN tasks associated with the organisation. ")],-1),$e={class:"col-md-8"},qe={class:"table"},Ae=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("td",null,"Task Information"),(0,i._)("td",null,"Status")])],-1),Oe=["href"],Ze=(0,i._)("div",{class:"spacer"},null,-1),Be={class:"small-text"},je={key:6,class:"spacer"},Pe={key:7,class:"alert alert-info"},We={name:"AssociatedObjects",components:{Icon:v.JO},props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},mixins:[C.Z],data:()=>({opportunityResults:[],projectResults:[],requirementResults:[],taskResults:[]}),computed:{...(0,F.Se)({rootUrl:"getRootUrl"})},methods:{getAssociatedObjectResults:function(){W().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/associated_objects/`).then((t=>{this.opportunityResults=t.data.opportunity,this.projectResults=t.data.project,this.requirementResults=t.data.requirement,this.taskResults=t.data.task})).catch((t=>{}))},getFriendlyDate:function(t){return new Date(t).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}},mounted(){setTimeout((()=>{this.getAssociatedObjectResults()}),200)}},He=(0,x.Z)(We,[["render",function(t,e,o,n,s,l){const a=(0,i.up)("Icon");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("h2",null,[(0,i.Wm)(a,{icon:t.icons.objectStorage},null,8,["icon"]),he]),s.projectResults.length+s.taskResults.length>0?((0,i.wg)(),(0,i.iD)("hr",ge)):(0,i.kq)("v-if",!0),(0,i.kq)(" Project Results "),s.projectResults.length>0?((0,i.wg)(),(0,i.iD)("div",fe,[_e,(0,i._)("div",be,[(0,i._)("table",ye,[ve,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.projectResults,(e=>((0,i.wg)(),(0,i.iD)("tr",null,[(0,i._)("td",null,[(0,i._)("a",{href:`${t.rootUrl}project_information/${e.project_id}/`},[(0,i._)("p",null,(0,k.toDisplayString)(e.project_name),1),De,(0,i._)("p",we," Project "+(0,k.toDisplayString)(e.project_id)+" - End Date: "+(0,k.toDisplayString)(l.getFriendlyDate(e.project_end_date)),1)],8,ke)]),(0,i._)("td",null,(0,k.toDisplayString)(e.project_status),1)])))),256))])])])])):(0,i.kq)("v-if",!0),(0,i.kq)(" THE FOLLOWING HR WILL NEED TO BE FIXED! "),s.projectResults.length>0?((0,i.wg)(),(0,i.iD)("hr",Me)):(0,i.kq)("v-if",!0),(0,i.kq)(" Requirement Results "),s.requirementResults.length>0?((0,i.wg)(),(0,i.iD)("div",Ue,[Le,(0,i._)("div",Ie,[(0,i._)("table",Ne,[Ce,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.requirementResults,(e=>((0,i.wg)(),(0,i.iD)("tr",null,[(0,i._)("td",null,[(0,i._)("a",{href:`${t.rootUrl}requirement_information/${e.requirement_id}/`},[(0,i._)("p",null,(0,k.toDisplayString)(e.requirement_title),1),Se,(0,i._)("p",xe," Requirement "+(0,k.toDisplayString)(e.requirement_id),1)],8,Fe)])])))),256))])])])])):(0,i.kq)("v-if",!0),(0,i.kq)(" THE FOLLOWING HR WILL NEED TO BE FIXED! "),s.projectResults.length>0?((0,i.wg)(),(0,i.iD)("hr",Te)):(0,i.kq)("v-if",!0),(0,i.kq)(" Task Results "),s.taskResults.length>0?((0,i.wg)(),(0,i.iD)("div",Ee,[Re,(0,i._)("div",$e,[(0,i._)("table",qe,[Ae,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.taskResults,(e=>((0,i.wg)(),(0,i.iD)("tr",null,[(0,i._)("td",null,[(0,i._)("a",{href:`${t.rootUrl}task_information/${e.task_id}/`},[(0,i._)("p",null,(0,k.toDisplayString)(e.task_short_description),1),Ze,(0,i._)("p",Be," Task "+(0,k.toDisplayString)(e.task_id)+" - End Date: "+(0,k.toDisplayString)(l.getFriendlyDate(e.task_end_date)),1)],8,Oe)]),(0,i._)("td",null,(0,k.toDisplayString)(e.task_status),1)])))),256))])])])])):(0,i.kq)("v-if",!0),(0,i.kq)(" Only show when there are no associated tasks "),s.projectResults.length+s.taskResults.length===0?((0,i.wg)(),(0,i.iD)("div",je)):(0,i.kq)("v-if",!0),s.projectResults.length+s.taskResults.length===0?((0,i.wg)(),(0,i.iD)("div",Pe,' There are currently no Objects associated with this Organisation. You can create some new objects by click on the "New Objects" menu item. ')):(0,i.kq)("v-if",!0)])}]]),ze=(0,i.Uk)(" Documents"),Ve={class:"text-instructions"},Ye={key:0,class:"module-spacer"},Ke=[(0,i._)("div",{class:"alert alert-dark"},"Sorry - there are no documents or folders uploaded.",-1)],Je={key:1,class:"document-widget"},Ge=(0,i._)("p",{class:"text-instructions"}," Go to Parent Directory... ",-1),Xe=["onClick"],Qe={class:"text-instructions"},to=["href"],eo={class:"text-instructions"},oo=(0,i._)("hr",null,null,-1),io={class:"btn-group save-changes"},no={key:0,class:"btn btn-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},so={class:"dropdown-menu"},lo={class:"modal fade",id:"addFolderModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ao={class:"modal-dialog modal-lg"},ro={class:"modal-content"},co={class:"modal-header"},uo=(0,i.Uk)(" Add Folder Wizard"),mo=(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addFolderCloseButton"},[(0,i._)("span",{"aria-hidden":"true"})],-1),po={class:"modal-body"},ho={class:"row"},go=(0,i._)("div",{class:"col-md-4"},[(0,i._)("strong",null,"Creating a folder"),(0,i._)("p",{class:"text-instructions"},' Give the folder an appropriate name. When done, click on the "Save" button. It will be added to the current folder. ')],-1),fo={class:"col-md-8"},_o={class:"form-group"},bo=(0,i._)("label",{for:"folder_description"},"Folder Name",-1),yo={class:"modal-footer"},vo=(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),ko=["disabled"],Do={name:"AddFolderWizard",components:{Icon:v.JO},props:{currentFolder:{type:String,default:"/"},destination:{type:String,default:"/"},existingFolders:{type:Array,default:()=>[]},locationId:{type:Number,default:0}},mixins:[wt.Z,C.Z],data:()=>({disableAddFolderButton:!0,folderDescriptionModel:""}),computed:{...(0,F.Se)({rootUrl:"getRootUrl"})},methods:{addFolder:function(){const t=new FormData;t.set("folder_description",this.folderDescriptionModel),null!==this.currentFolder&&""!=this.currentFolder&&t.set("parent_folder",this.currentFolder),W().post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/add_folder/`,t).then((t=>{this.$emit("update_folder_list",t.data),this.folderDescriptionModel="",document.getElementById("addFolderCloseButton").click()})).catch((t=>{this.showErrorModal(t,this.destination)}))}},updated(){var t=this.existingFolders.filter((t=>t.fields.folder_description==this.folderDescriptionModel));this.disableAddFolderButton=t.length>0||""==this.folderDescriptionModel}},wo=(0,x.Z)(Do,[["render",function(t,e,o,n,s,l){const a=(0,i.up)("Icon");return(0,i.wg)(),(0,i.iD)("div",lo,[(0,i._)("div",ao,[(0,i._)("div",ro,[(0,i._)("div",co,[(0,i._)("h2",null,[(0,i.Wm)(a,{icon:t.icons.userIcon},null,8,["icon"]),uo]),mo]),(0,i._)("div",po,[(0,i._)("div",ho,[go,(0,i._)("div",fo,[(0,i._)("div",_o,[bo,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>s.folderDescriptionModel=t),class:"form-control",id:"folder_description",maxlength:"50"},null,512),[[H.vModelText,s.folderDescriptionModel]])])])])]),(0,i._)("div",yo,[vo,(0,i._)("button",{type:"button",class:"btn btn-primary",disabled:s.disableAddFolderButton,onClick:e[1]||(e[1]=(...t)=>l.addFolder&&l.addFolder(...t))}," Add Folder ",8,ko)])])])])}]]),Mo={class:"modal fade",id:"addLinkModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Uo={class:"modal-dialog modal-lg"},Lo={class:"modal-content"},Io={class:"modal-header"},No=(0,i.Uk)(" Add Link Wizard"),Co=(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addLinkCloseButton"},[(0,i._)("span",{"aria-hidden":"true"})],-1),Fo={class:"modal-body"},So={class:"row"},xo=(0,i._)("div",{class:"col-md-4"},[(0,i._)("strong",null,"Add Link"),(0,i._)("p",{class:"text-instruction"}," Add hyperlinks to other documents and sources located in on the internet/cloud. ")],-1),To={class:"col-md-8"},Eo={class:"form-group"},Ro={for:"document_url_location"},$o=(0,i.Uk)(" Document URL "),qo={key:0,class:"error"},Ao={key:1,class:"error"},Oo={class:"form-group"},Zo={for:"document_description"},Bo=(0,i.Uk)(" Document Description "),jo={key:0,class:"error"},Po={key:1,class:"error"},Wo={class:"modal-footer"},Ho=(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),zo=["disabled"],Vo={name:"AddLinkWizard",setup:()=>({v$:(0,mt.ZP)()}),components:{Icon:v.JO},props:{currentFolder:{type:String,default:"/"},destination:{type:String,default:"/"},excludeDocuments:{type:Array,default:()=>[]},existingFolders:{type:Array,default:()=>[]},locationId:{type:Number,default:0}},mixins:[wt.Z,C.Z],data:()=>({linkModel:"",disableAddButton:!0,documentDescriptionModel:"",documentUrlLocationModel:"",duplicateDescription:!1}),validations:{documentDescriptionModel:{required:pt.C1},documentUrlLocationModel:{required:pt.C1,url:pt.HQ}},computed:{...(0,F.Se)({rootUrl:"getRootUrl"})},methods:{addLink:function(){const t=new FormData;t.set("document_description",this.documentDescriptionModel),t.set("document_url_location",this.documentUrlLocationModel),null!==this.currentFolder&&""!=this.currentFolder&&t.set("parent_folder",this.currentFolder),W().post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/add_link/`,t).then((t=>{this.$emit("update_document_list",t.data),this.documentDescriptionModel="",this.documentUrlLocationModel="",document.getElementById("addLinkCloseButton").click()})).catch((t=>{this.showErrorModal(t,this.destination)}))}},updated(){var t=this.excludeDocuments.filter((t=>t.document_key__document_description===this.documentDescriptionModel));this.duplicateDescription=t.length>0,this.v$.$touch(),this.disableAddButton=this.v$.$invalid||t.length>0}},Yo=(0,x.Z)(Vo,[["render",function(t,e,o,n,s,l){const a=(0,i.up)("Icon");return(0,i.wg)(),(0,i.iD)("div",Mo,[(0,i._)("div",Uo,[(0,i._)("div",Lo,[(0,i._)("div",Io,[(0,i._)("h2",null,[(0,i.Wm)(a,{icon:t.icons.userIcon},null,8,["icon"]),No]),Co]),(0,i._)("div",Fo,[(0,i._)("div",So,[xo,(0,i._)("div",To,[(0,i._)("div",Eo,[(0,i._)("label",Ro,[$o,!n.v$.documentUrlLocationModel.required&&n.v$.documentUrlLocationModel.$dirty?((0,i.wg)(),(0,i.iD)("span",qo," Please suppy a URL.")):(0,i.kq)("v-if",!0),!n.v$.documentUrlLocationModel.url&&n.v$.documentUrlLocationModel.$dirty?((0,i.wg)(),(0,i.iD)("span",Ao," Please suppy a proper URL.")):(0,i.kq)("v-if",!0)]),(0,i.wy)((0,i._)("input",{id:"document_url_location","onUpdate:modelValue":e[0]||(e[0]=t=>s.documentUrlLocationModel=t),class:"form-control"},null,512),[[H.vModelText,s.documentUrlLocationModel]])]),(0,i._)("div",Oo,[(0,i._)("label",Zo,[Bo,!n.v$.documentDescriptionModel.required&&n.v$.documentDescriptionModel.$dirty?((0,i.wg)(),(0,i.iD)("span",jo," Please suppy a description of the link.")):(0,i.kq)("v-if",!0),s.duplicateDescription?((0,i.wg)(),(0,i.iD)("span",Po," Sorry - but this is a duplicated description.")):(0,i.kq)("v-if",!0)]),(0,i.wy)((0,i._)("input",{id:"document_description","onUpdate:modelValue":e[1]||(e[1]=t=>s.documentDescriptionModel=t),class:"form-control",maxlength:"50"},null,512),[[H.vModelText,s.documentDescriptionModel]])])])])]),(0,i._)("div",Wo,[Ho,(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:e[2]||(e[2]=(...t)=>l.addLink&&l.addLink(...t)),disabled:s.disableAddButton}," Add Link ",8,zo)])])])])}]]),Ko={class:"modal fade",id:"uploadDocumentModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Jo={class:"modal-dialog modal-lg"},Go={class:"modal-content"},Xo={class:"modal-header"},Qo=(0,i.Uk)(" Upload Document Wizard"),ti=(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"uploadDocumentCloseButton"},[(0,i._)("span",{"aria-hidden":"true"})],-1),ei={class:"modal-body"},oi={class:"row"},ii={class:"col-md-4"},ni=(0,i._)("strong",null,"Uploading File",-1),si={class:"text-instructions"},li={key:0},ai={key:1},di={key:2},ri={class:"col-md-8"},ci={key:0,class:"form-file"},ui={class:"mb-3"},mi={for:"document",class:"form-label"},pi=(0,i.Uk)(" Please upload a file"),hi=(0,i._)("br",null,null,-1),gi={key:0,class:"alert alert-warning"},fi=["accept"],_i={key:1,class:"form-group"},bi={class:"form-group"},yi=(0,i._)("label",{for:"documentDescription"},"Document Description",-1),vi=(0,i._)("br",null,null,-1),ki={class:"form-row"},Di={key:2},wi={key:0,class:"alert alert-warning"},Mi=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("span",{class:"sr-only"},"Loading...")],-1),Ui=(0,i._)("div",{class:"alert alert-success"}," The document has been uploaded. The server is currently writing the file to disk. Please be patient - this modal will close automatically. Thank you ",-1),Li={class:"modal-footer"},Ii=(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),Ni=["disabled"],Ci={name:"UploadDocumentWizard",components:{Icon:v.JO},props:{acceptedDocuments:{type:String,default:"image/*,text/*,.pdf,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"},currentFolder:{type:String,default:""},destination:{type:String,default:""},excludeDocuments:{type:Array,default:()=>[]},locationId:{type:Number,default:0}},mixins:[wt.Z,C.Z],data:()=>({disableUploadButton:!0,documentModel:[],documentDescriptionModel:"",uploadPercentage:"",maxUploadSize:0,maxUploadString:"No Upload Limit",maxUploadWarning:!1}),computed:{...(0,F.Se)({staticUrl:"getStaticUrl",rootUrl:"getRootUrl"})},methods:{handleFileUploads:function(t){t[0].size*(0!=this.maxUploadSize)>this.maxUploadSize?this.maxUploadWarning=!0:(this.maxUploadWarning=!1,this.documentModel=t[0],this.documentDescriptionModel=t[0].name)},resetForm:function(){this.documentModel="",this.documentDescriptionModel="",this.uploadPercentage=""},uploadFile:function(){const t=new FormData;t.set("document",this.documentModel,this.documentDescriptionModel),t.set("document_description",this.documentDescriptionModel),""!=this.currentFolder&&null!==this.currentFolder&&t.set("parent_folder",this.currentFolder);const e={onUploadProgress:t=>{this.uploadPercentage=parseFloat(t.loaded)/parseFloat(t.total)}};W().post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/upload/`,t,e).then((t=>{this.$emit("update_document_list",t.data),document.getElementById("uploadDocumentCloseButton").click(),this.resetForm()})).catch((t=>{this.showErrorModal(t,this.destination)}))}},watch:{maxUploadSize:function(){if(0===this.maxUploadSize)return"No Upload Limit";const t=Math.floor(Math.log(this.maxUploadSize)/Math.log(1024));this.maxUploadString=`Max Upload Size: ${parseFloat((this.maxUploadSize/Math.pow(1024,t)).toFixed(2))} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}`}},updated(){var t=this.excludeDocuments.filter((t=>t.document_key__document_description==this.documentDescriptionModel));this.disableUploadButton=""==this.documentModel||0==this.documentDescriptionModel.length||t.length>0},mounted(){setTimeout((()=>{W().post(`${this.rootUrl}documentation/get/max_upload/`).then((t=>{this.maxUploadSize=t.data.max_upload_size})).catch((t=>{this.showErrorModal(t,this.destination)}))}),200)}},Fi=(0,x.Z)(Ci,[["render",function(t,e,o,n,s,l){const a=(0,i.up)("Icon");return(0,i.wg)(),(0,i.iD)("div",Ko,[(0,i._)("div",Jo,[(0,i._)("div",Go,[(0,i._)("div",Xo,[(0,i._)("h2",null,[(0,i.Wm)(a,{icon:t.icons.userIcon},null,8,["icon"]),Qo]),ti]),(0,i._)("div",ei,[(0,i._)("div",oi,[(0,i._)("div",ii,[ni,(0,i._)("p",si," You will be able to upload a file against this "+(0,k.toDisplayString)(o.destination)+". It will appear in the current folder. ",1),0===s.documentModel.length?((0,i.wg)(),(0,i.iD)("p",li,' 1. Please click on "Upload File" button to upload a file ')):""===s.uploadPercentage?((0,i.wg)(),(0,i.iD)("p",ai,' 2. Please modify the document descript to be more human readable. Or click the "Reset" button to remove the uploaded file. ')):((0,i.wg)(),(0,i.iD)("p",di," 3. Document is currently uploading. Please be patient. "))]),(0,i._)("div",ri,[0===s.documentModel.length?((0,i.wg)(),(0,i.iD)("div",ci,[(0,i._)("div",ui,[(0,i._)("label",mi,[pi,hi,(0,i.Uk)(" "+(0,k.toDisplayString)(s.maxUploadString)+" ",1),s.maxUploadWarning?((0,i.wg)(),(0,i.iD)("div",gi," Sorry - file too large ")):(0,i.kq)("v-if",!0)]),(0,i._)("input",{type:"file",class:"form-control",id:"document",accept:o.acceptedDocuments,onChange:e[0]||(e[0]=t=>l.handleFileUploads(t.target.files))},null,40,fi)])])):""==s.uploadPercentage?((0,i.wg)(),(0,i.iD)("div",_i,[(0,i.kq)(" DOCUMENT DESCRIPTION "),(0,i._)("div",bi,[yi,(0,i.wy)((0,i._)("input",{id:"documentDescription","onUpdate:modelValue":e[1]||(e[1]=t=>s.documentDescriptionModel=t),type:"text",class:"form-control"},null,512),[[H.vModelText,s.documentDescriptionModel]])]),(0,i.kq)(" RESET FORM BUTTON "),vi,(0,i._)("div",ki,[(0,i._)("button",{onClick:e[2]||(e[2]=(...t)=>l.resetForm&&l.resetForm(...t)),class:"btn btn-warning"}," Reset Form ")])])):((0,i.wg)(),(0,i.iD)("div",Di,[(0,i.kq)(" THE UPLOAD SPINNER "),parseFloat(s.uploadPercentage).toFixed(0)<1?((0,i.wg)(),(0,i.iD)("div",wi,[(0,i.Uk)(" Uploading "+(0,k.toDisplayString)((100*parseFloat(s.uploadPercentage)).toFixed(2))+"% ",1),Mi])):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.kq)(" THE FINAL WRITING "),Ui],2112))]))])])]),(0,i._)("div",Li,[Ii,(0,i._)("button",{type:"button",class:"btn btn-primary",disabled:s.disableUploadButton,onClick:e[3]||(e[3]=(...t)=>l.uploadFile&&l.uploadFile(...t))}," Upload File ",8,Ni)])])])])}]]),Si={name:"DocumentsModule",components:{AddFolderWizard:wo,AddLinkWizard:Yo,Icon:v.JO,UploadDocumentWizard:Fi},props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},data:()=>({currentFolder:null,documentList:[],documentFilteredList:[],folderList:[],folderFilteredList:[]}),mixins:[C.Z],computed:{...(0,F.Se)({userLevel:"getUserLevel",rootUrl:"getRootUrl"})},methods:{addFolder:function(){new y.u_(document.getElementById("addFolderModal")).show()},addLink:function(){new y.u_(document.getElementById("addLinkModal")).show()},getDocumentList:function(){W().post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/list/files/`).then((t=>{this.documentList=t.data,this.updateDocumentFilteredList()}))},getFolderList:function(){W().post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/list/folders/`).then((t=>{this.folderList=t.data,this.updateFolderFilteredList()}))},getIcon:function(t){if(""!=t.document_key__document_url_location&&null!==t.document_key__document_url_location)return this.icons.linkOut;var e=t.document_key__document.split(".");switch(e[e.length-1]){case"jpg":case"png":case"bmp":return this.icons.imageIcon;case"doc":case"docx":return this.icons.microsoftWord;case"xls":case"xlsx":return this.icons.microsoftExcel;case"ppt":case"pptx":return this.icons.microsoftPowerpoint;case"pdf":return this.icons.documentPdf;default:return this.icons.documentText}},goToParentDirectory:function(){var t=this.folderList.filter((t=>t.pk==this.currentFolder))[0];this.updateCurrentFolder(t.fields.parent_folder)},shortName:function(t){return t.length<=50?t:`${t.substring(0,47)}...`},updateCurrentFolder:function(t){this.currentFolder=t,this.updateDocumentFilteredList(),this.updateFolderFilteredList()},updateDocumentList:function(t){this.documentList.push(t[0]),this.updateDocumentFilteredList()},updateDocumentFilteredList:function(){this.documentFilteredList=this.documentList.filter((t=>t.folder==this.currentFolder))},updateFolderList:function(t){this.folderList.push(t[0]),this.updateFolderFilteredList()},updateFolderFilteredList:function(){this.folderFilteredList=this.folderList.filter((t=>t.fields.parent_folder==this.currentFolder))},uploadDocument:function(){new y.u_(document.getElementById("uploadDocumentModal")).show()}},mounted(){setTimeout((()=>{this.getDocumentList(),this.getFolderList()}),200)}},xi={name:"OrganisationModules",components:{AssociatedObjects:He,CustomersListModule:T,DocumentsModule:(0,x.Z)(Si,[["render",function(t,e,o,n,s,l){const a=(0,i.up)("Icon"),d=(0,i.up)("add-folder-wizard"),r=(0,i.up)("add-link-wizard"),c=(0,i.up)("upload-document-wizard");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("h2",null,[(0,i.Wm)(a,{icon:t.icons.bxBriefcase},null,8,["icon"]),ze]),(0,i._)("p",Ve," The following is a folder structure of all documents uploaded to this "+(0,k.toDisplayString)(o.destination),1),(0,i.kq)(" DOCUMENT FOLDER TREE "),s.documentList.length+s.folderList.length==0?((0,i.wg)(),(0,i.iD)("div",Ye,Ke)):((0,i.wg)(),(0,i.iD)("div",Je,[(0,i.kq)(" GO TO PARENT DIRECTORY "),null!=this.currentFolder?((0,i.wg)(),(0,i.iD)("div",{key:0,onClick:e[0]||(e[0]=t=>l.goToParentDirectory()),class:"document-child"},[(0,i.Wm)(a,{icon:t.icons.arrowUp,width:"80px",height:"80px"},null,8,["icon"]),Ge])):(0,i.kq)("v-if",!0),(0,i.kq)(" RENDER THE FOLDERS "),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.folderFilteredList,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.pk,onClick:t=>l.updateCurrentFolder(e.pk),class:"document-child"},[(0,i.Wm)(a,{icon:t.icons.folderIcon,width:"80px",height:"80px"},null,8,["icon"]),(0,i._)("p",Qe,(0,k.toDisplayString)(l.shortName(e.fields.folder_description)),1)],8,Xe)))),128)),(0,i.kq)(" RENDER THE FILES "),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.documentFilteredList,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.document_key_id,class:"document-child"},[(0,i._)("a",{href:`/private/${t.document_key_id}/`,rel:"noopener noreferrer",target:"_blank"},[(0,i.Wm)(a,{icon:l.getIcon(t),width:"80px",height:"80px"},null,8,["icon"]),(0,i._)("p",eo,(0,k.toDisplayString)(l.shortName(t.document_key__document_description)),1)],8,to)])))),128))])),(0,i.kq)(" ADD DOCUMENTS AND FOLDER BUTTON "),oo,(0,i._)("div",io,[t.userLevel>1?((0,i.wg)(),(0,i.iD)("button",no," New Document/File ")):(0,i.kq)("v-if",!0),(0,i._)("ul",so,[(0,i._)("li",null,[(0,i._)("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:e[1]||(e[1]=(...t)=>l.uploadDocument&&l.uploadDocument(...t))}," Upload Document ")]),(0,i._)("li",null,[(0,i._)("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:e[2]||(e[2]=(...t)=>l.addLink&&l.addLink(...t))}," Add Link ")]),(0,i._)("li",null,[(0,i._)("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:e[3]||(e[3]=(...t)=>l.addFolder&&l.addFolder(...t))}," Add Folder ")])])]),(0,i.kq)(" MODALS "),(0,i.kq)(" ADD FOLDER ID "),(0,i.Wm)(d,{destination:o.destination,"location-id":o.locationId,"current-folder":s.currentFolder,"existing-folders":s.folderFilteredList,onUpdate_folder_list:e[4]||(e[4]=t=>l.updateFolderList(t))},null,8,["destination","location-id","current-folder","existing-folders"]),(0,i.kq)(" ADD LINK WIZARD "),(0,i.Wm)(r,{destination:o.destination,"location-id":o.locationId,"current-folder":s.currentFolder,"exclude-documents":s.documentFilteredList,onUpdate_document_list:e[5]||(e[5]=t=>l.updateDocumentList(t))},null,8,["destination","location-id","current-folder","exclude-documents"]),(0,i.kq)(" UPLOAD DOCUMENT WIZARD "),(0,i.Wm)(c,{destination:o.destination,"location-id":o.locationId,"current-folder":s.currentFolder,"exclude-documents":s.documentFilteredList,onUpdate_document_list:e[6]||(e[6]=t=>l.updateDocumentList(t))},null,8,["destination","location-id","current-folder","exclude-documents"])])}]]),Icon:v.JO,MiscModule:pe,NewCustomerModal:_t,NotesModule:Ot},props:{customerResults:{type:Array,default:()=>[]},destination:{type:String,default:""},locationId:{type:Number,default:0},staticUrl:{type:String,default:"/"},rootUrl:{type:String,default:"/"},titleList:{type:Array,default:()=>[]},userLevel:{type:Number,default:0}},mixins:[C.Z],methods:{addNewContact:function(){new y.u_(document.getElementById("addCustomerModal")).show()}},mounted(){this.$store.commit({type:"updateUrl",staticUrl:this.staticUrl,rootUrl:this.rootUrl}),this.$store.commit({type:"updateUserLevel",userLevel:this.userLevel})}},Ti=(0,x.Z)(xi,[["render",function(t,e,o,y,v,k){const D=(0,i.up)("Icon"),w=(0,i.up)("customers-list-module"),M=(0,i.up)("documents-module"),U=(0,i.up)("associated-objects"),L=(0,i.up)("misc-module"),I=(0,i.up)("notes-module"),N=(0,i.up)("new-customer-modal");return(0,i.wg)(),(0,i.iD)("div",n,[(0,i._)("div",s,[(0,i.kq)(" The MENU Items "),l,a,(0,i.kq)(" The Modules "),(0,i._)("div",d,[(0,i._)("div",r,[(0,i._)("h2",null,[(0,i.Wm)(D,{icon:t.icons.userIcon},null,8,["icon"]),c]),u,(0,i.Wm)(w,{"customer-results":o.customerResults},null,8,["customer-results"]),(0,i.kq)(" ADD CUSTOMER BUTTON "),(0,i.kq)(" ADD IN PERMISSIONS "),m,(0,i._)("div",p,[(0,i._)("div",h,[(0,i._)("button",{class:"btn btn-primary save-changes",onClick:e[0]||(e[0]=(...t)=>k.addNewContact&&k.addNewContact(...t))}," Add Contact ")])])]),(0,i._)("div",g,[(0,i.Wm)(M,{destination:o.destination,"location-id":o.locationId},null,8,["destination","location-id"])]),(0,i._)("div",f,[(0,i.Wm)(U,{destination:o.destination,"location-id":o.locationId},null,8,["destination","location-id"])]),(0,i._)("div",_,[(0,i.Wm)(L,{destination:o.destination,"location-id":o.locationId},null,8,["destination","location-id"])]),(0,i._)("div",b,[(0,i.Wm)(I,{"location-id":o.locationId,destination:o.destination},null,8,["location-id","destination"])])])]),(0,i.kq)(" MODALS "),(0,i.Wm)(N,{"organisation-id":o.locationId,"title-list":o.titleList},null,8,["organisation-id","title-list"])])}]])},3058:(t,e,o)=>{o.d(e,{Z:()=>n});var i=o(9909);const n={methods:{showErrorModal:function(t,e,o){new i.u_(document.getElementById("loadingModal")).hide(),document.getElementById("errorModalContent").innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new requirement<hr>${t}`,new i.u_(document.getElementById("errorModal")).show()},showValidationErrorModal:function(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new i.u_(document.getElementById("errorModal")).show()}}}},5808:(t,e,o)=>{o.d(e,{Z:()=>N});var i=o(459),n=o(5555),s=o(9980),l=o(6443),a=o(1327),d=o(3408),r=o(647),c=o(1278),u=o(9672),m=o(5984),p=o(763),h=o(5004),g=o(1321),f=o(5189),_=o(947),b=o(780),y=o(295),v=o(8093),k=o(3843),D=o(2393),w=o(114),M=o(9714),U=o(1323),L=o(2610),I=o(4187);const N={data:()=>({icons:{arrowUp:i.Z,bugIcon:n.Z,bxBriefcase:s.Z,cardChecklist:l.Z,clipboardIcon:a.Z,documentPdf:d.Z,documentText:r.Z,folderIcon:c.Z,groupPresentation:u.Z,imageIcon:m.Z,infoCircle:p.Z,linkIcon:h.Z,linkIcon2:g.Z,linkOut:f.Z,mailIcon:_.Z,microsoftExcel:b.Z,microsoftPowerpoint:y.Z,microsoftWord:v.Z,noteAdd:k.Z,objectStorage:D.Z,passwordIcon:w.Z,trashCan:M.Z,userIcon:U.Z,usersIcon:L.Z,xCircle:I.Z}})}}}]);