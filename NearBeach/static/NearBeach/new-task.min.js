"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[510],{8005:(e,t,o)=>{o.d(t,{Z:()=>D});var a=o(6252),s=o(3577);const l={class:"row"},r={class:"col-md-4"},i=(0,a._)("strong",null,"Between Dates",-1),n={class:"text-instructions"},d={class:"col-md-4"},u={class:"form-group"},c={key:0,class:"error"},p={class:"col-md-4"},h={class:"form-group"},m={key:0,class:"error"};var g=o(9490),k=o(5309),f=o(6650),M=o(2587);const _={name:"BetweenDates",setup:()=>({v$:(0,f.ZP)()}),components:{NDatePicker:k.Z},props:{destination:{type:String,default:""},endDateModel:{type:[Object,String],default(){var e=g.DateTime.local();return e.plus({days:28})}},isDirty:Boolean,startDateModel:{type:[Object,String],default:()=>g.DateTime.local()}},validations:{localEndDateModel:{required:M.C1},localStartDateModel:{required:M.C1}},data:()=>({localEndDateModel:"",localStartDateModel:""}),methods:{emitDates:function(){this.$emit("update_dates",{start_date:this.localStartDateModel,end_date:this.localEndDateModel})}},watch:{localEndDateModel:function(){var e=g.DateTime.local(this.localEndDateModel),t=g.DateTime.local(this.localStartDateModel);e.toMillis()-t.toMillis()<0&&(this.localEndDateModel=this.localStartDateModel()),this.emitDates()},localStartDateModel:function(){var e=g.DateTime.local(this.localEndDateModel),t=g.DateTime.local(this.localStartDateModel);e.toMillis()-t.toMillis()<0&&(this.localStartDateModel=this.localEndDateModel()),this.emitDates()}},mounted(){this.localEndDateModel=this.endDateModel.toISO(),this.localStartDateModel=this.startDateModel.toISO()}},D=(0,o(3744).Z)(_,[["render",function(e,t,o,g,k,f){const M=(0,a.up)("n-date-picker");return(0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("div",r,[i,(0,a._)("p",n," Choose the start and end date of the "+(0,s.toDisplayString)(o.destination)+". Please note the end date can not be earlier than the start date. They can be equal. ",1)]),(0,a._)("div",d,[(0,a._)("div",u,[(0,a._)("label",null,[(0,a.Uk)((0,s.toDisplayString)(o.destination)+" Start Date: ",1),!g.v$.localStartDateModel.required&&o.isDirty?((0,a.wg)(),(0,a.iD)("span",c," Please select a date.")):(0,a.kq)("v-if",!0)]),(0,a.Wm)(M,{type:"datetime","default-time":"9:00:00",modelValue:k.localStartDateModel,"onUpdate:modelValue":t[0]||(t[0]=e=>k.localStartDateModel=e),class:"form-control"},null,8,["modelValue"])])]),(0,a._)("div",p,[(0,a._)("div",h,[(0,a._)("label",null,[(0,a.Uk)((0,s.toDisplayString)(o.destination)+" End Date: ",1),!g.v$.localEndDateModel.required&&o.isDirty?((0,a.wg)(),(0,a.iD)("span",m," Please select a date.")):(0,a.kq)("v-if",!0)]),(0,a.Wm)(M,{type:"datetime","default-time":"16:00:00",modelValue:k.localEndDateModel,"onUpdate:modelValue":t[1]||(t[1]=e=>k.localEndDateModel=e),class:"form-control"},null,8,["modelValue"])])])])}]])},2843:(e,t,o)=>{o.d(t,{Z:()=>v});var a=o(6252),s=o(3577);const l={class:"row"},r=(0,a._)("div",{class:"col-md-4"},[(0,a._)("h2",null,"Stakeholder")],-1),i={class:"col-md-8 organisation-details"},n=["src"],d={class:"organisation-name"},u=["href"],c={class:"organisation-link"},p=(0,a.Uk)(" Website: "),h=["href"],m={class:"organisation-email"},g=(0,a.Uk)(" Email: "),k=["href"];var f=o(6542),M=o(5808),_=o(4250);const D={name:"StakeholderInformation",components:{Icon:f.JO},props:{defaultStakeholderImage:{type:String,default:""},organisationResults:{type:Array,default:()=>[]}},data(){return{stakeholderModel:this.organisationResults[0].fields}},mixins:[M.Z],computed:{...(0,_.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"}),getStakeholderImage:function(){return""===this.stakeholderModel.organisation_profile_picture?this.defaultStakeholderImage:this.stakeholderModel.organisation_profile_picture}}},v=(0,o(3744).Z)(D,[["render",function(e,t,o,f,M,_){const D=(0,a.up)("Icon");return(0,a.wg)(),(0,a.iD)("div",l,[(0,a.kq)(" Description "),r,(0,a._)("div",i,[(0,a._)("img",{src:_.getStakeholderImage,alt:"Stakeholder Logo",class:"organisation-image"},null,8,n),(0,a._)("div",d,[(0,a._)("a",{href:`${e.rootUrl}organisation_information/${o.organisationResults[0].pk}/`},(0,s.toDisplayString)(M.stakeholderModel.organisation_name),9,u)]),(0,a._)("div",c,[(0,a.Wm)(D,{icon:e.icons.linkOut},null,8,["icon"]),p,(0,a._)("a",{href:M.stakeholderModel.organisation_website,target:"_blank",rel:"noopener noreferrer"},(0,s.toDisplayString)(M.stakeholderModel.organisation_website),9,h)]),(0,a._)("div",m,[(0,a.Wm)(D,{icon:e.icons.mailIcon},null,8,["icon"]),g,(0,a._)("a",{href:`mailto:${M.stakeholderModel.organisation_email}`},(0,s.toDisplayString)(M.stakeholderModel.organisation_email),9,k)])])])}]])},7291:(e,t,o)=>{o.r(t),o.d(t,{default:()=>ue});var a=o(6252),s=o(9963);const l={class:"card"},r={class:"card-body"},i=(0,a._)("h1",null,"New Task",-1),n=(0,a._)("hr",null,null,-1),d={class:"row"},u=(0,a._)("div",{class:"col-md-4"},[(0,a._)("h2",null,"Description"),(0,a._)("p",{class:"text-instructions"}," To create a new task, fill out the form and submit at the bottom of the page. ")],-1),c={class:"col-md-8",style:{"min-height":"610px"}},p={class:"form-group"},h=(0,a.Uk)("Task Short Description: "),m={key:0,class:"error"},g=(0,a._)("br",null,null,-1),k=(0,a.Uk)("Task Long Description: "),f={key:0,class:"error"},M={key:1,class:"error"},_=(0,a._)("br",null,null,-1),D=["src"],v=(0,a._)("hr",null,null,-1),y=(0,a._)("hr",null,null,-1),S=(0,a._)("hr",null,null,-1),w=(0,a._)("hr",null,null,-1),b={class:"row submit-row"},E={class:"col-md-12"};var T=o(6650),Z=o(2587),I=o(7267),U=o(3301),$=o(2843),q=o(8005),O=o(3577);const x={class:"row"},C={class:"col-md-4"},R=(0,a._)("h2",null,"Group Permissions",-1),P={class:"text-instructions"},B=(0,a._)("p",{class:"text-instructions"}," If you do not add one of your own group(s), you will only get readonly access. ",-1),N={class:"col-md-8"},A=(0,a.Uk)("Group List "),V={key:0,class:"error"},L={name:"GroupPermissions",setup:()=>({v$:(0,T.ZP)()}),components:{},props:{destination:{type:String,default:""},groupResults:{type:Array,default:()=>[]},isDirty:{type:Boolean,default:!0},userGroupResults:{type:Array,default:()=>[]}},watch:{groupModel:function(){this.$emit("update_group_model",this.groupModel)}},data:()=>({groupFixResults:[],groupModel:[]}),validations:{groupModel:{required:Z.C1}},mounted(){this.groupResults.forEach((e=>{var t={value:e.pk,group:e.fields.group_name};this.groupFixResults.push(t)})),this.groupModel=this.userGroupResults.map((e=>({group:e.group__group_name,value:e.group_id})))}};var G=o(3744);const W=(0,G.Z)(L,[["render",function(e,t,o,s,l,r){const i=(0,a.up)("v-select");return(0,a.wg)(),(0,a.iD)("div",x,[(0,a._)("div",C,[R,(0,a._)("p",P," Add or remove groups from this "+(0,O.toDisplayString)(o.destination)+". Adding a group will allow users from that group to access this "+(0,O.toDisplayString)(o.destination)+". ",1),B]),(0,a._)("div",N,[(0,a._)("label",null,[A,!s.v$.groupModel.required&&o.isDirty?((0,a.wg)(),(0,a.iD)("span",V," Please select at least one group.")):(0,a.kq)("v-if",!0)]),(0,a.Wm)(i,{options:l.groupFixResults,label:"group",modelValue:l.groupModel,"onUpdate:modelValue":t[0]||(t[0]=e=>l.groupModel=e),multiple:""},null,8,["options","modelValue"])])])}]]),F={class:"row"},j={class:"col-md-4"},H=(0,a._)("h2",null,"Stakeholder Organisation",-1),K=(0,a._)("p",{class:"text-instructions"}," Please search for your stakeholder's organisation in the dropdown box. Once found, please select. ",-1),J={class:"text-instructions"},z=(0,a.Uk)(" If you can not find your organisation, please "),Q={class:"col-md-8"},X={class:"form-group"},Y=(0,a.Uk)("Stakeholder Organisation "),ee={key:0,class:"error"};var te=o(9909),oe=o(4250),ae=o(9113);const se=o(9669),le={name:"GetStakeholders",setup:()=>({v$:(0,T.ZP)()}),components:{axios:se,bootstrap},mixins:[ae.Z],props:{isDirty:{type:Boolean,default:!1}},data:()=>({searchTimeout:"",stakeholderFixList:[],stakeholderModel:""}),validations:{stakeholderModel:{required:Z.C1}},computed:{...(0,oe.Se)({rootUrl:"getRootUrl"})},methods:{createdNewOrganisation:function(e){this.stakeholderModel=e,document.getElementById("newOrganisationModalCloseButton").click()},fetchOptions:function(e,t){this.searchTrigger({return_function:this.getOrganisationData,searchTimeout:this.searchTimeout,search:e,loading:t})},getOrganisationData:function(e,t){const o=new FormData;o.set("search",e),se.post(`${this.rootUrl}search/organisation/data/`,o).then((e=>{this.stakeholderFixList=[],e.data.forEach((e=>{var t={value:e.pk,organisation_name:e.fields.organisation_name,organisation_website:e.fields.organisation_website,organisation_email:e.fields.organisation_email,organisation_profile_picture:e.fields.organisation_profile_picture};this.stakeholderFixList.push(t)}))})).catch((function(e){document.getElementById("errorModalContent").innerHTML=`<strong>Search Organisation Issue:</strong><br/>${e}`,new bootstrap.Modal(document.getElementById("errorModal"),{keyboard:!1}).show(),document.getElementById("loader").style.display="none"}))},openNewOrganisationModal:function(){new te.u_(document.getElementById("newOrganisationModal")).show()}},watch:{stakeholderModel:function(){this.$emit("update_stakeholder_model",this.stakeholderModel)}},mounted(){setTimeout((()=>{this.getOrganisationData("","")}),200)}},re=(0,G.Z)(le,[["render",function(e,t,o,s,l,r){const i=(0,a.up)("v-select"),n=(0,a.up)("new-organisation-modal");return(0,a.wg)(),(0,a.iD)("div",F,[(0,a._)("div",j,[H,K,(0,a._)("p",J,[z,(0,a._)("a",{href:"javascript:void(0)",onClick:t[0]||(t[0]=(...e)=>r.openNewOrganisationModal&&r.openNewOrganisationModal(...e))}," click here to create it. ")])]),(0,a._)("div",Q,[(0,a._)("div",X,[(0,a._)("label",null,[Y,!s.v$.stakeholderModel.required&&o.isDirty?((0,a.wg)(),(0,a.iD)("span",ee," Please search for a Stakeholder.")):(0,a.kq)("v-if",!0)]),(0,a.Wm)(i,{options:l.stakeholderFixList,onSearch:r.fetchOptions,modelValue:l.stakeholderModel,"onUpdate:modelValue":t[1]||(t[1]=e=>l.stakeholderModel=e),label:"organisation_name",class:"get-stakeholders"},null,8,["options","onSearch","modelValue"])])]),(0,a.kq)(" MODAL "),(0,a.Wm)(n,{onCreated_new_organisation:t[2]||(t[2]=e=>r.createdNewOrganisation(e))})])}]]);var ie=o(3058);const ne=o(9669),de={name:"NewTask",setup:()=>({v$:(0,T.ZP)()}),components:{BetweenDates:q.Z,GetStakeholders:re,GroupPermissions:W,editor:I.Z,NSelect:U.Z,StakeholderInformation:$.Z},props:{groupResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},userGroupResults:{type:Array,default:()=>[]}},data:()=>({groupModel:{},stakeholderModel:"",taskDescriptionModel:"",taskEndDateModel:"",taskShortDescriptionModel:"",taskStartDateModel:""}),mixins:[ie.Z],validations:{groupModel:{required:Z.C1},stakeholderModel:{required:Z.C1},taskDescriptionModel:{required:Z.C1,maxLength:(0,Z.BS)(63e4)},taskEndDateModel:{required:Z.C1},taskShortDescriptionModel:{required:Z.C1},taskStartDateModel:{required:Z.C1}},methods:{submitNewTask:function(){if(this.v$.$touch(),this.v$.$invalid)return void this.showValidationErrorModal();const e=new FormData;e.set("organisation",this.stakeholderModel.value),e.set("task_long_description",this.taskDescriptionModel),e.set("task_end_date",this.taskEndDateModel),e.set("task_short_description",this.taskShortDescriptionModel),e.set("task_start_date",this.taskStartDateModel),this.groupModel.forEach(((t,o)=>{e.append("group_list",t.value)})),ne.post("save/",e).then((e=>{window.location.href=e.data})).catch((e=>{this.showErrorModal(e,this.destination)}))},updateDates:function(e){this.taskEndDateModel=e.end_date,this.taskStartDateModel=e.start_date},updateGroupModel:function(e){this.groupModel=e},updateStakeholderModel:function(e){this.stakeholderModel=e}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl})}},ue=(0,G.Z)(de,[["render",function(e,t,o,T,Z,I){const U=(0,a.up)("editor"),$=(0,a.up)("get-stakeholders"),q=(0,a.up)("between-dates"),O=(0,a.up)("group-permissions");return(0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("div",r,[i,n,(0,a._)("div",d,[(0,a.kq)(" DESCRIPTION "),u,(0,a.kq)(" Task FORM "),(0,a._)("div",c,[(0,a.kq)(" TASK NAME "),(0,a._)("div",p,[(0,a._)("label",null,[h,!T.v$.taskShortDescriptionModel.required&&T.v$.taskShortDescriptionModel.$dirty?((0,a.wg)(),(0,a.iD)("span",m," Please supply a title.")):(0,a.kq)("v-if",!0)]),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>Z.taskShortDescriptionModel=e),class:"form-control"},null,512),[[s.vModelText,Z.taskShortDescriptionModel]])]),g,(0,a.kq)(" TASK DESCRIPTION "),(0,a._)("label",null,[k,!T.v$.taskDescriptionModel.required&&T.v$.taskDescriptionModel.$dirty?((0,a.wg)(),(0,a.iD)("span",f," Please supply a description.")):(0,a.kq)("v-if",!0),T.v$.taskDescriptionModel.maxLength?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("span",M," Sorry - too many characters."))]),_,(0,a._)("img",{src:`${o.staticUrl}NearBeach/images/placeholder/body_text.svg`,class:"loader-image",alt:"loading image for Tinymce"},null,8,D),(0,a.Wm)(U,{init:{height:500,menubar:!1,plugins:"lists",toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | bullist numlist outdent indent | removeformat"]},content_css:!1,skin:!1,modelValue:Z.taskDescriptionModel,"onUpdate:modelValue":t[1]||(t[1]=e=>Z.taskDescriptionModel=e)},null,8,["modelValue"])])]),(0,a.kq)(" STAKEHOLDER ORGANISATION "),v,(0,a.Wm)($,{onUpdate_stakeholder_model:t[2]||(t[2]=e=>I.updateStakeholderModel(e)),"is-dirty":T.v$.stakeholderModel.$dirty},null,8,["is-dirty"]),(0,a.kq)(" START DATE & END DATE "),y,(0,a.Wm)(q,{destination:"task",onUpdate_dates:t[3]||(t[3]=e=>I.updateDates(e)),"is-dirty-end":T.v$.taskEndDateModel.$dirty||T.v$.taskStartDateModel.$dirty},null,8,["is-dirty-end"]),(0,a.kq)(" Group Permissions "),S,(0,a.Wm)(O,{"group-results":o.groupResults,destination:"task","user-group-results":o.userGroupResults,onUpdate_group_model:t[4]||(t[4]=e=>I.updateGroupModel(e)),"is-dirty":T.v$.groupModel.$dirty},null,8,["group-results","user-group-results","is-dirty"]),(0,a.kq)(" Submit Button "),w,(0,a._)("div",b,[(0,a._)("div",E,[(0,a._)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[5]||(t[5]=(...e)=>I.submitNewTask&&I.submitNewTask(...e))},"Create new Task")])])])])}]])},3058:(e,t,o)=>{o.d(t,{Z:()=>s});var a=o(9909);const s={methods:{showErrorModal:function(e,t,o){new a.u_(document.getElementById("loadingModal")).hide(),document.getElementById("errorModalContent").innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new requirement<hr>${e}`,new a.u_(document.getElementById("errorModal")).show()},showValidationErrorModal:function(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new a.u_(document.getElementById("errorModal")).show()}}}},5808:(e,t,o)=>{o.d(t,{Z:()=>Z});var a=o(459),s=o(5555),l=o(9980),r=o(6443),i=o(1327),n=o(3408),d=o(647),u=o(1278),c=o(9672),p=o(5984),h=o(763),m=o(5004),g=o(1321),k=o(5189),f=o(947),M=o(780),_=o(295),D=o(8093),v=o(3843),y=o(2393),S=o(114),w=o(9714),b=o(1323),E=o(2610),T=o(4187);const Z={data:()=>({icons:{arrowUp:a.Z,bugIcon:s.Z,bxBriefcase:l.Z,cardChecklist:r.Z,clipboardIcon:i.Z,documentPdf:n.Z,documentText:d.Z,folderIcon:u.Z,groupPresentation:c.Z,imageIcon:p.Z,infoCircle:h.Z,linkIcon:m.Z,linkIcon2:g.Z,linkOut:k.Z,mailIcon:f.Z,microsoftExcel:M.Z,microsoftPowerpoint:_.Z,microsoftWord:D.Z,noteAdd:v.Z,objectStorage:y.Z,passwordIcon:S.Z,trashCan:w.Z,userIcon:b.Z,usersIcon:E.Z,xCircle:T.Z}})}},9113:(e,t,o)=>{o.d(t,{Z:()=>a});const a={methods:{searchTrigger:function(e){""!=e.searchTimeout&&clearTimeout(e.searchTimeout),void 0===e.search?this.searchUndefined(e):this.searchDefined(e)},searchDefined:function(e){e.search.length>=3&&(e.searchTimeout=setTimeout(e.return_function,500,e.search,e.loading))},searchUndefined:function(e){e.searchTimeout=setTimeout(e.return_function,500)}}}}}]);