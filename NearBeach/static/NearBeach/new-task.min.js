"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[510],{7267:(e,t,o)=>{o.d(t,{Z:()=>f});var a,n=o(6252),i=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],s=function(e){return-1!==i.map((function(e){return e.toLowerCase()})).indexOf(e.toLowerCase())},r=0,l=function(e){var t=Date.now();return e+"_"+Math.floor(1e9*Math.random())+ ++r+String(t)},d=function(e){return void 0===e||""===e?[]:Array.isArray(e)?e:e.split(" ")},u=function(){return{listeners:[],scriptId:l("tiny-script"),scriptLoaded:!1}},c=(a=u(),{load:function(e,t,o){a.scriptLoaded?o():(a.listeners.push(o),e.getElementById(a.scriptId)||function(e,t,o,n){var i=t.createElement("script");i.referrerPolicy="origin",i.type="application/javascript",i.id=e,i.src=o;var s=function(){i.removeEventListener("load",s),a.listeners.forEach((function(e){return e()})),a.scriptLoaded=!0};i.addEventListener("load",s),t.head&&t.head.appendChild(i)}(a.scriptId,e,t))},reinitialize:function(){a=u()}}),g=function(){var e="undefined"!=typeof window?window:o.g;return e&&e.tinymce?e.tinymce:null},p={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return"html"===e||"text"===e}}},m=o(2262),h=function(){return h=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},h.apply(this,arguments)};const f=(0,n.aZ)({props:p,setup:function(e,t){var o=(0,m.BK)(e),a=o.disabled,i=o.modelValue,r=(0,m.iH)(null),u=null,p=e.id||l("tiny-vue"),f=e.init&&e.init.inline||e.inline,v=!!t.attrs["onUpdate:modelValue"],k=!0,_=e.initialValue?e.initialValue:"",M="",y=function(){var o,a,l,c=(o=k,v?function(){return(null==i?void 0:i.value)?i.value:""}:function(){return o?_:M}),m=h(h({},e.init),{readonly:e.disabled,selector:"#"+p,plugins:(a=e.init&&e.init.plugins,l=e.plugins,d(a).concat(d(l))),toolbar:e.toolbar||e.init&&e.init.toolbar,inline:f,setup:function(o){u=o,o.on("init",(function(a){return function(e,t,o,a,i,r){a.setContent(r()),o.attrs["onUpdate:modelValue"]&&function(e,t,o,a){var i=e.modelEvents?e.modelEvents:null,s=Array.isArray(i)?i.join(" "):i;(0,n.YP)(a,(function(t,a){o&&"string"==typeof t&&t!==a&&t!==o.getContent({format:e.outputFormat})&&o.setContent(t)})),o.on(s||"change input undo redo",(function(){t.emit("update:modelValue",o.getContent({format:e.outputFormat}))}))}(t,o,a,i),function(e,t,o){Object.keys(t).filter(s).forEach((function(a){var n=t[a];"function"==typeof n&&("onInit"===a?n(e,o):o.on(a.substring(2),(function(e){return n(e,o)})))}))}(e,o.attrs,a)}(a,e,t,o,i,c)})),e.init&&"function"==typeof e.init.setup&&e.init.setup(o)}});(function(e){return null!==e&&"textarea"===e.tagName.toLowerCase()})(r.value)&&(r.value.style.visibility=""),g().init(m),k=!1};return(0,n.YP)(a,(function(e){null!==u&&u.setMode(e?"readonly":"design")})),(0,n.bv)((function(){if(null!==g())y();else if(r.value&&r.value.ownerDocument){var t=e.cloudChannel?e.cloudChannel:"5",o=e.apiKey?e.apiKey:"no-api-key",a=null==e.tinymceScriptSrc?"https://cdn.tiny.cloud/1/"+o+"/tinymce/"+t+"/tinymce.min.js":e.tinymceScriptSrc;c.load(r.value.ownerDocument,a,y)}})),(0,n.Jd)((function(){null!==g()&&g().remove(u)})),f||((0,n.dl)((function(){k||y()})),(0,n.se)((function(){var e;v||(M=u.getContent()),null===(e=g())||void 0===e||e.remove(u)}))),function(){return f?(t=n.h,o=p,a=r,t(e.tagName||"div",{id:o,ref:a})):function(e,t,o){return e("textarea",{id:t,visibility:"hidden",ref:o})}(n.h,p,r);var t,o,a}}})},5511:(e,t,o)=>{o.d(t,{Z:()=>_});var a=o(6252),n=o(3577);const i={class:"row"},s={class:"col-md-4"},r=(0,a._)("strong",null,"Between Dates",-1),l={class:"text-instructions"},d={class:"col-md-4"},u={class:"form-group"},c={key:0,class:"error"},g={class:"col-md-4"},p={class:"form-group"},m={key:0,class:"error"};var h=o(5309),f=o(6650),v=o(2587);const k={name:"BetweenDates",setup:()=>({v$:(0,f.ZP)()}),components:{NDatePicker:h.Z},props:{destination:{type:String,default:""},endDateModel:{type:Number,default:()=>{let e=new Date;return e.setHours(16),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),new Date(e.setDate(e.getDate()+14)),e.getTime()}},startDateModel:{type:Number,default:()=>{let e=new Date;return e.setHours(9),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e.getTime()}}},validations:{localEndDateModel:{required:v.C1},localStartDateModel:{required:v.C1}},data(){return{localEndDateModel:this.endDateModel,localStartDateModel:this.startDateModel}},methods:{emitDates:function(){this.$emit("update_dates",{start_date:this.localStartDateModel,end_date:this.localEndDateModel})}},watch:{localEndDateModel:function(){this.localEndDateModel<this.localStartDateModel&&(this.localEndDateModel=this.localStartDateModel()),this.emitDates()},localStartDateModel:function(){this.localEndDateModel<this.localStartDateModel&&(this.localStartDateModel=this.localEndDateModel()),this.emitDates()}}},_=(0,o(3744).Z)(k,[["render",function(e,t,o,h,f,v){const k=(0,a.up)("n-date-picker");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",s,[r,(0,a._)("p",l," Choose the start and end date of the "+(0,n.toDisplayString)(o.destination)+". Please note the end date can not be earlier than the start date. They can be equal. ",1)]),(0,a._)("div",d,[(0,a._)("div",u,[(0,a._)("label",null,[(0,a.Uk)((0,n.toDisplayString)(o.destination)+" Start Date: ",1),!h.v$.localStartDateModel.$error.length>0?((0,a.wg)(),(0,a.iD)("span",c," Please select a date.")):(0,a.kq)("v-if",!0)]),(0,a.Wm)(k,{type:"datetime",value:f.localStartDateModel,"onUpdate:value":t[0]||(t[0]=e=>f.localStartDateModel=e),class:"form-control"},null,8,["value"])])]),(0,a._)("div",g,[(0,a._)("div",p,[(0,a._)("label",null,[(0,a.Uk)((0,n.toDisplayString)(o.destination)+" End Date: ",1),!h.v$.localEndDateModel.$error.length>0?((0,a.wg)(),(0,a.iD)("span",m," Please select a date.")):(0,a.kq)("v-if",!0)]),(0,a.Wm)(k,{type:"datetime",value:f.localEndDateModel,"onUpdate:value":t[1]||(t[1]=e=>f.localEndDateModel=e),class:"form-control"},null,8,["value"])])])])}]])},2301:(e,t,o)=>{o.d(t,{Z:()=>M});var a=o(6252),n=o(3577);const i={class:"organisation-details"},s=["src"],r=["src"],l={class:"organisation-name"},d=["href"],u={class:"organisation-link"},c=(0,a.Uk)(" Website: "),g=["href"],p={class:"organisation-email"},m=(0,a.Uk)(" Email: "),h=["href"];var f=o(4250),v=o(6542),k=o(5808);const _={name:"ListOrganisations",components:{Icon:v.JO},props:{organisationResults:{type:Array,default:()=>[]}},computed:{...(0,f.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[k.Z],methods:{}},M=(0,o(3744).Z)(_,[["render",function(e,t,o,f,v,k){const _=(0,a.up)("Icon");return(0,a.wg)(),(0,a.iD)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.organisationResults,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.id,class:"row"},[(0,a._)("div",i,[""==t.fields.organisation_profile_picture?((0,a.wg)(),(0,a.iD)("img",{key:0,src:`${e.staticUrl}/NearBeach/images/placeholder/product_tour.svg`,alt:"Stakeholder Logo",class:"organisation-image"},null,8,s)):((0,a.wg)(),(0,a.iD)("img",{key:1,src:t.fields.organisation_profile_picture,alt:"Stakeholder Logo",class:"organisation-image"},null,8,r)),(0,a._)("div",l,[(0,a._)("a",{href:`${e.rootUrl}organisation_information/${t.pk}/`},(0,n.toDisplayString)(t.fields.organisation_name),9,d)]),(0,a._)("div",u,[(0,a.Wm)(_,{icon:e.icons.linkOut},null,8,["icon"]),c,(0,a._)("a",{href:t.fields.organisation_website,target:"_blank",rel:"noopener noreferrer"},(0,n.toDisplayString)(t.fields.organisation_website),9,g)]),(0,a._)("div",p,[(0,a.Wm)(_,{icon:e.icons.mailIcon},null,8,["icon"]),m,(0,a._)("a",{href:`mailto:${t.fields.organisation_email}`},(0,n.toDisplayString)(t.fields.organisation_email),9,h)])])])))),128))])}]])},2843:(e,t,o)=>{o.d(t,{Z:()=>y});var a=o(6252),n=o(3577);const i={class:"row"},s=(0,a._)("div",{class:"col-md-4"},[(0,a._)("h2",null,"Stakeholder")],-1),r={class:"col-md-8 organisation-details"},l=["src"],d={class:"organisation-name"},u=["href"],c={class:"organisation-link"},g=(0,a.Uk)(" Website: "),p=["href"],m={class:"organisation-email"},h=(0,a.Uk)(" Email: "),f=["href"];var v=o(6542),k=o(5808),_=o(4250);const M={name:"StakeholderInformation",components:{Icon:v.JO},props:{defaultStakeholderImage:{type:String,default:""},organisationResults:{type:Array,default:()=>[]}},data(){return{stakeholderModel:this.organisationResults[0].fields}},mixins:[k.Z],computed:{...(0,_.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"}),getStakeholderImage:function(){return""===this.stakeholderModel.organisation_profile_picture?this.defaultStakeholderImage:this.stakeholderModel.organisation_profile_picture}}},y=(0,o(3744).Z)(M,[["render",function(e,t,o,v,k,_){const M=(0,a.up)("Icon");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a.kq)(" Description "),s,(0,a._)("div",r,[(0,a._)("img",{src:_.getStakeholderImage,alt:"Stakeholder Logo",class:"organisation-image"},null,8,l),(0,a._)("div",d,[(0,a._)("a",{href:`${e.rootUrl}organisation_information/${o.organisationResults[0].pk}/`},(0,n.toDisplayString)(k.stakeholderModel.organisation_name),9,u)]),(0,a._)("div",c,[(0,a.Wm)(M,{icon:e.icons.linkOut},null,8,["icon"]),g,(0,a._)("a",{href:k.stakeholderModel.organisation_website,target:"_blank",rel:"noopener noreferrer"},(0,n.toDisplayString)(k.stakeholderModel.organisation_website),9,p)]),(0,a._)("div",m,[(0,a.Wm)(M,{icon:e.icons.mailIcon},null,8,["icon"]),h,(0,a._)("a",{href:`mailto:${k.stakeholderModel.organisation_email}`},(0,n.toDisplayString)(k.stakeholderModel.organisation_email),9,f)])])])}]])},286:(e,t,o)=>{o.r(t),o.d(t,{default:()=>He});var a=o(6252),n=o(9963);const i={class:"card"},s={class:"card-body"},r=(0,a._)("h1",null,"New Task",-1),l=(0,a._)("hr",null,null,-1),d={class:"row"},u=(0,a._)("div",{class:"col-md-4"},[(0,a._)("h2",null,"Description"),(0,a._)("p",{class:"text-instructions"}," To create a new task, fill out the form and submit at the bottom of the page. ")],-1),c={class:"col-md-8",style:{"min-height":"610px"}},g={class:"form-group"},p=(0,a.Uk)("Task Short Description: "),m={key:0,class:"error"},h=(0,a._)("br",null,null,-1),f=(0,a.Uk)("Task Long Description: "),v={key:0,class:"error"},k=(0,a._)("br",null,null,-1),_=["src"],M=(0,a._)("hr",null,null,-1),y=(0,a._)("hr",null,null,-1),D=(0,a._)("hr",null,null,-1),w=(0,a._)("hr",null,null,-1),S={class:"row submit-row"},b={class:"col-md-12"};var O=o(6650),E=o(2587),I=o(7267),U=o(3301),C=o(2843),T=o(5511),$=o(3577);const Z={class:"row"},N={class:"col-md-4"},q=(0,a._)("h2",null,"Group Permissions",-1),A={class:"text-instructions"},P=(0,a._)("p",{class:"text-instructions"}," If you do not add one of your own group(s), you will only get readonly access. ",-1),x={class:"col-md-8"},L=(0,a.Uk)("Group List "),R={key:0,class:"error"},B={name:"GroupPermissions",setup:()=>({v$:(0,O.ZP)()}),components:{NSelect:U.Z},props:{destination:{type:String,default:""},groupResults:{type:Array,default:()=>[]},isDirty:{type:Boolean,default:!0},userGroupResults:{type:Array,default:()=>[]}},watch:{groupModel:function(){this.$emit("update_group_model",this.groupModel)}},data:()=>({groupFixResults:[],groupModel:[]}),validations:{groupModel:{required:E.C1}},mounted(){this.groupFixResults=this.groupResults.map((e=>({value:e.pk,label:e.fields.group_name}))),this.groupModel=this.userGroupResults.map((e=>e.group_id))}};var W=o(3744);const G=(0,W.Z)(B,[["render",function(e,t,o,n,i,s){const r=(0,a.up)("n-select");return(0,a.wg)(),(0,a.iD)("div",Z,[(0,a._)("div",N,[q,(0,a._)("p",A," Add or remove groups from this "+(0,$.toDisplayString)(o.destination)+". Adding a group will allow users from that group to access this "+(0,$.toDisplayString)(o.destination)+". ",1),P]),(0,a._)("div",x,[(0,a._)("label",null,[L,!n.v$.groupModel.required&&o.isDirty?((0,a.wg)(),(0,a.iD)("span",R," Please select at least one group.")):(0,a.kq)("v-if",!0)]),(0,a.Wm)(r,{options:i.groupFixResults,label:"group",value:i.groupModel,"onUpdate:value":t[0]||(t[0]=e=>i.groupModel=e),multiple:""},null,8,["options","value"])])])}]]),F={class:"row"},V={class:"col-md-4"},j=(0,a._)("h2",null,"Stakeholder Organisation",-1),H=(0,a._)("p",{class:"text-instructions"}," Please search for your stakeholder's organisation in the dropdown box. Once found, please select. ",-1),K={class:"text-instructions"},Y=(0,a.Uk)(" If you can not find your organisation, please "),z={class:"col-md-8"},J={class:"form-group"},Q=(0,a.Uk)("Stakeholder Organisation "),X={key:0,class:"error"};var ee=o(9909);const te={class:"modal fade",id:"newOrganisationModal",tabindex:"-1","aria-labelledby":"newOrganisationModalLabel","aria-hidden":"true"},oe={class:"modal-dialog modal-lg"},ae={class:"modal-content"},ne=(0,a._)("div",{class:"modal-header"},[(0,a._)("h5",{class:"modal-title",id:"newOrganisationModalLabel"}," New Organisation "),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"newOrganisationModalCloseButton"})],-1),ie={class:"modal-body"},se={class:"row"},re=(0,a._)("div",{class:"col-md-4"},[(0,a._)("strong",null,"Description"),(0,a._)("p",{class:"text-instructions"}," Please fill out all the required fields. Please only use a generic email for the organisation email field. e.g. support@companyxyz.com ")],-1),le={class:"col-md-8"},de={class:"form-group"},ue={for:"id_organisation_name"},ce=(0,a.Uk)(" Organisation Name: "),ge={key:0,class:"error"},pe=(0,a._)("br",null,null,-1),me={class:"row"},he={class:"form-group col-md-6"},fe={for:"id_organisation_website"},ve=(0,a.Uk)(" Organisation Website: "),ke={key:0,class:"error"},_e={key:1,class:"error"},Me={class:"form-group col-md-6"},ye={for:"id_organisation_email"},De=(0,a.Uk)(" Organisation Email: "),we={key:0,class:"error"},Se={key:1,class:"error"},be=(0,a._)("hr",null,null,-1),Oe={key:0,class:"row submit-row"},Ee={class:"col-md-12"},Ie={key:1},Ue={key:2,class:"row"},Ce=(0,a._)("div",{class:"col-md-4"},[(0,a._)("strong",null,"Please Read"),(0,a._)("p",{class:"text-instructions"},' The server has found potential duplications. Please review the following Organisations. If you would like to create the organisation, please scroll to the bottom of the page and hit "Submit Organisation". If the organisation you are looking for is already created. Click on the name and you will be taken to the Organisation\'s Information page. '),(0,a._)("strong",null,"Alternatively"),(0,a._)("p",{class:"text-instructions"}," You can also change the information above and resubmit. ")],-1),Te={class:"col-md-8"},$e={key:3,class:"row submit-row"},Ze={class:"col-md-12"};var Ne=o(2301),qe=o(4250),Ae=o(3058),Pe=o(8416);const xe=o(9669),Le={name:"NewOrganisationModal",setup:()=>({v$:(0,O.ZP)()}),components:{ListOrganisations:Ne.Z},props:{},mixins:[Ae.Z,Pe.Z],data:()=>({duplicateOrganisations:[],organisationNameModel:"",organisationWebsiteModel:"",organisationEmailModel:""}),computed:{...(0,qe.Se)({rootUrl:"getRootUrl"})},watch:{organisationNameModel:function(){this.duplicateOrganisations=[]},organisationWebsiteModel:function(){this.duplicateOrganisations=[]},organisationEmailModel:function(){this.duplicateOrganisations=[]}},methods:{addOrganisation:function(){this.v$.$touch(),this.v$.$invalid?this.showValidationErrorModal():xe.post(`${this.rootUrl}organisation_duplicates/`,this.dataToSend()).then((e=>{0==e.data.length&&this.uploadOrganisationData(),this.duplicateOrganisations=e.data})).catch((e=>{this.showErrorModal(e,"organisation","")}))},dataToSend:function(){const e=new FormData;return e.set("organisation_name",this.organisationNameModel),e.set("organisation_website",this.organisationWebsiteModel),e.set("organisation_email",this.organisationEmailModel),e},uploadOrganisationData:function(){xe.post(`${this.rootUrl}new_organisation/save/`,this.dataToSend()).then((e=>{const t=e.data[0];this.$emit("created_new_organisation",{value:t.pk,organisation_email:t.fields.organisation_email,organisation_name:t.fields.organisation_name,organisation_profile_picture:t.fields.organisation_profile_picture,organisation_website:t.fields.organisation_website})})).catch((e=>{}))}},validations:{organisationNameModel:{required:E.C1,maxLength:(0,E.BS)(255)},organisationWebsiteModel:{required:E.C1,url:E.HQ},organisationEmailModel:{required:E.C1,email:E.Do}}},Re=(0,W.Z)(Le,[["render",function(e,t,o,i,s,r){const l=(0,a.up)("list-organisations");return(0,a.wg)(),(0,a.iD)("div",te,[(0,a._)("div",oe,[(0,a._)("div",ae,[ne,(0,a._)("div",ie,[(0,a.kq)(" FIELDS SECTION "),(0,a._)("div",se,[re,(0,a._)("div",le,[(0,a.kq)(" ORGANISATION NAME "),(0,a._)("div",de,[(0,a._)("label",ue,[ce,!i.v$.organisationNameModel.required&&i.v$.organisationNameModel.$dirty?((0,a.wg)(),(0,a.iD)("span",ge," Please suppy a title. ")):(0,a.kq)("v-if",!0)]),(0,a.wy)((0,a._)("input",{id:"id_organisation_name",name:"organisation_name",type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>s.organisationNameModel=e)},null,512),[[n.vModelText,s.organisationNameModel]])]),pe,(0,a._)("div",me,[(0,a.kq)(" ORGANISATION WEBSITE "),(0,a._)("div",he,[(0,a._)("label",fe,[ve,!i.v$.organisationWebsiteModel.required&&i.v$.organisationWebsiteModel.$dirty?((0,a.wg)(),(0,a.iD)("span",ke," Please supply ")):(0,a.kq)("v-if",!0),!i.v$.organisationWebsiteModel.url&&i.v$.organisationWebsiteModel.$dirty?((0,a.wg)(),(0,a.iD)("span",_e," Please format at URL ")):(0,a.kq)("v-if",!0)]),(0,a.wy)((0,a._)("input",{id:"id_organisation_website",name:"organisation_website",type:"url",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>s.organisationWebsiteModel=e)},null,512),[[n.vModelText,s.organisationWebsiteModel]])]),(0,a.kq)(" ORGANISATION EMAIL "),(0,a._)("div",Me,[(0,a._)("label",ye,[De,!i.v$.organisationEmailModel.required&&i.v$.organisationEmailModel.$dirty?((0,a.wg)(),(0,a.iD)("span",we," Please supply ")):(0,a.kq)("v-if",!0),!i.v$.organisationEmailModel.email&&i.v$.organisationEmailModel.$dirty?((0,a.wg)(),(0,a.iD)("span",Se," Please format as Email ")):(0,a.kq)("v-if",!0)]),(0,a.wy)((0,a._)("input",{id:"id_organisation_email",name:"organisation_email",type:"email",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>s.organisationEmailModel=e)},null,512),[[n.vModelText,s.organisationEmailModel]])])])])]),be,(0,a.kq)(" SUBMIT ORGANISATION BUTTON "),0==s.duplicateOrganisations.length?((0,a.wg)(),(0,a.iD)("div",Oe,[(0,a._)("div",Ee,[(0,a._)("button",{class:"btn btn-primary save-changes",onClick:t[3]||(t[3]=(...e)=>r.addOrganisation&&r.addOrganisation(...e))}," Add Organisation ")])])):(0,a.kq)("v-if",!0),s.duplicateOrganisations.length>0?((0,a.wg)(),(0,a.iD)("h2",Ie," Potential Duplication ")):(0,a.kq)("v-if",!0),s.duplicateOrganisations.length>0?((0,a.wg)(),(0,a.iD)("div",Ue,[(0,a.kq)(" PLEASE READ "),Ce,(0,a.kq)(" DUPLICATE ORGANISATION LIST "),(0,a._)("div",Te,[(0,a.Wm)(l,{"organisation-results":s.duplicateOrganisations,"root-url":e.rootUrl},null,8,["organisation-results","root-url"])])])):(0,a.kq)("v-if",!0),(0,a.kq)(" STILL SUBMIT ORGANISATION "),s.duplicateOrganisations.length>0?((0,a.wg)(),(0,a.iD)("div",$e,[(0,a._)("div",Ze,[(0,a._)("button",{class:"btn btn-primary save-changes",onClick:t[4]||(t[4]=(...e)=>r.uploadOrganisationData&&r.uploadOrganisationData(...e))}," Submit Organisation ")])])):(0,a.kq)("v-if",!0)])])])])}]]);var Be=o(9113);const We=o(9669),Ge={name:"GetStakeholders",setup:()=>({v$:(0,O.ZP)()}),components:{axios:We,NewOrganisationModal:Re,NSelect:U.Z},mixins:[Be.Z],props:{isDirty:{type:Boolean,default:!1}},data:()=>({searchTimeout:"",stakeholderFixList:[],stakeholderModel:""}),validations:{stakeholderModel:{required:E.C1}},computed:{...(0,qe.Se)({rootUrl:"getRootUrl"})},methods:{createdNewOrganisation:function(e){this.stakeholderModel=e,document.getElementById("newOrganisationModalCloseButton").click()},fetchOptions:function(e,t){this.searchTrigger({return_function:this.getOrganisationData,searchTimeout:this.searchTimeout,search:e,loading:t})},getOrganisationData:function(e,t){const o=new FormData;o.set("search",e),We.post(`${this.rootUrl}search/organisation/data/`,o).then((e=>{var t=e.data;this.stakeholderFixList=t.map((e=>({value:e.pk,label:e.fields.organisation_name})))})).catch((function(e){document.getElementById("errorModalContent").innerHTML=`<strong>Search Organisation Issue:</strong><br/>${e}`,new bootstrap.Modal(document.getElementById("errorModal"),{keyboard:!1}).show(),document.getElementById("loader").style.display="none"}))},openNewOrganisationModal:function(){new ee.u_(document.getElementById("newOrganisationModal")).show()}},watch:{stakeholderModel:function(){this.$emit("update_stakeholder_model",this.stakeholderModel)}},mounted(){setTimeout((()=>{this.getOrganisationData("","")}),200)}},Fe=(0,W.Z)(Ge,[["render",function(e,t,o,n,i,s){const r=(0,a.up)("n-select"),l=(0,a.up)("new-organisation-modal");return(0,a.wg)(),(0,a.iD)("div",F,[(0,a._)("div",V,[j,H,(0,a._)("p",K,[Y,(0,a._)("a",{href:"javascript:void(0)",onClick:t[0]||(t[0]=(...e)=>s.openNewOrganisationModal&&s.openNewOrganisationModal(...e))}," click here to create it. ")])]),(0,a._)("div",z,[(0,a._)("div",J,[(0,a._)("label",null,[Q,!n.v$.stakeholderModel.required&&o.isDirty?((0,a.wg)(),(0,a.iD)("span",X," Please search for a Stakeholder.")):(0,a.kq)("v-if",!0)]),(0,a.Wm)(r,{options:i.stakeholderFixList,filterable:"",placeholder:"Search Stakeholders",onSearch:s.fetchOptions,value:i.stakeholderModel,"onUpdate:value":t[1]||(t[1]=e=>i.stakeholderModel=e),label:"organisation_name",class:"get-stakeholders"},null,8,["options","onSearch","value"])])]),(0,a.kq)(" MODAL "),(0,a.Wm)(l,{onCreated_new_organisation:t[2]||(t[2]=e=>s.createdNewOrganisation(e))})])}]]),Ve=o(9669),je={name:"NewTask",setup:()=>({v$:(0,O.ZP)()}),components:{BetweenDates:T.Z,GetStakeholders:Fe,GroupPermissions:G,editor:I.Z,NSelect:U.Z,StakeholderInformation:C.Z},props:{groupResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},userGroupResults:{type:Array,default:()=>[]}},data:()=>({groupModel:{},stakeholderModel:"",taskDescriptionModel:"",taskEndDateModel:"",taskShortDescriptionModel:"",taskStartDateModel:""}),mixins:[Ae.Z],validations:{groupModel:{required:E.C1},stakeholderModel:{required:E.C1},taskDescriptionModel:{required:E.C1,maxLength:(0,E.BS)(63e4)},taskEndDateModel:{required:E.C1},taskShortDescriptionModel:{required:E.C1},taskStartDateModel:{required:E.C1}},methods:{submitNewTask:async function(){if(!await this.v$.$validate()&&(this.v$.groupModel.$error.length>0||this.v$.stakeholderModel.length>0||this.v$.taskDescriptionModel.length>0||this.v$.taskEndDateModel.length>0||this.v$.taskShortDescriptionModel.length>0||this.v$.taskStartDateModel.length>0))return void this.showValidationErrorModal();const e=new FormData;e.set("organisation",this.stakeholderModel),e.set("task_long_description",this.taskDescriptionModel),e.set("task_end_date",this.taskEndDateModel.toISOString()),e.set("task_short_description",this.taskShortDescriptionModel),e.set("task_start_date",this.taskStartDateModel.toISOString()),this.groupModel.forEach(((t,o)=>{e.append("group_list",t)})),Ve.post("save/",e).then((e=>{window.location.href=e.data})).catch((e=>{this.showErrorModal(e,this.destination)}))},updateDates:function(e){this.taskEndDateModel=new Date(e.end_date),this.taskStartDateModel=new Date(e.start_date)},updateGroupModel:function(e){this.groupModel=e},updateStakeholderModel:function(e){this.stakeholderModel=e}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl})}},He=(0,W.Z)(je,[["render",function(e,t,o,O,E,I){const U=(0,a.up)("editor"),C=(0,a.up)("get-stakeholders"),T=(0,a.up)("between-dates"),$=(0,a.up)("group-permissions");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",s,[r,l,(0,a._)("div",d,[(0,a.kq)(" DESCRIPTION "),u,(0,a.kq)(" Task FORM "),(0,a._)("div",c,[(0,a.kq)(" TASK NAME "),(0,a._)("div",g,[(0,a._)("label",null,[p,!O.v$.taskShortDescriptionModel.$error.length>0?((0,a.wg)(),(0,a.iD)("span",m," Please supply a title.")):(0,a.kq)("v-if",!0)]),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>E.taskShortDescriptionModel=e),class:"form-control"},null,512),[[n.vModelText,E.taskShortDescriptionModel]])]),h,(0,a.kq)(" TASK DESCRIPTION "),(0,a._)("label",null,[f,!O.v$.taskDescriptionModel.$error.length>0?((0,a.wg)(),(0,a.iD)("span",v," Please supply a description.")):(0,a.kq)("v-if",!0)]),k,(0,a._)("img",{src:`${o.staticUrl}NearBeach/images/placeholder/body_text.svg`,class:"loader-image",alt:"loading image for Tinymce"},null,8,_),(0,a.Wm)(U,{init:{height:500,menubar:!1,plugins:"lists",toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | bullist numlist outdent indent | removeformat"]},content_css:!1,skin:!1,modelValue:E.taskDescriptionModel,"onUpdate:modelValue":t[1]||(t[1]=e=>E.taskDescriptionModel=e)},null,8,["modelValue"])])]),(0,a.kq)(" STAKEHOLDER ORGANISATION "),M,(0,a.Wm)(C,{onUpdate_stakeholder_model:t[2]||(t[2]=e=>I.updateStakeholderModel(e)),"is-dirty":O.v$.stakeholderModel.$error.length>0},null,8,["is-dirty"]),(0,a.kq)(" START DATE & END DATE "),y,(0,a.Wm)(T,{destination:"task",onUpdate_dates:t[3]||(t[3]=e=>I.updateDates(e))}),(0,a.kq)(" Group Permissions "),D,(0,a.Wm)($,{"group-results":o.groupResults,destination:"task","user-group-results":o.userGroupResults,onUpdate_group_model:t[4]||(t[4]=e=>I.updateGroupModel(e)),"is-dirty":O.v$.groupModel.$error.length>0},null,8,["group-results","user-group-results","is-dirty"]),(0,a.kq)(" Submit Button "),w,(0,a._)("div",S,[(0,a._)("div",b,[(0,a._)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[5]||(t[5]=(...e)=>I.submitNewTask&&I.submitNewTask(...e))},"Create new Task")])])])])}]])},3058:(e,t,o)=>{o.d(t,{Z:()=>n});var a=o(9909);const n={methods:{showErrorModal:function(e,t,o){new a.u_(document.getElementById("loadingModal")).hide(),document.getElementById("errorModalContent").innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new requirement<hr>${e}`,new a.u_(document.getElementById("errorModal")).show()},showValidationErrorModal:function(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new a.u_(document.getElementById("errorModal")).show()}}}},5808:(e,t,o)=>{o.d(t,{Z:()=>I});var a=o(459),n=o(5555),i=o(9980),s=o(6443),r=o(1327),l=o(3408),d=o(647),u=o(1278),c=o(9672),g=o(5984),p=o(763),m=o(5004),h=o(1321),f=o(5189),v=o(947),k=o(780),_=o(295),M=o(8093),y=o(3843),D=o(2393),w=o(114),S=o(9714),b=o(1323),O=o(2610),E=o(4187);const I={data:()=>({icons:{arrowUp:a.Z,bugIcon:n.Z,bxBriefcase:i.Z,cardChecklist:s.Z,clipboardIcon:r.Z,documentPdf:l.Z,documentText:d.Z,folderIcon:u.Z,groupPresentation:c.Z,imageIcon:g.Z,infoCircle:p.Z,linkIcon:m.Z,linkIcon2:h.Z,linkOut:f.Z,mailIcon:v.Z,microsoftExcel:k.Z,microsoftPowerpoint:_.Z,microsoftWord:M.Z,noteAdd:y.Z,objectStorage:D.Z,passwordIcon:w.Z,trashCan:S.Z,userIcon:b.Z,usersIcon:O.Z,xCircle:E.Z}})}},8416:(e,t,o)=>{o.d(t,{Z:()=>n});var a=o(9909);const n={methods:{closeLoadingModal:function(){var e=new a.u_(document.getElementById("loadingModal"));document.getElementById("loadingModalContent").innerHTML="UPDATED SUCCESSFULLY",setTimeout((()=>{e.hide()}),1e3)},showLoadingModal:function(e){new a.u_(document.getElementById("loadingModal")).show(),document.getElementById("loadingModalContent").innerHTML=`Updating your ${e} details`}}}},9113:(e,t,o)=>{o.d(t,{Z:()=>a});const a={methods:{searchTrigger:function(e){""!=e.searchTimeout&&clearTimeout(e.searchTimeout),void 0===e.search?this.searchUndefined(e):this.searchDefined(e)},searchDefined:function(e){e.search.length>=3&&(e.searchTimeout=setTimeout(e.return_function,500,e.search,e.loading))},searchUndefined:function(e){e.searchTimeout=setTimeout(e.return_function,500)}}}}}]);