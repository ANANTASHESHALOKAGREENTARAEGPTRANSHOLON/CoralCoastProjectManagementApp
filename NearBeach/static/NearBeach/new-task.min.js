"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[5510],{6249:(t,e,s)=>{s.r(e),s.d(e,{default:()=>G});var o=s(6252),r=s(9963);const l={class:"card"},a={class:"card-body"},i=(0,o._)("h1",null,"New Task",-1),n=(0,o._)("hr",null,null,-1),d={class:"row"},u=(0,o._)("div",{class:"col-md-4"},[(0,o._)("h2",null,"Description"),(0,o._)("p",{class:"text-instructions"}," To create a new task, fill out the form and submit at the bottom of the page. ")],-1),p={class:"col-md-8",style:{"min-height":"610px"}},h={class:"form-group"},c=(0,o.Uk)("Task Short Description: "),k={key:0,class:"error"},g=(0,o._)("br",null,null,-1),m=(0,o.Uk)("Task Long Description: "),M={key:0,class:"error"},D=(0,o._)("br",null,null,-1),_=["src"],v=(0,o._)("hr",null,null,-1),S=(0,o._)("hr",null,null,-1),f=(0,o._)("hr",null,null,-1),w=(0,o._)("hr",null,null,-1),b={class:"row submit-row"},y={class:"col-md-12"};var T=s(6650),$=s(2587),q=s(7267),E=s(3301),U=s(2843),N=s(5511),C=s(1401),A=s(8734),R=s(3058);const I=s(9669),Z={name:"NewTask",setup:()=>({v$:(0,T.ZP)()}),components:{BetweenDates:N.Z,GetStakeholders:A.Z,GroupPermissions:C.Z,editor:q.Z,NSelect:E.Z,StakeholderInformation:U.Z},props:{groupResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},userGroupResults:{type:Array,default:()=>[]}},data:()=>({groupModel:{},stakeholderModel:"",taskDescriptionModel:"",taskEndDateModel:"",taskShortDescriptionModel:"",taskStartDateModel:""}),mixins:[R.Z],validations:{groupModel:{required:$.C1},stakeholderModel:{required:$.C1},taskDescriptionModel:{required:$.C1,maxLength:(0,$.BS)(63e4)},taskEndDateModel:{required:$.C1},taskShortDescriptionModel:{required:$.C1},taskStartDateModel:{required:$.C1}},methods:{submitNewTask:async function(){if(!await this.v$.$validate()&&(this.v$.groupModel.$error.length>0||this.v$.stakeholderModel.length>0||this.v$.taskDescriptionModel.length>0||this.v$.taskEndDateModel.length>0||this.v$.taskShortDescriptionModel.length>0||this.v$.taskStartDateModel.length>0))return void this.showValidationErrorModal();const t=new FormData;t.set("organisation",this.stakeholderModel),t.set("task_long_description",this.taskDescriptionModel),t.set("task_end_date",this.taskEndDateModel.toISOString()),t.set("task_short_description",this.taskShortDescriptionModel),t.set("task_start_date",this.taskStartDateModel.toISOString()),this.groupModel.forEach(((e,s)=>{t.append("group_list",e)})),I.post("save/",t).then((t=>{window.location.href=t.data})).catch((t=>{this.showErrorModal(t,this.destination)}))},updateDates:function(t){this.taskEndDateModel=new Date(t.end_date),this.taskStartDateModel=new Date(t.start_date)},updateGroupModel:function(t){this.groupModel=t},updateStakeholderModel:function(t){this.stakeholderModel=t}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl})}},G=(0,s(3744).Z)(Z,[["render",function(t,e,s,T,$,q){const E=(0,o.up)("editor"),U=(0,o.up)("get-stakeholders"),N=(0,o.up)("between-dates"),C=(0,o.up)("group-permissions");return(0,o.wg)(),(0,o.iD)("div",l,[(0,o._)("div",a,[i,n,(0,o._)("div",d,[(0,o.kq)(" DESCRIPTION "),u,(0,o.kq)(" Task FORM "),(0,o._)("div",p,[(0,o.kq)(" TASK NAME "),(0,o._)("div",h,[(0,o._)("label",null,[c,!T.v$.taskShortDescriptionModel.$error.length>0?((0,o.wg)(),(0,o.iD)("span",k," Please supply a title.")):(0,o.kq)("v-if",!0)]),(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>$.taskShortDescriptionModel=t),class:"form-control"},null,512),[[r.vModelText,$.taskShortDescriptionModel]])]),g,(0,o.kq)(" TASK DESCRIPTION "),(0,o._)("label",null,[m,!T.v$.taskDescriptionModel.$error.length>0?((0,o.wg)(),(0,o.iD)("span",M," Please supply a description.")):(0,o.kq)("v-if",!0)]),D,(0,o._)("img",{src:`${s.staticUrl}NearBeach/images/placeholder/body_text.svg`,class:"loader-image",alt:"loading image for Tinymce"},null,8,_),(0,o.Wm)(E,{init:{height:500,menubar:!1,plugins:"lists",toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | bullist numlist outdent indent | removeformat"]},content_css:!1,skin:!1,modelValue:$.taskDescriptionModel,"onUpdate:modelValue":e[1]||(e[1]=t=>$.taskDescriptionModel=t)},null,8,["modelValue"])])]),(0,o.kq)(" STAKEHOLDER ORGANISATION "),v,(0,o.Wm)(U,{onUpdate_stakeholder_model:e[2]||(e[2]=t=>q.updateStakeholderModel(t)),"is-dirty":T.v$.stakeholderModel.$error.length>0},null,8,["is-dirty"]),(0,o.kq)(" START DATE & END DATE "),S,(0,o.Wm)(N,{destination:"task",onUpdate_dates:e[3]||(e[3]=t=>q.updateDates(t))}),(0,o.kq)(" Group Permissions "),f,(0,o.Wm)(C,{"group-results":s.groupResults,destination:"task","user-group-results":s.userGroupResults,onUpdate_group_model:e[4]||(e[4]=t=>q.updateGroupModel(t)),"is-dirty":T.v$.groupModel.$error.length>0},null,8,["group-results","user-group-results","is-dirty"]),(0,o.kq)(" Submit Button "),w,(0,o._)("div",b,[(0,o._)("div",y,[(0,o._)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[5]||(e[5]=(...t)=>q.submitNewTask&&q.submitNewTask(...t))},"Create new Task")])])])])}]])}}]);