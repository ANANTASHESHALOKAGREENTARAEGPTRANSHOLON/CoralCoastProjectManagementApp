"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[510],{5885:(t,e,o)=>{o.r(e),o.d(e,{default:()=>I});var s=o(6252),r=o(9963);const l={class:"card"},a={class:"card-body"},i=(0,s._)("h1",null,"New Task",-1),n=(0,s._)("hr",null,null,-1),d={class:"row"},u=(0,s._)("div",{class:"col-md-4"},[(0,s._)("h2",null,"Description"),(0,s._)("p",{class:"text-instructions"}," To create a new task, fill out the form and submit at the bottom of the page. ")],-1),c={class:"col-md-8",style:{"min-height":"610px"}},p={class:"form-group"},h=(0,s.Uk)("Task Short Description: "),k={key:0,class:"error"},m=(0,s._)("br",null,null,-1),M=(0,s.Uk)("Task Long Description: "),g={key:0,class:"error"},_={key:1,class:"error"},y=(0,s._)("br",null,null,-1),D=["src"],v=(0,s._)("hr",null,null,-1),f=(0,s._)("hr",null,null,-1),S=(0,s._)("hr",null,null,-1),w=(0,s._)("hr",null,null,-1),b={class:"row submit-row"},E={class:"col-md-12"};var T=o(6650),$=o(2587),q=o(3058);const U=o(9669),C={name:"NewTask",setup:()=>({v$:(0,T.ZP)()}),props:{groupResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},userGroupResults:{type:Array,default:()=>[]}},data:()=>({groupModel:{},stakeholderModel:"",taskDescriptionModel:"",taskEndDateModel:"",taskShortDescriptionModel:"",taskStartDateModel:""}),mixins:[q.Z],validations:{groupModel:{required:$.C1},stakeholderModel:{required:$.C1},taskDescriptionModel:{required:$.C1,maxLength:(0,$.BS)(63e4)},taskEndDateModel:{required:$.C1},taskShortDescriptionModel:{required:$.C1},taskStartDateModel:{required:$.C1}},methods:{submitNewTask:function(){if(this.v$.$touch(),this.v$.$invalid)return void this.showValidationErrorModal();const t=new FormData;t.set("organisation",this.stakeholderModel.value),t.set("task_long_description",this.taskDescriptionModel),t.set("task_end_date",this.taskEndDateModel),t.set("task_short_description",this.taskShortDescriptionModel),t.set("task_start_date",this.taskStartDateModel),this.groupModel.forEach(((e,o)=>{t.append("group_list",e.value)})),U.post("save/",t).then((t=>{window.location.href=t.data})).catch((t=>{this.showErrorModal(t,this.destination)}))},updateDates:function(t){this.taskEndDateModel=t.end_date,this.taskStartDateModel=t.start_date},updateGroupModel:function(t){this.groupModel=t},updateStakeholderModel:function(t){this.stakeholderModel=t}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl})}},I=(0,o(3744).Z)(C,[["render",function(t,e,o,T,$,q){const U=(0,s.up)("editor"),C=(0,s.up)("get-stakeholders"),I=(0,s.up)("between-dates"),N=(0,s.up)("group-permissions");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",a,[i,n,(0,s._)("div",d,[(0,s.kq)(" DESCRIPTION "),u,(0,s.kq)(" Task FORM "),(0,s._)("div",c,[(0,s.kq)(" TASK NAME "),(0,s._)("div",p,[(0,s._)("label",null,[h,!T.v$.taskShortDescriptionModel.required&&T.v$.taskShortDescriptionModel.$dirty?((0,s.wg)(),(0,s.iD)("span",k," Please supply a title.")):(0,s.kq)("v-if",!0)]),(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>$.taskShortDescriptionModel=t),class:"form-control"},null,512),[[r.vModelText,$.taskShortDescriptionModel]])]),m,(0,s.kq)(" TASK DESCRIPTION "),(0,s._)("label",null,[M,!T.v$.taskDescriptionModel.required&&T.v$.taskDescriptionModel.$dirty?((0,s.wg)(),(0,s.iD)("span",g," Please supply a description.")):(0,s.kq)("v-if",!0),T.v$.taskDescriptionModel.maxLength?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("span",_," Sorry - too many characters."))]),y,(0,s._)("img",{src:`${o.staticUrl}NearBeach/images/placeholder/body_text.svg`,class:"loader-image",alt:"loading image for Tinymce"},null,8,D),(0,s.Wm)(U,{init:{height:500,menubar:!1,plugins:"lists",toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | bullist numlist outdent indent | removeformat"]},content_css:!1,skin:!1,modelValue:$.taskDescriptionModel,"onUpdate:modelValue":e[1]||(e[1]=t=>$.taskDescriptionModel=t)},null,8,["modelValue"])])]),(0,s.kq)(" STAKEHOLDER ORGANISATION "),v,(0,s.Wm)(C,{onUpdate_stakeholder_model:e[2]||(e[2]=t=>q.updateStakeholderModel(t)),"is-dirty":T.v$.stakeholderModel.$dirty},null,8,["is-dirty"]),(0,s.kq)(" START DATE & END DATE "),f,(0,s.Wm)(I,{destination:"task",onUpdate_dates:e[3]||(e[3]=t=>q.updateDates(t)),"is-dirty-end":T.v$.taskEndDateModel.$dirty||T.v$.taskStartDateModel.$dirty},null,8,["is-dirty-end"]),(0,s.kq)(" Group Permissions "),S,(0,s.Wm)(N,{"group-results":o.groupResults,destination:"task","user-group-results":o.userGroupResults,onUpdate_group_model:e[4]||(e[4]=t=>q.updateGroupModel(t)),"is-dirty":T.v$.groupModel.$dirty},null,8,["group-results","user-group-results","is-dirty"]),(0,s.kq)(" Submit Button "),w,(0,s._)("div",b,[(0,s._)("div",E,[(0,s._)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[5]||(e[5]=(...t)=>q.submitNewTask&&q.submitNewTask(...t))},"Create new Task")])])])])}]])},3058:(t,e,o)=>{o.d(e,{Z:()=>r});var s=o(9909);const r={methods:{showErrorModal:function(t,e,o){new s.u_(document.getElementById("loadingModal")).hide(),document.getElementById("errorModalContent").innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new requirement<hr>${t}`,new s.u_(document.getElementById("errorModal")).show()},showValidationErrorModal:function(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new s.u_(document.getElementById("errorModal")).show()}}}}}]);