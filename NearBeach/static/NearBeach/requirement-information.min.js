"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[349],{547:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Q});var s=l(6252),i=l(9963);const o={class:"card"},r={class:"card-body"},a=(0,s._)("h1",null,"Requirement Information",-1),n=(0,s._)("hr",null,null,-1),d={class:"row"},u=(0,s._)("div",{class:"col-md-4"},[(0,s._)("h2",null,"Description"),(0,s._)("p",{class:"text-instructions"}," Place a basic bird's eye view of the requirement description here. You will be able to break the requirement down into smaller components called 'Items' below in the 'Requirement Item' section. ")],-1),m={class:"col-md-8",style:{"min-height":"610px"}},c={class:"form-group"},h={for:"id_requirement_title"},p=(0,s.Uk)("Requirement Title: "),q={key:0,class:"error"},v=(0,s._)("br",null,null,-1),g=(0,s.Uk)("Requirement Scope: "),_={key:0,class:"error"},y={key:1,class:"error"},M=(0,s._)("br",null,null,-1),f=["src"],w=(0,s._)("hr",null,null,-1),k=(0,s._)("hr",null,null,-1),b={class:"row"},S=(0,s._)("div",{class:"col-md-4"},[(0,s._)("h2",null,"Status"),(0,s._)("p",{class:"text-instructions"},"Set the Requirement Status and Type here.")],-1),L={class:"col-md-8"},R={key:0,class:"col-md-12"},U={class:"row"},T={class:"col-md-6"},x={class:"form-group"},E=(0,s.Uk)("Requirement Status "),I={key:0,class:"error"},$={class:"col-md-6"},D={key:0,class:"alert alert-danger"},C={key:1,class:"col-md-12"},B=[(0,s._)("div",{class:"alert alert-info"}," Please note - this requirement is closed. ",-1)],V={class:"row"},F={class:"col-md-6"},P={class:"form-group"},Z=(0,s.Uk)("Requirement Type "),H={key:0,class:"error"},O=(0,s._)("hr",null,null,-1),W={key:0,class:"row submit-row"},j={class:"col-md-12"};l(9909);var Y=l(4250),A=l(6650),N=l(2587),z=l(3058),G=l(8416);const J=l(9669),K={name:"RequirementInformation",setup:()=>({v$:(0,A.ZP)()}),components:{},props:["defaultStakeholderImage","organisationResults","requirementResults","statusList","typeList","userLevel"],computed:{...(0,Y.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[z.Z,G.Z],data:()=>({isReadOnly:!1,requirementScopeModel:"",requirementTitleModel:"",stakeholderModel:"",statusFixList:[],statusModel:"",typeFixList:[],typeModel:""}),validations:{requirementScopeModel:{required:N.C1,maxLength:(0,N.BS)(63e4)},requirementTitleModel:{required:N.C1},statusModel:{required:N.C1},typeModel:{required:N.C1}},methods:{updateRequirement:function(){if(this.v$.$touch(),this.v$.$invalid)return void this.showValidationErrorModal();this.showLoadingModal("Requirement");const e=new FormData;e.set("requirement_title",this.requirementTitleModel),e.set("requirement_scope",this.requirementScopeModel),e.set("requirement_status",this.statusModel.value),e.set("requirement_type",this.typeModel.value),J.post("save/",e).then((e=>{this.closeLoadingModal(),this.statusModel.status_closed&&window.location.reload()})).catch((e=>{this.showErrorModal(e,this.destination)}))}},mounted(){var e=this.requirementResults[0].fields;this.requirementScopeModel=e.requirement_scope,this.requirementTitleModel=e.requirement_title,this.statusFixList=this.statusList.map((e=>({value:e.pk,status:e.fields.requirement_status,status_closed:e.fields.requirement_status_is_closed}))),this.typeList.forEach((e=>{var t={value:e.pk,type:e.fields.requirement_type};this.typeFixList.push(t)})),this.statusModel=this.statusFixList.filter((t=>t.value==e.requirement_status))[0],this.typeModel=this.typeFixList.filter((t=>t.value==e.requirement_type))[0],(this.statusModel.status_closed||1===this.userLevel)&&(this.isReadOnly=!0)}},Q=(0,l(3744).Z)(K,[["render",function(e,t,l,Y,A,N){const z=(0,s.up)("editor"),G=(0,s.up)("stakeholder-information"),J=(0,s.up)("v-select");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",r,[a,n,(0,s._)("div",d,[(0,s.kq)(" Description "),u,(0,s._)("div",m,[(0,s._)("div",c,[(0,s._)("label",h,[p,Y.v$.requirementTitleModel.required?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("span",q," Please suppy a title."))]),(0,s.wy)((0,s._)("input",{id:"id_requirement_title",class:"form-control",name:"requirement_title",type:"text",required:"true",maxlength:"255","onUpdate:modelValue":t[0]||(t[0]=e=>A.requirementTitleModel=e)},null,512),[[i.vModelText,A.requirementTitleModel]])]),v,(0,s._)("label",null,[g,Y.v$.requirementScopeModel.required?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("span",_," Please supply a scope.")),Y.v$.requirementScopeModel.maxLength?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("span",y," Sorry - too many characters."))]),M,(0,s._)("img",{src:`${e.staticUrl}NearBeach/images/placeholder/body_text.svg`,class:"loader-image",alt:"loading image for Tinymce"},null,8,f),(0,s.Wm)(z,{init:{height:500,menubar:!1,plugins:"lists",toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | bullist numlist outdent indent | removeformat"]},content_css:!1,disabled:A.isReadOnly,skin:!1,modelValue:A.requirementScopeModel,"onUpdate:modelValue":t[1]||(t[1]=e=>A.requirementScopeModel=e)},null,8,["disabled","modelValue"])])]),(0,s.kq)(" Stakeholder Information "),w,(0,s.Wm)(G,{"organisation-results":l.organisationResults,"default-stakeholder-image":l.defaultStakeholderImage},null,8,["organisation-results","default-stakeholder-image"]),(0,s.kq)(" Status "),k,(0,s._)("div",b,[S,(0,s._)("div",L,[A.statusModel.status_closed?((0,s.wg)(),(0,s.iD)("div",C,B)):((0,s.wg)(),(0,s.iD)("div",R,[(0,s._)("div",U,[(0,s._)("div",T,[(0,s._)("div",x,[(0,s._)("label",null,[E,!Y.v$.statusModel.required&&Y.v$.statusModel.$dirty?((0,s.wg)(),(0,s.iD)("span",I," Please select a status.")):(0,s.kq)("v-if",!0)]),(0,s.Wm)(J,{options:A.statusFixList,clearable:!1,label:"status",modelValue:A.statusModel,"onUpdate:modelValue":t[2]||(t[2]=e=>A.statusModel=e)},null,8,["options","modelValue"])])]),(0,s._)("div",$,[A.statusModel.status_closed?((0,s.wg)(),(0,s.iD)("div",D," Please note - saving the requirement with this status will close the requirement. ")):(0,s.kq)("v-if",!0)])])])),(0,s._)("div",V,[(0,s._)("div",F,[(0,s._)("div",P,[(0,s._)("label",null,[Z,!Y.v$.typeModel.required&&Y.v$.typeModel.$dirty?((0,s.wg)(),(0,s.iD)("span",H," Please select a type.")):(0,s.kq)("v-if",!0)]),(0,s.Wm)(J,{options:A.typeFixList,disabled:A.isReadOnly,clearable:!1,label:"type",modelValue:A.typeModel,"onUpdate:modelValue":t[3]||(t[3]=e=>A.typeModel=e)},null,8,["options","disabled","modelValue"])])])])])]),(0,s.kq)(" Submit Button "),O,l.userLevel>1?((0,s.wg)(),(0,s.iD)("div",W,[(0,s._)("div",j,[(0,s._)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[4]||(t[4]=(...e)=>N.updateRequirement&&N.updateRequirement(...e))},"Update Requirement")])])):(0,s.kq)("v-if",!0)])])}]])},3058:(e,t,l)=>{l.d(t,{Z:()=>i});var s=l(9909);const i={methods:{showErrorModal:function(e,t,l){new s.u_(document.getElementById("loadingModal")).hide(),document.getElementById("errorModalContent").innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new requirement<hr>${e}`,new s.u_(document.getElementById("errorModal")).show()},showValidationErrorModal:function(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new s.u_(document.getElementById("errorModal")).show()}}}},8416:(e,t,l)=>{l.d(t,{Z:()=>i});var s=l(9909);const i={methods:{closeLoadingModal:function(){var e=new s.u_(document.getElementById("loadingModal"));document.getElementById("loadingModalContent").innerHTML="UPDATED SUCCESSFULLY",setTimeout((()=>{e.hide()}),1e3)},showLoadingModal:function(e){new s.u_(document.getElementById("loadingModal")).show(),document.getElementById("loadingModalContent").innerHTML=`Updating your ${e} details`}}}}}]);