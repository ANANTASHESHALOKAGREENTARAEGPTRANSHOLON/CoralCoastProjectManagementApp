"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[949],{2361:(e,a,o)=>{o.r(a),o.d(a,{default:()=>T});var n=o(6252),t=o(9963);const r={class:"card"},l={class:"card-body"},s=(0,n._)("h1",null,"New Kanban",-1),d=(0,n._)("hr",null,null,-1),i={class:"row"},u=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Please note"),(0,n._)("p",{class:"text-instructions"}," Board names must be unique. ")],-1),c={class:"col-md-8"},m={class:"form-group"},p=(0,n.Uk)("Kanban Board Name "),h={key:0,class:"error"},b={key:1,class:"error"},k={key:2,class:"error"},_=(0,n._)("hr",null,null,-1),v={class:"row"},y=(0,n._)("div",{class:"col-md-4"},[(0,n._)("h2",null,"Columns & Levels"),(0,n._)("p",{class:"text-instructions"}," Drag the cards around to sort out the columns how you want them. ")],-1),M={class:"col-md-4"},g={class:"col-md-4"},w=(0,n._)("hr",null,null,-1),B=(0,n._)("hr",null,null,-1),N={class:"row submit-row"},f={class:"col-md-12"};var q=o(6650),K=o(2587),$=o(3058);const E=o(9669),C={name:"NewKanban",setup:()=>({v$:(0,q.ZP)()}),props:{groupResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},userGroupResults:{type:Array,default:()=>[]}},mixins:[$.Z],data:()=>({checkingKanbanBoardName:!1,columnModel:[{id:0,title:"Backlog"},{id:1,title:"Blocked"},{id:2,title:"In Progress"},{id:4,title:"Review and QA"},{id:5,title:"Completed"}],groupModel:[],kanbanBoardNameModel:"",levelModel:[{id:0,title:"Sprint 1"},{id:1,title:"Sprint 2"}],searchTimeout:"",uniqueKanbanBoardName:!0}),validations:{columnModel:{required:K.C1},groupModel:{required:K.C1},kanbanBoardNameModel:{required:K.C1},levelModel:{required:K.C1}},watch:{kanbanBoardNameModel:function(){this.checkingKanbanBoardName=!0,""!=this.searchTimeout&&clearTimeout(this.searchTimeout),void 0===this.kanbanBoardNameModel?this.searchTimeout=setTimeout(this.checkKanbanBoardName,500):this.kanbanBoardNameModel.length>=3&&(this.searchTimeout=setTimeout(this.checkKanbanBoardName,500,this.kanbanBoardNameModel,null))}},methods:{addNewKanban:function(){if(this.v$.$touch(),this.v$.$invalid||!this.uniqueKanbanBoardName||this.checkingKanbanBoardName)return void this.showValidationErrorModal();const e=new FormData;e.set("kanban_board_name",this.kanbanBoardNameModel),this.columnModel.forEach((a=>{e.append("column_title",a.title)})),this.levelModel.forEach((a=>{e.append("level_title",a.title)})),this.groupModel.forEach((a=>{e.append("group_list",a.value)})),E.post(`${this.rootUrl}new_kanban_save/`,e).then((e=>{window.location.href=e.data})).catch((e=>{}))},checkKanbanBoardName:function(){const e=new FormData;e.set("kanban_board_name",this.kanbanBoardNameModel),E.post(`${this.rootUrl}kanban_information/check_kanban_board_name/`,e).then((e=>{this.uniqueKanbanBoardName=0==e.data.length,this.checkingKanbanBoardName=!1})).catch((e=>{}))},updateGroupModel:function(e){this.groupModel=e},updatePropertyList:function(e){this[e.source]=e.data}}},T=(0,o(3744).Z)(C,[["render",function(e,a,o,q,K,$){const E=(0,n.up)("kanban-property-order"),C=(0,n.up)("group-permissions");return(0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("div",l,[s,d,(0,n._)("div",i,[(0,n.kq)(" DESCRIPTION "),u,(0,n.kq)(" BOARD NAME "),(0,n._)("div",c,[(0,n._)("div",m,[(0,n._)("label",null,[p,!q.v$.kanbanBoardNameModel.required&&q.v$.kanbanBoardNameModel.$dirty?((0,n.wg)(),(0,n.iD)("span",h," Please suppy a title. ")):(0,n.kq)("v-if",!0),K.uniqueKanbanBoardName?(0,n.kq)("v-if",!0):((0,n.wg)(),(0,n.iD)("span",b," Please supply a unique name")),K.checkingKanbanBoardName?((0,n.wg)(),(0,n.iD)("span",k," Checking kanban name...")):(0,n.kq)("v-if",!0)]),(0,n.wy)((0,n._)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[0]||(a[0]=e=>K.kanbanBoardNameModel=e)},null,512),[[t.vModelText,K.kanbanBoardNameModel]])])])]),_,(0,n.kq)(" Properties for the drag and drop coloumns/levels "),(0,n._)("div",v,[y,(0,n._)("div",M,[(0,n.Wm)(E,{"property-name":"Columns","property-list":K.columnModel,source:"columnModel","is-dirty":q.v$.columnModel.$dirty,onUpdate_property_list:a[1]||(a[1]=e=>$.updatePropertyList(e))},null,8,["property-list","is-dirty"])]),(0,n._)("div",g,[(0,n.Wm)(E,{"property-name":"Levels","property-list":K.levelModel,source:"levelModel","is-dirty":q.v$.columnModel.$dirty,onUpdate_property_list:a[2]||(a[2]=e=>$.updatePropertyList(e))},null,8,["property-list","is-dirty"])])]),(0,n.kq)(" Group Permissions "),w,(0,n.Wm)(C,{"group-results":o.groupResults,destination:"kanban_board","user-group-results":o.userGroupResults,onUpdate_group_model:a[3]||(a[3]=e=>$.updateGroupModel(e)),"is-dirty":q.v$.groupModel.$dirty},null,8,["group-results","user-group-results","is-dirty"]),(0,n.kq)(" SAVE "),B,(0,n._)("div",N,[(0,n._)("div",f,[(0,n._)("button",{class:"btn btn-primary save-changes",onClick:a[4]||(a[4]=(...e)=>$.addNewKanban&&$.addNewKanban(...e))}," Add Kanban ")])])])])}]])},3058:(e,a,o)=>{o.d(a,{Z:()=>t});var n=o(9909);const t={methods:{showErrorModal:function(e,a,o){new n.u_(document.getElementById("loadingModal")).hide(),document.getElementById("errorModalContent").innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new requirement<hr>${e}`,new n.u_(document.getElementById("errorModal")).show()},showValidationErrorModal:function(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new n.u_(document.getElementById("errorModal")).show()}}}}}]);