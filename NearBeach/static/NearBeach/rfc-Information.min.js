"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[2341],{1492:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Q});var a=l(6252),s=l(9963),r=l(3577);const o={class:"card"},n={class:"card-body"},i=(0,a._)("h1",null,"Request for Change",-1),d=(0,a._)("hr",null,null,-1),c=(0,a._)("hr",null,null,-1),u={class:"row"},m=(0,a._)("div",{class:"col-md-4"},[(0,a._)("h2",null,"Type and Version"),(0,a._)("p",{class:"text-instructions"}," Please specify how urgent this RFC's status really is. Optionally you can also specify the version or release number. ")],-1),f={class:"col-md-4"},p={class:"form-group"},h=(0,a.Uk)(" Request for Change Type: "),_={key:0,class:"error"},v={class:"col-md-4"},y={class:"form-group"},g=(0,a._)("label",null,"Version/Release Number",-1),M=(0,a._)("hr",null,null,-1),R={class:"row"},w=(0,a._)("div",{class:"col-md-4"},[(0,a._)("h2",null,"Important Dates"),(0,a._)("p",{class:"text-instructions"}," Please supply the implementation start and end dates. Please also suply the release date of the change to the general consumer. ")],-1),b={class:"row col-md-8"},C={class:"col-md-12"},L={key:0,class:"error"},S={class:"col-sm-4"},k={class:"form-group"},I=(0,a._)("label",null,"Implementation Start: ",-1),q={class:"col-sm-4"},E={class:"form-group"},U=(0,a._)("label",null,"Implementation End: ",-1),V={class:"col-sm-4"},$={class:"form-group"},T=(0,a._)("label",null,"Release Date: ",-1),D=(0,a._)("hr",null,null,-1),F={class:"row"},B=(0,a._)("div",{class:"col-md-4"},[(0,a._)("h2",null,"Change LEAD: "),(0,a._)("p",{class:"text-instructions"}," Please supply the LEAD who will be leading this Request for Change. ")],-1),x={class:"col-md-4"},P={class:"table user-table-module"},A=["src"],O=(0,a._)("div",{class:"spacer"},null,-1),W={class:"user-card-email"},H={key:0},N={key:1,class:"row submit-row"},Z={class:"col-md-12"};var j=l(3058),Y=l(8416),z=l(6650),G=l(2587);const J=l(9669),K={name:"RfcInformation",setup:()=>({v$:(0,z.ZP)()}),props:{groupLeaderCount:{type:Number,default:0},isReadOnly:{type:Boolean,default:!1},rfcChangeLead:{type:Array,default:()=>[]},rfcResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},userLevel:{type:Number,default:0}},computed:{checkDateValidation:function(){const e=!this.v$.rfcImplementationStartModel.required&&this.v$.rfcImplementationStartModel.$dirty,t=!this.v$.rfcImplementationEndModel.required&&this.v$.rfcImplementationEndModel.$dirty,l=!this.v$.rfcReleaseModel.required&&this.v$.rfcReleaseModel.$dirty;return e||t||l}},mixins:[j.Z,Y.Z],data(){return{rfcChangeLeadFixList:[],rfcChangeLeadModel:"",rfcTitleModel:this.rfcResults[0].fields.rfc_title,rfcSummaryModel:this.rfcResults[0].fields.rfc_summary,rfcImplementationStartModel:this.rfcResults[0].fields.rfc_implementation_start_date,rfcImplementationEndModel:this.rfcResults[0].fields.rfc_implementation_end_date,rfcReleaseModel:this.rfcResults[0].fields.rfc_implementation_release_date,rfcStatus:[{label:"Draft",value:1},{label:"Waiting for approval",value:2},{label:"Approved",value:3},{label:"Started",value:4},{label:"Finished",value:5},{label:"Rejected",value:6}],rfcType:[{label:"Emergency",value:4},{label:"High",value:3},{label:"Medium",value:2},{label:"Low",value:1}],rfcTypeModel:"",rfcVersionModel:this.rfcResults[0].fields.rfc_version_number}},validations:{rfcTitleModel:{required:G.C1},rfcSummaryModel:{required:G.C1,maxLength:(0,G.BS)(63e4)},rfcImplementationStartModel:{required:G.C1},rfcImplementationEndModel:{required:G.C1},rfcReleaseModel:{required:G.C1},rfcTypeModel:{required:G.C1},rfcVersionModel:{maxLength:(0,G.BS)(25)}},methods:{updateRFC:function(){if(this.v$.$touch(),this.v$.$invalid)return void this.showValidationErrorModal();const e=new FormData;e.set("rfc_title",this.rfcTitleModel),e.set("rfc_summary",this.rfcSummaryModel),e.set("rfc_type",this.rfcTypeModel.value),e.set("rfc_version_number",this.rfcVersionModel),e.set("rfc_implementation_start_date",this.rfcImplementationStartModel),e.set("rfc_implementation_end_date",this.rfcImplementationEndModel),e.set("rfc_implementation_release_date",this.rfcReleaseModel),this.showLoadingModal("Project"),J.post(`${this.rootUrl}rfc_information/${this.rfcResults[0].pk}/save/`,e).then((e=>{this.closeLoadingModal()})).catch((e=>{this.showErrorModal(e,this.destination)}))},updateRFCStatus:function(){const e=new FormData;e.set("rfc_status","2"),J.post(`${this.rootUrl}rfc_information/${this.rfcResults[0].pk}/update_status/`,e).then((e=>{window.location.reload(!0)})).catch((e=>{this.showErrorModal(e,"Request for Change",this.rfcResults[0].pk)}))},updateValues:function(e){this._data[e.modelName]=e.modelValue}},mounted(){this.rfcTypeModel=this.rfcType.filter((e=>e.value==this.rfcResults[0].fields.rfc_type))[0],this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl}),this.$store.commit({type:"updateUserLevel",userLevel:this.userLevel})}},Q=(0,l(3744).Z)(K,[["render",function(e,t,l,j,Y,z){const G=(0,a.up)("rfc-description"),J=(0,a.up)("v-select"),K=(0,a.up)("datetime");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",n,[i,d,(0,a.Wm)(G,{"rfc-results":l.rfcResults,"is-read-only":l.isReadOnly,onUpdate_values:t[0]||(t[0]=e=>z.updateValues(e))},null,8,["rfc-results","is-read-only"]),(0,a.kq)(" Request for Change Types and Release Number "),c,(0,a._)("div",u,[m,(0,a._)("div",f,[(0,a._)("div",p,[(0,a._)("label",null,[h,!j.v$.rfcTypeModel.required&&j.v$.rfcTypeModel.$dirty?((0,a.wg)(),(0,a.iD)("span",_," Please suppy a title.")):(0,a.kq)("v-if",!0)]),(0,a.Wm)(J,{options:Y.rfcType,disabled:l.isReadOnly,modelValue:Y.rfcTypeModel,"onUpdate:modelValue":t[1]||(t[1]=e=>Y.rfcTypeModel=e)},null,8,["options","disabled","modelValue"])])]),(0,a._)("div",v,[(0,a._)("div",y,[g,(0,a.wy)((0,a._)("input",{type:"text",maxlength:"25",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>Y.rfcVersionModel=e)},null,512),[[s.vModelText,Y.rfcVersionModel]])])])]),(0,a.kq)(" Implementation and Release Dates "),M,(0,a._)("div",R,[w,(0,a._)("div",b,[(0,a.kq)(" Validation row "),(0,a._)("div",C,[z.checkDateValidation?((0,a.wg)(),(0,a.iD)("span",L," Please select an appropriate date for ALL fields.")):(0,a.kq)("v-if",!0)]),(0,a.kq)(" Dates Row "),(0,a._)("div",S,[(0,a._)("div",k,[I,(0,a.Wm)(K,{type:"datetime",modelValue:Y.rfcImplementationStartModel,"onUpdate:modelValue":t[3]||(t[3]=e=>Y.rfcImplementationStartModel=e),"input-class":"form-control","minute-step":5},null,8,["modelValue"])])]),(0,a._)("div",q,[(0,a._)("div",E,[U,(0,a.Wm)(K,{type:"datetime",modelValue:Y.rfcImplementationEndModel,"onUpdate:modelValue":t[4]||(t[4]=e=>Y.rfcImplementationEndModel=e),"input-class":"form-control","minute-step":5},null,8,["modelValue"])])]),(0,a._)("div",V,[(0,a._)("div",$,[T,(0,a.Wm)(K,{type:"datetime",modelValue:Y.rfcReleaseModel,"onUpdate:modelValue":t[5]||(t[5]=e=>Y.rfcReleaseModel=e),"input-class":"form-control","minute-step":5},null,8,["modelValue"])])])])]),(0,a.kq)(" RFC Change Lead User "),D,(0,a._)("div",F,[B,(0,a._)("div",x,[(0,a._)("table",P,[(0,a._)("tbody",null,[(0,a._)("tr",null,[(0,a._)("td",null,[(0,a._)("img",{src:`${l.staticUrl}/NearBeach/images/placeholder/people_tax.svg`,alt:"default profile",class:"default-user-profile"},null,8,A)]),(0,a._)("td",null,[(0,a._)("strong",null,(0,r.toDisplayString)(l.rfcChangeLead[0].username)+": ",1),(0,a.Uk)((0,r.toDisplayString)(l.rfcChangeLead[0].first_name)+" "+(0,r.toDisplayString)(l.rfcChangeLead[0].last_name)+" ",1),O,(0,a._)("p",W,(0,r.toDisplayString)(l.rfcChangeLead[0].email),1)])])])])])]),(0,a.kq)(" Update Button "),l.isReadOnly?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("hr",H)),l.isReadOnly?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("div",N,[(0,a._)("div",Z,[l.userLevel>1?((0,a.wg)(),(0,a.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-dark",onClick:t[6]||(t[6]=(...e)=>z.updateRFCStatus&&z.updateRFCStatus(...e))},"Submit RFC for Approval")):(0,a.kq)("v-if",!0),l.userLevel>1?((0,a.wg)(),(0,a.iD)("a",{key:1,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[7]||(t[7]=(...e)=>z.updateRFC&&z.updateRFC(...e))},"Update Request for Change")):(0,a.kq)("v-if",!0)])]))])])}]])},3058:(e,t,l)=>{l.d(t,{Z:()=>s});var a=l(9909);const s={methods:{showErrorModal:function(e,t,l){new a.u_(document.getElementById("loadingModal")).hide(),document.getElementById("errorModalContent").innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new requirement<hr>${e}`,new a.u_(document.getElementById("errorModal")).show()},showValidationErrorModal:function(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new a.u_(document.getElementById("errorModal")).show()}}}},8416:(e,t,l)=>{l.d(t,{Z:()=>s});var a=l(9909);const s={methods:{closeLoadingModal:function(){var e=new a.u_(document.getElementById("loadingModal"));document.getElementById("loadingModalContent").innerHTML="UPDATED SUCCESSFULLY",setTimeout((()=>{e.hide()}),1e3)},showLoadingModal:function(e){new a.u_(document.getElementById("loadingModal")).show(),document.getElementById("loadingModalContent").innerHTML=`Updating your ${e} details`}}}}}]);