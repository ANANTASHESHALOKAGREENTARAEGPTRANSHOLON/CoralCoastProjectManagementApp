"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[616],{5090:(e,a,t)=>{t.r(a),t.d(a,{default:()=>Ba});var n=t(6252),l=t(3577);const o={class:"kanban-header"},s={key:0,class:"kanban-edit-text",href:"edit_board/"};var d=t(9909);const r={class:"kanban-header-row"},i={class:"kanban-header-row kanban-sticky-row",style:{display:"none"}},c={class:"kanban-level-header"},u={class:"kanban-level-div"};var m=t(5808);const b={class:"kanban-row"};var _=t(4250),k=t(9669),p=t.n(k),h=t(6542),v=t(2021),f=t.n(v);const g={name:"KanbanCard",components:{Icon:h.JO,draggable:f()},props:{columnId:{type:Number,default:0},levelId:{type:Number,default:0},newCardInfo:{type:Array,default:()=>[]}},data:()=>({drag:!1}),computed:{...(0,_.Se)({allCards:"getCards",rootUrl:"getRootUrl"}),masterList:function(){let e=this.allCards.filter((e=>parseInt(e.fields.kanban_column)===this.columnId&&parseInt(e.fields.kanban_level)===this.levelId));return e=e.sort(((e,a)=>e.fields.kanban_card_sort_number-a.fields.kanban_card_sort_number)),e}},mixins:[m.Z],methods:{addNewKanbanCard:function(){var e;(e=document.getElementById("addKanbanCardModal")).dataset.kanbanLevel=this.levelId,e.dataset.kanbanColumn=this.columnId,(e=new d.u_(e)).show()},addNewLink:function(){var e;(e=document.getElementById("newLinkModal")).dataset.kanbanLevel=this.levelId,e.dataset.kanbanColumn=this.columnId,(e=new d.u_(e)).show()},archiveCards:function(){const e=new FormData;this.masterList.forEach((a=>{e.append("kanban_card_id",a.pk)})),p().post(`${this.rootUrl}kanban_information/archive_kanban_cards/`,e).then((e=>{this.$store.commit({type:"archiveCards",column:this.columnId,level:this.levelId})})).catch((e=>{}))},checkCardOrder:function(){if(0===this.masterList.length)return;const e=this.masterList.map((e=>e.fields.kanban_card_sort_number)),a=Math.min.apply(null,e),t=Math.max.apply(null,e);0===a&&t===this.masterList.length-1||(document.getElementById("sort_error").style.display="flex",this.masterList.forEach(((e,a)=>{const t=new FormData;t.set("new_card_column",this.columnId.toString()),t.set("new_card_level",this.levelId.toString()),t.set("new_card_sort_number",a.toString()),t.set("old_card_column",e.fields.kanban_column),t.set("old_card_level",e.fields.kanban_level),t.set("old_card_sort_number",e.fields.kanban_card_sort_number),t.set("card_id",e.pk),p().post(`${this.rootUrl}kanban_information/${e.pk}/move_card/`,t).then((t=>{this.$store.commit({type:"updateKanbanCard",card_id:e.pk,kanban_column:this.columnId,kanban_level:this.levelId,kanban_card_sort_number:a})}))})),document.getElementById("sort_error").style.display="")},doubleClickCard:function(e){const a=this.masterList.filter((a=>a.pk==e.target.dataset.cardId))[0];this.sendDataUpstream(a)},dragDifferentColumn(e){let a=e.get("new_card_column"),t=e.get("new_card_level"),n=parseInt(e.get("new_card_sort_number")),l=e.get("old_card_column"),o=e.get("old_card_level"),s=parseInt(e.get("old_card_sort_number")),d=e.get("card_id"),r=[];return this.allCards.filter((e=>e.fields.kanban_column==a&&e.fields.kanban_level==t&&e.fields.kanban_card_sort_number>=n)).forEach((e=>{r.push({card_id:e.pk,kanban_column:a,kanban_level:t,kanban_card_sort_number:e.fields.kanban_card_sort_number+1})})),this.allCards.filter((e=>e.fields.kanban_column==l&&e.fields.kanban_level==o&&e.fields.kanban_card_sort_number>=s)).forEach((e=>{e.pk==d?r.push({card_id:e.pk,kanban_column:a,kanban_level:t,kanban_card_sort_number:n}):r.push({card_id:e.pk,kanban_column:l,kanban_level:o,kanban_card_sort_number:e.fields.kanban_card_sort_number-1})})),r},dragSameColumn(e){let a=parseInt(e.get("new_card_sort_number")),t=parseInt(e.get("old_card_sort_number")),n=parseInt(e.get("new_card_column")),l=parseInt(e.get("new_card_level")),o=parseInt(e.get("card_id")),s=1-2*(t<a),d=(a>=t)*a+(a<t)*t,r=(a>=t)*t+(a<t)*a;if(d===r)return[];let i=this.allCards.filter((e=>parseInt(e.fields.kanban_column)===n&&parseInt(e.fields.kanban_level)===l&&e.fields.kanban_card_sort_number>=r&&e.fields.kanban_card_sort_number<=d)),c=[];return i.forEach((e=>{e.pk==o?c.push({card_id:e.pk,kanban_column:n,kanban_level:l,kanban_card_sort_number:a}):c.push({card_id:e.pk,kanban_column:n,kanban_level:l,kanban_card_sort_number:e.fields.kanban_card_sort_number+s})})),c},onEnd:function(e){var a=e.to,t=e.from,n=e.item.dataset.cardId;let l=a.dataset.column,o=a.dataset.level,s=e.newIndex,d=t.dataset.column,r=t.dataset.level,i=e.oldIndex;const c=new FormData;c.set("new_card_column",l),c.set("new_card_level",o),c.set("new_card_sort_number",s),c.set("old_card_column",d),c.set("old_card_level",r),c.set("old_card_sort_number",i),c.set("card_id",n),p().post(`${this.rootUrl}kanban_information/${n}/move_card/`,c).then((e=>{let a=[];a=l===d&&o===r?this.dragSameColumn(c):this.dragDifferentColumn(c),a.forEach((e=>{this.$store.commit({type:"updateKanbanCard",card_id:e.card_id,kanban_column:e.kanban_column,kanban_level:e.kanban_level,kanban_card_sort_number:e.kanban_card_sort_number})}))})).catch((e=>{}))},sendDataUpstream:function(e){this.$store.commit({type:"updateCard",cardId:e.pk,cardTitle:e.fields.kanban_card_text,cardDescription:e.fields.kanban_card_description,cardColumn:e.fields.kanban_column,cardLevel:e.fields.kanban_level}),new d.u_(document.getElementById("cardInformationModal")).show()},singleClickCard:function(e){const a=this.masterList.filter((a=>a.pk==e))[0];this.sendDataUpstream(a)}},watch:{newCardInfo:function(){this.columnId==this.newCardInfo[0].fields.kanban_column&&this.levelId==this.newCardInfo[0].fields.kanban_level&&this.masterList.push(this.newCardInfo[0])}},mounted(){this.checkCardOrder()}};var C=t(3744);const y={name:"KanbanRow",components:{KanbanCard:(0,C.Z)(g,[["render",function(e,a,t,l,o,s){const d=(0,n.up)("draggable");return(0,n.wg)(),(0,n.j4)(d,{class:"list-group kanban-cell",group:"tasks",list:s.masterList,"item-key":"pk",onEnd:a[3]||(a[3]=e=>s.onEnd(e)),id:`kanban_cell_${t.levelId}_${t.columnId}`,"data-level":t.levelId,"data-column":t.columnId},{footer:(0,n.w5)((()=>[(0,n._)("a",{class:"kanban-link btn btn-primary",href:"javascript:void(0)",onClick:a[0]||(a[0]=(...e)=>s.addNewKanbanCard&&s.addNewKanbanCard(...e))}," New Card "),(0,n._)("a",{class:"kanban-link btn btn-warning",href:"javascript:void(0)",onClick:a[1]||(a[1]=(...e)=>s.addNewLink&&s.addNewLink(...e))}," Link Object "),s.masterList.length>0?((0,n.wg)(),(0,n.iD)("a",{key:0,class:"kanban-link btn btn-danger",href:"javascript:void(0)",onClick:a[2]||(a[2]=(...e)=>s.archiveCards&&s.archiveCards(...e))}," Archive Cards ")):(0,n.kq)("v-if",!0)])),_:1},8,["list","id","data-level","data-column"])}]])},props:{levelId:{type:Number,default:0},newCardInfo:{type:Array,default:()=>[]}},computed:{...(0,_.Se)({columnResults:"getColumns"})},methods:{doubleClickedCard:function(e){this.$emit("double_clicked_card",e)}}},w={name:"KanbanBoard",components:{KanbanRow:(0,C.Z)(y,[["render",function(e,a,t,l,o,s){const d=(0,n.up)("kanban-card");return(0,n.wg)(),(0,n.iD)("div",b,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.columnResults,(e=>((0,n.wg)(),(0,n.j4)(d,{key:e.pk,"level-id":t.levelId,"column-id":e.pk,"new-card-info":t.newCardInfo,onDouble_clicked_card:a[0]||(a[0]=e=>s.doubleClickedCard(e))},null,8,["level-id","column-id","new-card-info"])))),128))])}]])},props:{columnResults:{type:Array,default:()=>[]},kanbanBoardResults:{type:Array,default:()=>[]},kanbanCardResults:{type:Array,default:()=>[]},levelResults:{type:Array,default:()=>[]},newCardInfo:{type:Array,default:()=>[]}},mixins:[m.Z],data:()=>({}),created(){window.addEventListener("resize",this.resizeProcedure),window.addEventListener("scroll",this.scrollProcedure)},destroyed(){window.removeEventListener("resize",this.resizeProcedure),window.removeEventListener("scroll",this.scrollProcedure)},methods:{doubleClickedCard:function(e){this.$emit("double_clicked_card",e)},resizeProcedure:function(){const e=400*this.columnResults.length;let a=document.getElementsByClassName("kanban-container");if(a=a[0].clientWidth,e<a){var t=document.getElementsByClassName("kanban-level-div");Array.from(t).forEach((a=>{a.style=`max-width: ${e}px;`}))}else{let e=document.getElementsByClassName("kanban-level-div");Array.from(e).forEach((e=>{e.style="max-width: null;"}))}},scrollProcedure:function(){var e=document.getElementsByClassName("kanban-sticky-row")[0],a=document.getElementsByClassName("kanban-container")[0];e.scrollLeft=a.scrollLeft;var t=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;e.style.display=t<90?"none":""}},mounted(){this.resizeProcedure(),this.$store.commit({type:"initPayload",kanbanCardResults:this.kanbanCardResults,levelResults:this.levelResults,columnResults:this.columnResults})}},I=(0,C.Z)(w,[["render",function(e,a,t,o,s,d){const m=(0,n.up)("kanban-row");return(0,n.wg)(),(0,n.iD)("div",{class:"kanban-container",onScroll:a[1]||(a[1]=(...e)=>d.scrollProcedure&&d.scrollProcedure(...e))},[(0,n.kq)(" Render out the header "),(0,n._)("div",r,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.columnResults,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"kanban-column-header",key:e.pk},(0,l.toDisplayString)(e.fields.kanban_column_name),1)))),128))]),(0,n.kq)(" Render out the STICKY header "),(0,n._)("div",i,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.columnResults,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"kanban-column-header",key:e.pk},(0,l.toDisplayString)(e.fields.kanban_column_name),1)))),128))]),(0,n.kq)(" Render each row "),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.levelResults,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e.pk},[(0,n.kq)(" CREATE THE LEVEL HEADER "),(0,n._)("div",c,[(0,n._)("div",u,(0,l.toDisplayString)(e.fields.kanban_level_name),1)]),(0,n.kq)(" RENDER THE CELLS "),(0,n.Wm)(m,{"level-id":e.pk,"new-card-info":t.newCardInfo,onDouble_clicked_card:a[0]||(a[0]=e=>d.doubleClickedCard(e))},null,8,["level-id","new-card-info"])])))),128))],32)}]]);var M=t(9963);const D=["data-kanban-level","data-kanban-column"],R={class:"modal-dialog modal-lg"},L={class:"modal-content"},E={class:"modal-header"},S=(0,n.Uk)(" Add Kanban Card Wizard"),N=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addKanbanCardCloseButton"},null,-1),T={class:"modal-body"},$={class:"row"},U=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Please note"),(0,n._)("p",{class:"text-instructions"}," The card names can not be the same as something that already exists on the board. ")],-1),x={class:"col-md-8"},B=(0,n._)("label",null,"Kanban Card Text",-1),Z={class:"row"},j=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Card Description"),(0,n._)("p",{class:"text-instructions"},' Fill out a detailed description for the card, then click on the "Update Card" button to update the card. ')],-1),K={class:"col-md-8"},A={class:"modal-footer"},q=(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),O=["disabled"];var H=t(7267);const W={name:"NewKanbanCard",components:{editor:H.Z,Icon:h.JO},props:{columnResults:{type:Array,default:()=>[]},kanbanCardResults:{type:Array,default:()=>[]},levelResults:{type:Array,default:()=>[]},kanbanBoardResults:{type:Array,default:()=>[]}},mixins:[m.Z],data:()=>({disableAddButton:!0,kanbanCardDescriptionModel:"",kanbanCardTextModel:""}),computed:{...(0,_.Se)({rootUrl:"getRootUrl"})},methods:{addKanbanCard:function(){var e=document.getElementById("addKanbanCardModal");const a=new FormData;a.set("kanban_card_text",this.kanbanCardTextModel),a.set("kanban_card_description",this.kanbanCardDescriptionModel),a.set("kanban_level",e.dataset.kanbanLevel),a.set("kanban_column",e.dataset.kanbanColumn),p().post(`${this.rootUrl}kanban_information/${this.kanbanBoardResults[0].pk}/new_card/`,a).then((e=>{this.$emit("new_card",e.data),this.kanbanCardTextModel="",this.kanbanCardDescriptionModel="",document.getElementById("addKanbanCardCloseButton").click()})).catch((e=>{}))}},watch:{kanbanCardTextModel:function(){this.disableAddButton=!1,0==this.kanbanCardTextModel.length&&(this.disableAddButton=!0),this.kanbanCardResults.filter((e=>e.fields.kanban_card_text==this.kanbanCardTextModel)).length>0&&(this.disableAddButton=!0),0!=this.columnResults.length&&0!=this.levelResults.length||(this.disableAddButton=!0)}}},P=(0,C.Z)(W,[["render",function(e,a,t,l,o,s){const d=(0,n.up)("Icon"),r=(0,n.up)("editor");return(0,n.wg)(),(0,n.iD)("div",{class:"modal fade",id:"addKanbanCardModal",tabindex:"-1","aria-labelledby":"addKanbanCardModalLabel","aria-hidden":"true","data-kanban-level":t.levelResults[0].pk,"data-kanban-column":t.columnResults[0].pk},[(0,n._)("div",R,[(0,n._)("div",L,[(0,n._)("div",E,[(0,n._)("h2",null,[(0,n.Wm)(d,{icon:e.icons.cardChecklist},null,8,["icon"]),S]),N]),(0,n._)("div",T,[(0,n._)("div",$,[U,(0,n._)("div",x,[B,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>o.kanbanCardTextModel=e),onKeydown:a[1]||(a[1]=(0,M.withKeys)(((...e)=>s.addKanbanCard&&s.addKanbanCard(...e)),["enter"])),class:"form-control"},null,544),[[M.vModelText,o.kanbanCardTextModel]])])]),(0,n.kq)(" CARD DESCRIPTION "),(0,n._)("div",Z,[j,(0,n._)("div",K,[(0,n.Wm)(r,{init:{height:300,menubar:!1,plugins:"lists",toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | bullist numlist outdent indent | removeformat"]},content_css:!1,skin:!1,modelValue:o.kanbanCardDescriptionModel,"onUpdate:modelValue":a[2]||(a[2]=e=>o.kanbanCardDescriptionModel=e)},null,8,["modelValue"])])])]),(0,n._)("div",A,[q,(0,n._)("button",{type:"button",class:"btn btn-primary",onClick:a[3]||(a[3]=(...e)=>s.addKanbanCard&&s.addKanbanCard(...e)),disabled:o.disableAddButton}," Add Link ",8,O)])])])],8,D)}]]),V={class:"modal fade",id:"cardInformationModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Y={class:"modal-dialog modal-lg"},z={class:"modal-content"},F={class:"modal-header"},J=(0,n.Uk)(" Card Information"),G=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"cardInformationModalCloseButton"},[(0,n._)("span",{"aria-hidden":"true"})],-1),Q={class:"modal-body"},X=(0,n._)("ul",{id:"card_information_tabs",class:"nav nav-tabs",role:"tablist"},[(0,n._)("li",{class:"nav-item",role:"presentation"},[(0,n._)("button",{class:"nav-link active",id:"details-tab","data-bs-toggle":"tab","data-bs-target":"#card_details",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"},"Details")]),(0,n._)("li",{class:"nav-item",role:"presentation"},[(0,n._)("button",{class:"nav-link",id:"description-tab","data-bs-toggle":"tab","data-bs-target":"#card_description",type:"button",role:"tab","aria-controls":"profile","aria-selected":"false"},"Description")]),(0,n._)("li",{class:"nav-item",role:"presentation"},[(0,n._)("button",{class:"nav-link",id:"notes-tab","data-bs-toggle":"tab","data-bs-target":"#card_notes",type:"button",role:"tab","aria-controls":"contact","aria-selected":"false"},"Notes")])],-1),ee=(0,n._)("hr",null,null,-1),ae={class:"tab-content",id:"myTabContent"},te={class:"tab-pane fade show active",id:"card_details",role:"tabpanel","aria-labelledby":"details-tab"},ne={class:"tab-pane fade",id:"card_description",role:"tabpanel","aria-labelledby":"description-tab"},le={class:"tab-pane fade",id:"card_notes",role:"tabpanel","aria-labelledby":"notes-tab"},oe={class:"row"},se=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Card Title"),(0,n._)("p",{class:"text-instructions"},' Write an appropriate name for the kanban card. To update click on the "Update" button. ')],-1),de={class:"col-md-8"},re=(0,n._)("label",null,"Card Title",-1),ie=(0,n._)("hr",null,null,-1),ce={class:"row"},ue=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Card Location"),(0,n._)("p",{class:"text-instructions"}," Select the appropriate location for this card. ")],-1),me={class:"col-md-8"},be={class:"row"},_e={class:"col-md-12 mt-4"},ke=(0,n._)("label",null,"Card Column",-1),pe={class:"col-md-12 mt-4"},he=(0,n._)("label",null,"Card Level",-1),ve=(0,n._)("hr",null,null,-1),fe={class:"row"},ge={class:"col-md-12"};var Ce=t(6761);t(9669);const ye={name:"CardDetails",components:{NSelect:Ce.Z},data:()=>({tempModel:""}),computed:{cardId:{get(){return this.$store.cardId},set(e){this.$store.commit("updateValue",{field:"cardId",value:e})}},cardTitle:{get(){return this.$store.cardTitle},set(e){this.$store.commit("updateValue",{field:"cardTitle",value:e})}},cardColumn:{get(){return this.$store.cardColumn},set(e){this.$store.commit("updateValue",{field:"cardColumn",value:e})}},cardLevel:{get(){return this.$store.cardLevel},set(e){this.$store.commit("updateValue",{field:"cardLevel",value:e})}},listColumns:{get(){return this.$store.listColumns},set(e){this.$store.commit("updateValue",{field:"listColumns",value:e})}},listLevels:{get(){return this.$store.listLevels},set(e){this.$store.commit("updateValue",{field:"listLevels",value:e})}}},methods:{closeModal:function(){document.getElementById("cardInformationModalCloseButton").click()},updateCard:function(){this.$store.commit({type:"updateKanbanCard",card_id:this.cardId,kanban_card_text:this.cardTitle,kanban_column:this.cardColumn,kanban_level:this.cardLevel}),this.$emit("update_card")}}},we=(0,C.Z)(ye,[["render",function(e,a,t,l,o,s){const d=(0,n.up)("n-select");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.kq)(" Card Text "),(0,n._)("div",oe,[se,(0,n._)("div",de,[re,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>s.cardTitle=e),class:"form-control"},null,512),[[M.vModelText,s.cardTitle]])])]),ie,(0,n.kq)(" CARD LOCATION "),(0,n._)("div",ce,[ue,(0,n._)("div",me,[(0,n._)("div",be,[(0,n._)("div",_e,[ke,(0,n.Wm)(d,{options:s.listColumns,label:"column",value:s.cardColumn,"onUpdate:value":a[1]||(a[1]=e=>s.cardColumn=e)},null,8,["options","value"])]),(0,n._)("div",pe,[he,(0,n.Wm)(d,{options:s.listLevels,label:"level",value:s.cardLevel,"onUpdate:value":a[2]||(a[2]=e=>s.cardLevel=e)},null,8,["options","value"])])])])]),ve,(0,n._)("div",fe,[(0,n._)("div",ge,[(0,n._)("button",{class:"btn btn-secondary",onClick:a[3]||(a[3]=(...e)=>s.closeModal&&s.closeModal(...e))}," Close Modal "),(0,n._)("button",{class:"btn btn-primary save-changes",onClick:a[4]||(a[4]=(...e)=>s.updateCard&&s.updateCard(...e))}," Update Card ")])])])}]]),Ie={class:"row"},Me=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Notes"),(0,n._)("p",{class:"text-instructions"},' To add a note - type your note in the Note Box and hit the "Submit Note" button. ')],-1),De={class:"col-md-8"},Re=(0,n._)("label",null,"Note Box",-1),Le=(0,n._)("hr",null,null,-1),Ee={class:"row"},Se={class:"col-md-12"},Ne=["disabled"],Te=(0,n._)("hr",null,null,-1);var $e=t(7807);const Ue=t(9669),xe={name:"CardNotes",components:{editor:H.Z,ListNotes:$e.Z},props:{},data:()=>({cardNoteModel:""}),computed:{...(0,_.Se)({cardNotes:"getCardNotes",rootUrl:"getRootUrl"})},methods:{addNote:function(){const e=new FormData;e.set("note",this.cardNoteModel),Ue.post(`${this.rootUrl}object_data/kanban_card/${this.$store.state.card.cardId}/add_notes/`,e).then((e=>{this.$store.commit({type:"appendNote",newNote:e.data[0]}),this.cardNoteModel=""})).catch((e=>{}))},closeModal:function(){document.getElementById("cardInformationModalCloseButton").click()}}},Be=(0,C.Z)(xe,[["render",function(e,a,t,l,o,s){const d=(0,n.up)("editor"),r=(0,n.up)("list-notes");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",Ie,[Me,(0,n._)("div",De,[Re,(0,n.Wm)(d,{init:{height:250,menubar:!1,plugins:"lists",toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | bullist numlist outdent indent | removeformat"]},content_css:!1,skin:!1,modelValue:o.cardNoteModel,"onUpdate:modelValue":a[0]||(a[0]=e=>o.cardNoteModel=e)},null,8,["modelValue"])])]),Le,(0,n._)("div",Ee,[(0,n._)("div",Se,[(0,n._)("button",{class:"btn btn-secondary",onClick:a[1]||(a[1]=(...e)=>s.closeModal&&s.closeModal(...e))}," Close Modal "),(0,n._)("button",{class:"btn btn-primary save-changes",onClick:a[2]||(a[2]=(...e)=>s.addNote&&s.addNote(...e)),disabled:""===o.cardNoteModel}," Add Note ",8,Ne)])]),Te,(0,n.kq)(" NOTE HISTORY "),(0,n.Wm)(r,{"note-history-results":e.cardNotes,destination:"card"},null,8,["note-history-results"])])}]]),Ze={class:"row"},je=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Card Description"),(0,n._)("p",{class:"text-instructions"},' Fill out a detailed description for the card, then click on the "Update Card" button to update the card. ')],-1),Ke={class:"col-md-8"},Ae=(0,n._)("hr",null,null,-1),qe={class:"row"},Oe={class:"col-md-12"};t(9669);const He={name:"CardDescription",components:{editor:H.Z},props:{},data:()=>({}),computed:{cardDescription:{get(){return this.$store.cardDescription},set(e){this.$store.commit("updateValue",{field:"cardDescription",value:e})}}},methods:{closeModal:function(){document.getElementById("cardInformationModalCloseButton").click()},updateCard:function(){this.$emit("update_card")}}},We={name:"CardInformation",components:{CardDescription:(0,C.Z)(He,[["render",function(e,a,t,l,o,s){const d=(0,n.up)("editor");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",Ze,[je,(0,n._)("div",Ke,[(0,n.Wm)(d,{init:{height:300,menubar:!1,plugins:"lists",toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | bullist numlist outdent indent | removeformat"]},content_css:!1,skin:!1,modelValue:s.cardDescription,"onUpdate:modelValue":a[0]||(a[0]=e=>s.cardDescription=e)},null,8,["modelValue"])])]),Ae,(0,n._)("div",qe,[(0,n._)("div",Oe,[(0,n._)("button",{class:"btn btn-secondary",onClick:a[1]||(a[1]=(...e)=>s.closeModal&&s.closeModal(...e))}," Close Modal "),(0,n._)("button",{class:"btn btn-primary save-changes",onClick:a[2]||(a[2]=(...e)=>s.updateCard&&s.updateCard(...e))}," Update Card ")])])])}]]),CardDetails:we,CardNotes:Be,Icon:h.JO},mixins:[m.Z],data:()=>({cardId:"",cardDescriptionModel:"",cardNoteModel:"",cardTitleModel:"",noteHistoryResults:[]}),computed:{...(0,_.Se)({rootUrl:"getRootUrl"})},methods:{updateCard:function(){const e=this.$store.getters.getAllCardData,a=new FormData;a.set("kanban_card_text",e.cardTitle),a.set("kanban_card_description",e.cardDescription),a.set("kanban_level",e.cardLevel.value),a.set("kanban_column",e.cardColumn.value),a.set("kanban_card_id",e.cardId),p().post(`${this.rootUrl}kanban_information/update_card/`,a).then((a=>{this.$emit("update_card",{kanban_card_id:e.cardId,kanban_card_text:e.cardTitle,kanban_column:e.cardColumn,kanban_level:e.cardLevel}),document.getElementById("cardInformationModalCloseButton").click()})).catch((e=>{}))}}},Pe=(0,C.Z)(We,[["render",function(e,a,t,l,o,s){const d=(0,n.up)("Icon"),r=(0,n.up)("card-details"),i=(0,n.up)("card-description"),c=(0,n.up)("card-notes");return(0,n.wg)(),(0,n.iD)("div",V,[(0,n._)("div",Y,[(0,n._)("div",z,[(0,n._)("div",F,[(0,n._)("h2",null,[(0,n.Wm)(d,{icon:e.icons.usersIcon},null,8,["icon"]),J]),G]),(0,n._)("div",Q,[(0,n.kq)(" TAB MENU "),X,ee,(0,n.kq)(" CONTENT OF TABS "),(0,n._)("div",ae,[(0,n._)("div",te,[(0,n.Wm)(r,{onUpdate_card:s.updateCard},null,8,["onUpdate_card"])]),(0,n._)("div",ne,[(0,n.Wm)(i,{onUpdate_card:s.updateCard},null,8,["onUpdate_card"])]),(0,n._)("div",le,[(0,n.Wm)(c)])])])])])])}]]),Ve=["data-kanban-level","data-kanban-column"],Ye={class:"modal-dialog modal-lg"},ze={class:"modal-content"},Fe={class:"modal-header"},Je=(0,n.Uk)(" New Kanban Link Wizard"),Ge=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"requirementLinkCloseButton"},[(0,n._)("span",{"aria-hidden":"true"})],-1),Qe={class:"modal-body"},Xe={class:"row"},ea=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Object Selector"),(0,n._)("p",{class:"text-instructions"}," Please select which object you would like to link to this requirement. ")],-1),aa={class:"col-md-8"},ta={key:1,class:"alert alert-success"},na=(0,n._)("hr",null,null,-1),la={class:"row"},oa=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Select Links"),(0,n._)("p",{class:"text-instructions"}," Please select which of the objects you want to connect to this requirement. ")],-1),sa={class:"col-md-8"},da={key:0,id:"link_wizard_results"},ra=["src"],ia={key:1,class:"alert alert-warning"},ca={key:2,class:"table"},ua=(0,n._)("td",null,"Status",-1),ma={key:0},ba={class:"form-check"},_a=["value","id"],ka=["for"],pa=(0,n._)("div",{class:"spacer"},null,-1),ha={class:"small-text"},va={key:1},fa={class:"form-check"},ga=["value","id"],Ca=["for"],ya=(0,n._)("div",{class:"spacer"},null,-1),wa={class:"small-text"},Ia={key:2},Ma={class:"form-check"},Da=["value","id"],Ra=["for"],La=(0,n._)("div",{class:"spacer"},null,-1),Ea={class:"small-text"},Sa={class:"modal-footer"},Na=(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),Ta=["disabled"];var $a=t(3058);const Ua={name:"NewKanbanLinkWizard",components:{Icon:h.JO,NSelect:Ce.Z},props:{columnResults:{type:Array,default:()=>[]},levelResults:{type:Array,default:()=>[]},locationId:{type:Number,default:0}},computed:{...(0,_.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[$a.Z,m.Z],data:()=>({isSearching:!1,objectModel:null,objectResults:[],objectSelection:["Project","Requirement","Task"],linkModel:[]}),methods:{saveLinks:function(){const e=new FormData;var a=document.getElementById("newLinkModal");e.set(`${this.objectModel.toLowerCase()}`,this.linkModel),e.set("kanban_level",a.dataset.kanbanLevel),e.set("kanban_column",a.dataset.kanbanColumn),p().post(`${this.rootUrl}kanban_information/${this.locationId}/${this.objectModel.toLowerCase()}/add_link/`,e).then((e=>{this.$emit("new_card",e.data),this.objectModel=null,document.getElementById("requirementLinkCloseButton").click()}))}},watch:{objectModel:function(){this.linkModel=[],null!==this.objectModel?(this.isSearching=!0,p().post(`${this.rootUrl}kanban_information/${this.locationId}/${this.objectModel}/link_list/`).then((e=>{this.objectResults=e.data,this.isSearching=!1})).catch((e=>{this.showErrorModal(e,"kanban")}))):this.isSearching=!1},linkModel:function(){}}},xa={name:"KanbanInformation",components:{CardInformation:Pe,KanbanBoard:I,NewKanbanCard:P,NewKanbanLinkWizard:(0,C.Z)(Ua,[["render",function(e,a,t,o,s,d){const r=(0,n.up)("Icon"),i=(0,n.up)("n-select");return(0,n.wg)(),(0,n.iD)("div",{class:"modal fade",id:"newLinkModal",tabindex:"-1","aria-labelledby":"kanbanLinkModal","aria-hidden":"true","data-kanban-level":t.levelResults[0].pk,"data-kanban-column":t.columnResults[0].pk},[(0,n._)("div",Ye,[(0,n._)("div",ze,[(0,n._)("div",Fe,[(0,n._)("h2",null,[(0,n.Wm)(r,{icon:e.icons.linkOut},null,8,["icon"]),Je]),Ge]),(0,n._)("div",Qe,[(0,n.kq)(" CHOOSING A OBJECT TYPE "),(0,n._)("div",Xe,[ea,(0,n._)("div",aa,[s.isSearching?((0,n.wg)(),(0,n.iD)("div",ta," Searching for "+(0,l.toDisplayString)(s.objectModel)+"s ",1)):((0,n.wg)(),(0,n.j4)(i,{key:0,options:s.objectSelection,value:s.objectModel,"onUpdate:value":a[0]||(a[0]=e=>s.objectModel=e),class:"object-selection"},null,8,["options","value"]))])]),na,(0,n.kq)(" SELECTING WHICH OBJECTS TO LINK TO "),(0,n._)("div",la,[oa,(0,n._)("div",sa,[(0,n.kq)(" LOADING PLACEHOLDER "),s.isSearching||null==s.objectModel?((0,n.wg)(),(0,n.iD)("div",da,[(0,n._)("img",{src:`${e.staticUrl}/NearBeach/images/placeholder/search.svg`,alt:"Searching..."},null,8,ra)])):(0,n.kq)("v-if",!0),0==s.objectResults.length&&null!=s.objectModel?((0,n.wg)(),(0,n.iD)("div",ia," Sorry - there are no results. ")):(0,n.kq)("v-if",!0),(0,n.kq)(" TABLE CONTAINING RESULTS "),!s.isSearching&&s.objectResults.length>0&&null!=s.objectModel?((0,n.wg)(),(0,n.iD)("table",ca,[(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("td",null,(0,l.toDisplayString)(s.objectModel)+" Description",1),ua])]),(0,n.kq)(" PROJECTS "),"Project"==s.objectModel?((0,n.wg)(),(0,n.iD)("tbody",ma,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.objectResults,(e=>((0,n.wg)(),(0,n.iD)("tr",null,[(0,n._)("td",null,[(0,n._)("div",ba,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"radio",name:"link-option",value:e.pk,id:`radio_project_${e.pk}`,"onUpdate:modelValue":a[1]||(a[1]=e=>s.linkModel=e)},null,8,_a),[[M.vModelRadio,s.linkModel]]),(0,n._)("label",{class:"form-check-label",for:`radio_project_${e.pk}`},(0,l.toDisplayString)(e.fields.project_name),9,ka)]),pa,(0,n._)("p",ha,"Project "+(0,l.toDisplayString)(e.pk),1)]),(0,n._)("td",null,(0,l.toDisplayString)(e.fields.project_status),1)])))),256))])):(0,n.kq)("v-if",!0),(0,n.kq)(" REQUIREMENTS "),"Requirement"==s.objectModel?((0,n.wg)(),(0,n.iD)("tbody",va,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.objectResults,(e=>((0,n.wg)(),(0,n.iD)("tr",null,[(0,n._)("td",null,[(0,n._)("div",fa,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"radio",name:"link-option",value:e.pk,id:`radio_requirement_${e.pk}`,"onUpdate:modelValue":a[2]||(a[2]=e=>s.linkModel=e)},null,8,ga),[[M.vModelRadio,s.linkModel]]),(0,n._)("label",{class:"form-check-label",for:`radio_task_${e.pk}`},(0,l.toDisplayString)(e.fields.requirement_title),9,Ca)]),ya,(0,n._)("p",wa,"Requirement "+(0,l.toDisplayString)(e.pk),1)]),(0,n._)("td",null,(0,l.toDisplayString)(e.fields.requirement_status),1)])))),256))])):(0,n.kq)("v-if",!0),(0,n.kq)(" TASKS "),"Task"==s.objectModel?((0,n.wg)(),(0,n.iD)("tbody",Ia,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.objectResults,(e=>((0,n.wg)(),(0,n.iD)("tr",null,[(0,n._)("td",null,[(0,n._)("div",Ma,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"radio",value:e.pk,id:`radio_task_${e.pk}`,"onUpdate:modelValue":a[3]||(a[3]=e=>s.linkModel=e)},null,8,Da),[[M.vModelRadio,s.linkModel]]),(0,n._)("label",{class:"form-check-label",for:`radio_task_${e.pk}`},(0,l.toDisplayString)(e.fields.task_short_description),9,Ra)]),La,(0,n._)("p",Ea,"Task "+(0,l.toDisplayString)(e.pk),1)]),(0,n._)("td",null,(0,l.toDisplayString)(e.fields.task_status),1)])))),256))])):(0,n.kq)("v-if",!0)])):(0,n.kq)("v-if",!0)])])]),(0,n._)("div",Sa,[Na,(0,n._)("button",{type:"button",class:"btn btn-primary",disabled:0==s.linkModel.length,onClick:a[4]||(a[4]=(...e)=>d.saveLinks&&d.saveLinks(...e))},"Save changes",8,Ta)])])])],8,Ve)}]])},props:{columnResults:{type:Array,default:()=>[]},kanbanBoardResults:{type:Array,default:()=>[]},kanbanCardResults:{type:Array,default:()=>[]},levelResults:{type:Array,default:()=>[]},locationId:{type:Number,default:0},rootUrl:{type:String,default:"/"},userLevel:{type:Number,default:0}},data(){return{cardInformation:{},localKanbanCardResults:this.kanbanCardResults,newCardInfo:[]}},methods:{doubleClickedCard:function(e){this.cardInformation=e},newCard:function(e){this.$store.commit({type:"addCard",newCard:e})},updateCard:function(e){this.localKanbanCardResults.forEach((a=>{a.pk==e.kanban_card_id&&(a.fields.kanban_card_text=e.kanban_card_text,a.fields.kanban_column=e.kanban_column.value,a.fields.kanban_level=e.kanban_level.value)}))}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl}),this.$store.commit({type:"updateLists",columnResults:this.columnResults,levelResults:this.levelResults})}},Ba=(0,C.Z)(xa,[["render",function(e,a,t,d,r,i){const c=(0,n.up)("kanban-board"),u=(0,n.up)("new-kanban-card"),m=(0,n.up)("card-information"),b=(0,n.up)("new-kanban-link-wizard");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("h1",o,(0,l.toDisplayString)(t.kanbanBoardResults[0].fields.kanban_board_name),1),t.userLevel>=3?((0,n.wg)(),(0,n.iD)("a",s," Edit Kanban ")):(0,n.kq)("v-if",!0),(0,n.kq)(" Rendering the Kanban Container "),(0,n.Wm)(c,{"column-results":t.columnResults,"kanban-board-results":t.kanbanBoardResults,"kanban-card-results":r.localKanbanCardResults,"level-results":t.levelResults,"new-card-info":r.newCardInfo,onDouble_clicked_card:a[0]||(a[0]=e=>i.doubleClickedCard(e))},null,8,["column-results","kanban-board-results","kanban-card-results","level-results","new-card-info"]),(0,n.kq)(" MODALS "),(0,n.Wm)(u,{"kanban-card-results":t.kanbanCardResults,"column-results":t.columnResults,"level-results":t.levelResults,"kanban-board-results":t.kanbanBoardResults,onNew_card:a[1]||(a[1]=e=>i.newCard(e))},null,8,["kanban-card-results","column-results","level-results","kanban-board-results"]),(0,n.Wm)(m,{"card-information":r.cardInformation,onUpdate_card:a[2]||(a[2]=e=>i.updateCard(e))},null,8,["card-information"]),(0,n.Wm)(b,{"location-id":t.locationId,"column-results":t.columnResults,"level-results":t.levelResults,onNew_card:a[3]||(a[3]=e=>i.newCard(e))},null,8,["location-id","column-results","level-results"])])}]])},7807:(e,a,t)=>{t.d(a,{Z:()=>_});var n=t(6252),l=t(3577);const o={key:0,class:"module-spacer"},s={class:"alert alert-dark"},d={key:1},r={class:"table"},i=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("td",null,"Note")])],-1),c=["innerHTML"],u=(0,n._)("div",{class:"spacer"},null,-1),m={class:"small-text"},b={name:"ListNotes",props:{destination:{type:String,default:""},noteHistoryResults:{type:Array,default:function(){return[]}}}},_=(0,t(3744).Z)(b,[["render",function(e,a,t,b,_,k){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.kq)(" NOTE HISTORY "),0==t.noteHistoryResults.length?((0,n.wg)(),(0,n.iD)("div",o,[(0,n._)("div",s," Sorry - but there are no notes for this "+(0,l.toDisplayString)(t.destination)+". ",1)])):((0,n.wg)(),(0,n.iD)("div",d,[(0,n._)("table",r,[i,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.noteHistoryResults,(e=>((0,n.wg)(),(0,n.iD)("tr",{key:e.pk},[(0,n._)("td",null,[(0,n._)("div",{innerHTML:e.fields.object_note.substr(0,400)},null,8,c),u,(0,n._)("p",m,(0,l.toDisplayString)(e.fields.date_created),1)])])))),128))])])]))])}]])},3058:(e,a,t)=>{t.d(a,{Z:()=>l});var n=t(9909);const l={methods:{showErrorModal:function(e,a,t){new n.u_(document.getElementById("loadingModal")).hide(),document.getElementById("errorModalContent").innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new requirement<hr>${e}`,new n.u_(document.getElementById("errorModal")).show()},showValidationErrorModal:function(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new n.u_(document.getElementById("errorModal")).show()}}}},5808:(e,a,t)=>{t.d(a,{Z:()=>L});var n=t(459),l=t(5555),o=t(9980),s=t(6443),d=t(1327),r=t(3408),i=t(647),c=t(1278),u=t(9672),m=t(5984),b=t(763),_=t(5004),k=t(1321),p=t(5189),h=t(947),v=t(780),f=t(295),g=t(8093),C=t(3843),y=t(2393),w=t(114),I=t(9714),M=t(1323),D=t(2610),R=t(4187);const L={data:()=>({icons:{arrowUp:n.Z,bugIcon:l.Z,bxBriefcase:o.Z,cardChecklist:s.Z,clipboardIcon:d.Z,documentPdf:r.Z,documentText:i.Z,folderIcon:c.Z,groupPresentation:u.Z,imageIcon:m.Z,infoCircle:b.Z,linkIcon:_.Z,linkIcon2:k.Z,linkOut:p.Z,mailIcon:h.Z,microsoftExcel:v.Z,microsoftPowerpoint:f.Z,microsoftWord:g.Z,noteAdd:C.Z,objectStorage:y.Z,passwordIcon:w.Z,trashCan:I.Z,userIcon:M.Z,usersIcon:D.Z,xCircle:R.Z}})}}}]);